/*! For license information please see main.2392833e.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},153:(e,t,n)=>{var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,s={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:c,props:s,_owner:a.current}}t.Fragment=s,t.jsx=u,t.jsxs=u},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=b.prototype=new v;w.constructor=b,m(w,y.prototype),w.isPureReactComponent=!0;var E=Array.isArray,S=Object.prototype.hasOwnProperty,k={current:null},_={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)S.call(t,i)&&!_.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:k.current}}function x(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var I=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function N(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===s?"."+C(l,0):s,E(o)?(i="",null!=e&&(i=e.replace(I,"$&/")+"/"),N(o,t,i,"",function(e){return e})):null!=o&&(x(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(I,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",E(e))for(var u=0;u<e.length;u++){var c=s+C(a=e[u],u);l+=N(a,t,i,c,o)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(a=e.next()).done;)l+=N(a=a.value,t,i,c=s+C(a,u++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",function(e){return t.call(n,e,i++)}),r}function D(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},P={transition:null},O={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:P,ReactCurrentOwner:k};function L(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:A,forEach:function(e,t,n){A(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return A(e,function(){t++}),t},toArray:function(e){return A(e,function(e){return e})||[]},only:function(e){if(!x(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=b,t.StrictMode=s,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.act=L,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=k.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)S.call(t,u)&&!_.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=x,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=L,t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],u=a+1,c=e[u];if(0>s(l,n))u<i&&0>s(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[a]=n,r=a);else{if(!(u<i&&0>s(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],c=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function E(e){if(g=!1,w(e),!m)if(null!==r(u))m=!0,P(S);else{var t=r(c);null!==t&&O(E,t.startTime-e)}}function S(e,n){m=!1,g&&(g=!1,v(x),x=-1),p=!0;var s=f;try{for(w(n),d=r(u);null!==d&&(!(d.expirationTime>n)||e&&!N());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(u)&&i(u),w(n)}else i(u);d=r(u)}if(null!==d)var l=!0;else{var h=r(c);null!==h&&O(E,h.startTime-n),l=!1}return l}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,_=!1,T=null,x=-1,I=5,C=-1;function N(){return!(t.unstable_now()-C<I)}function A(){if(null!==T){var e=t.unstable_now();C=e;var n=!0;try{n=T(!0,e)}finally{n?k():(_=!1,T=null)}}else _=!1}if("function"===typeof b)k=function(){b(A)};else if("undefined"!==typeof MessageChannel){var D=new MessageChannel,R=D.port2;D.port1.onmessage=A,k=function(){R.postMessage(null)}}else k=function(){y(A,0)};function P(e){T=e,_||(_=!0,k())}function O(e,n){x=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,P(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(c,e),null===r(u)&&e===r(c)&&(g?(v(x),x=-1):g=!0,O(E,s-o))):(e.sortIndex=a,n(u,e),m||p||(m=!0,P(S))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},579:(e,t,n)=>{e.exports=n(153)},730:(e,t,n)=>{var r=n(43),i=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,E=Symbol.for("react.element"),S=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),I=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function j(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(oi){var r=oi}Reflect.construct(e,[],t)}else{try{t.call()}catch(oi){r=oi}e.call(t.prototype)}else{try{throw Error()}catch(oi){r=oi}e()}}catch(oi){if(oi&&r&&"string"===typeof oi.stack){for(var i=oi.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?j(e):""}function z(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case S:return"Portal";case T:return"Profiler";case _:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case I:return(e.displayName||"Context")+".Consumer";case x:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case D:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function $(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(kl){return e.body}}function Q(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){X(e,t);var n=q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&G(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:q(n)}}function se(e,t){var n=q(t.value),r=q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,ce,he=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ce(e,t)})}:ce);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function Ee(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,ke=null,_e=null;function Te(e){if(e=ki(e)){if("function"!==typeof Se)throw Error(s(280));var t=e.stateNode;t&&(t=Ti(t),Se(e.stateNode,e.type,t))}}function xe(e){ke?_e?_e.push(e):_e=[e]:ke=e}function Ie(){if(ke){var e=ke,t=_e;if(_e=ke=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var Ae=!1;function De(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ce(e,t,n)}finally{Ae=!1,(null!==ke||null!==_e)&&(Ne(),Ie())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=Ti(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Pe=!1;if(c)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ce){Pe=!1}function Le(e,t,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Me=!1,Fe=null,je=!1,Ue=null,Ve={onError:function(e){Me=!0,Fe=e}};function ze(e,t,n,r,i,s,o,a,l){Me=!1,Fe=null,Le.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function $e(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function qe(e){if(Be(e)!==e)throw Error(s(188))}function He(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return qe(i),e;if(o===r)return qe(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e),null!==e?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var We=i.unstable_scheduleCallback,Ge=i.unstable_cancelCallback,Qe=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Xe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ut=64,ct=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=ht(a):0!==(s&=o)&&(r=ht(s))}else 0!==(o=n&~i)?r=ht(o):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ut;return 0===(4194240&(ut<<=1))&&(ut=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var Et,St,kt,_t,Tt,xt=!1,It=[],Ct=null,Nt=null,At=null,Dt=new Map,Rt=new Map,Pt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Dt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Mt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&St(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=Si(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=$e(n)))return e.blockedOn=t,void Tt(e.priority,function(){kt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function jt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&St(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Ut(e,t,n){jt(e)&&n.delete(t)}function Vt(){xt=!1,null!==Ct&&jt(Ct)&&(Ct=null),null!==Nt&&jt(Nt)&&(Nt=null),null!==At&&jt(At)&&(At=null),Dt.forEach(Ut),Rt.forEach(Ut)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,xt||(xt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function Bt(e){function t(t){return zt(t,e)}if(0<It.length){zt(It[0],e);for(var n=1;n<It.length;n++){var r=It[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&zt(Ct,e),null!==Nt&&zt(Nt,e),null!==At&&zt(At,e),Dt.forEach(t),Rt.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Pt.shift()}var $t=w.ReactCurrentBatchConfig,qt=!0;function Ht(e,t,n,r){var i=bt,s=$t.transition;$t.transition=null;try{bt=1,Wt(e,t,n,r)}finally{bt=i,$t.transition=s}}function Kt(e,t,n,r){var i=bt,s=$t.transition;$t.transition=null;try{bt=4,Wt(e,t,n,r)}finally{bt=i,$t.transition=s}}function Wt(e,t,n,r){if(qt){var i=Qt(e,t,n,r);if(null===i)qr(e,t,r,Gt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return At=Mt(At,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Dt.set(s,Mt(Dt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Rt.set(s,Mt(Rt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var s=ki(i);if(null!==s&&Et(s),null===(s=Qt(e,t,n,r))&&qr(e,t,r,Gt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else qr(e,t,r,null,n)}}var Gt=null;function Qt(e,t,n,r){if(Gt=null,null!==(e=Si(e=Ee(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=$e(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=sn(un),hn=F({},un,{view:0,detail:0}),dn=sn(hn),fn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(fn),mn=sn(F({},fn,{dataTransfer:0})),gn=sn(F({},hn,{relatedTarget:0})),yn=sn(F({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=F({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=sn(vn),wn=sn(F({},un,{data:0})),En={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _n(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function Tn(){return _n}var xn=F({},hn,{key:function(e){if(e.key){var t=En[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),In=sn(xn),Cn=sn(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=sn(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),An=sn(F({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=F({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=sn(Dn),Pn=[9,13,27,32],On=c&&"CompositionEvent"in window,Ln=null;c&&"documentMode"in document&&(Ln=document.documentMode);var Mn=c&&"TextEvent"in window&&!Ln,Fn=c&&(!On||Ln&&8<Ln&&11>=Ln),jn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var $n={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!$n[e.type]:"textarea"===t}function Hn(e,t,n,r){xe(r),0<(t=Kr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Wn=null;function Gn(e){jr(e,0)}function Qn(e){if(W(_i(e)))return e}function Yn(e,t){if("change"===e)return t}var Xn=!1;if(c){var Jn;if(c){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Wn=Kn=null)}function nr(e){if("value"===e.propertyName&&Qn(Wn)){var t=[];Hn(t,Wn,e,Ee(e)),De(Gn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Wn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Wn)}function sr(e,t){if("click"===e)return Qn(t)}function or(e,t){if("input"===e||"change"===e)return Qn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=G((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=cr(n,s);var o=cr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=c&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,br=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==G(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Kr(yr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function Er(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sr={animationend:Er("Animation","AnimationEnd"),animationiteration:Er("Animation","AnimationIteration"),animationstart:Er("Animation","AnimationStart"),transitionend:Er("Transition","TransitionEnd")},kr={},_r={};function Tr(e){if(kr[e])return kr[e];if(!Sr[e])return e;var t,n=Sr[e];for(t in n)if(n.hasOwnProperty(t)&&t in _r)return kr[e]=n[t];return e}c&&(_r=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);var xr=Tr("animationend"),Ir=Tr("animationiteration"),Cr=Tr("animationstart"),Nr=Tr("transitionend"),Ar=new Map,Dr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Ar.set(e,t),l(t,[e])}for(var Pr=0;Pr<Dr.length;Pr++){var Or=Dr[Pr];Rr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Rr(xr,"onAnimationEnd"),Rr(Ir,"onAnimationIteration"),Rr(Cr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Nr,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,l,u){if(ze.apply(this,arguments),Me){if(!Me)throw Error(s(198));var c=Fe;Me=!1,Fe=null,je||(je=!0,Ue=c)}}(r,t,void 0,e),e.currentTarget=null}function jr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,a,u),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,a,u),s=l}}}if(je)throw e=Ue,je=!1,Ue=null,e}function Ur(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||($r(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),$r(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,o.forEach(function(t){"selectionchange"!==t&&(Mr.has(t)||Vr(t,!1,e),Vr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Vr("selectionchange",!1,t))}}function $r(e,t,n,r){switch(Yt(t)){case 1:var i=Ht;break;case 4:i=Kt;break;default:i=Wt}n=i.bind(null,t,n,e),i=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function qr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=Si(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}De(function(){var r=s,i=Ee(n),o=[];e:{var a=Ar.get(e);if(void 0!==a){var l=cn,u=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=In;break;case"focusin":u="focus",l=gn;break;case"focusout":u="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Nn;break;case xr:case Ir:case Cr:l=yn;break;case Nr:l=An;break;case"scroll":l=dn;break;case"wheel":l=Rn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var c=0!==(4&t),h=!c&&"scroll"===e,d=c?null!==a?a+"Capture":null:a;c=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=Re(p,d))&&c.push(Hr(p,m,f)))),h)break;p=p.return}0<c.length&&(a=new l(a,u,null,n,i),o.push({event:a,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===we||!(u=n.relatedTarget||n.fromElement)||!Si(u)&&!u[yi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?Si(u):null)&&(u!==(h=Be(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=pn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=Cn,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:_i(l),f=null==u?a:_i(u),(a=new c(m,p+"leave",l,n,i)).target=h,a.relatedTarget=f,m=null,Si(i)===r&&((c=new c(d,p+"enter",u,n,i)).target=f,c.relatedTarget=h,m=c),h=m,l&&u)e:{for(d=u,p=0,f=c=l;f;f=Wr(f))p++;for(f=0,m=d;m;m=Wr(m))f++;for(;0<p-f;)c=Wr(c),p--;for(;0<f-p;)d=Wr(d),f--;for(;p--;){if(c===d||null!==d&&c===d.alternate)break e;c=Wr(c),d=Wr(d)}c=null}else c=null;null!==l&&Gr(o,a,l,c,!1),null!==u&&null!==h&&Gr(o,h,u,c,!0)}if("select"===(l=(a=r?_i(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Yn;else if(qn(a))if(Xn)g=or;else{g=ir;var y=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=sr);switch(g&&(g=g(e,r))?Hn(o,g,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=r?_i(r):window,e){case"focusin":(qn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,wr(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":wr(o,n,i)}var v;if(On)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Bn?Vn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Fn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Bn&&(v=en()):(Jt="value"in(Xt=i)?Xt.value:Xt.textContent,Bn=!0)),0<(y=Kr(r,b)).length&&(b=new wn(b,e,null,n,i),o.push({event:b,listeners:y}),v?b.data=v:null!==(v=zn(n))&&(b.data=v))),(v=Mn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Un=!0,jn);case"textInput":return(e=t.data)===jn&&Un?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!On&&Vn(e,t)?(e=en(),Zt=Jt=Xt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=v))}jr(o,t)})}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Re(e,n))&&r.unshift(Hr(e,s,i)),null!=(s=Re(e,t))&&r.push(Hr(e,s,i))),e=e.return}return r}function Wr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==u&&(a=u,i?null!=(l=Re(n,s))&&o.unshift(Hr(n,l,a)):i||null!=(l=Re(n,s))&&o.push(Hr(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Qr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Qr,"\n").replace(Yr,"")}function Jr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ri(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ii="function"===typeof setTimeout?setTimeout:void 0,si="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,li="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ii;function ui(e){setTimeout(function(){throw e})}function ci(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function hi(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function di(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),pi="__reactFiber$"+fi,gi="__reactProps$"+fi,yi="__reactContainer$"+fi,vi="__reactEvents$"+fi,wi="__reactListeners$"+fi,Ei="__reactHandles$"+fi;function Si(e){var t=e[pi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[yi]||n[pi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=di(e);null!==e;){if(n=e[pi])return n;e=di(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[pi]||e[yi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function _i(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function Ti(e){return e[gi]||null}var xi=[],Ii=-1;function Ci(e){return{current:e}}function Ni(e){0>Ii||(e.current=xi[Ii],xi[Ii]=null,Ii--)}function Ai(e,t){Ii++,xi[Ii]=e.current,e.current=t}var Di={},Ri=Ci(Di),Pi=Ci(!1),Oi=Di;function Li(e,t){var n=e.type.contextTypes;if(!n)return Di;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Mi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Fi(){Ni(Pi),Ni(Ri)}function ji(e,t,n){if(Ri.current!==Di)throw Error(s(168));Ai(Ri,t),Ai(Pi,n)}function Ui(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,$(e)||"Unknown",i));return F({},n,r)}function Vi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Di,Oi=Ri.current,Ai(Ri,e),Ai(Pi,Pi.current),!0}function zi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Ui(e,t,Oi),r.__reactInternalMemoizedMergedChildContext=e,Ni(Pi),Ni(Ri),Ai(Ri,e)):Ni(Pi),Ai(Pi,n)}var Bi=null,$i=!1,qi=!1;function Hi(e){null===Bi?Bi=[e]:Bi.push(e)}function Ki(){if(!qi&&null!==Bi){qi=!0;var e=0,t=bt;try{var n=Bi;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Bi=null,$i=!1}catch(i){throw null!==Bi&&(Bi=Bi.slice(e+1)),We(Ze,Ki),i}finally{bt=t,qi=!1}}return null}var Wi=[],Gi=0,Qi=null,Yi=0,Xi=[],Ji=0,Zi=null,es=1,ts="";function ns(e,t){Wi[Gi++]=Yi,Wi[Gi++]=Qi,Qi=e,Yi=t}function rs(e,t,n){Xi[Ji++]=es,Xi[Ji++]=ts,Xi[Ji++]=Zi,Zi=e;var r=es;e=ts;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,es=1<<32-ot(t)+i|n<<i|r,ts=s+e}else es=1<<s|n<<i|r,ts=e}function is(e){null!==e.return&&(ns(e,1),rs(e,1,0))}function ss(e){for(;e===Qi;)Qi=Wi[--Gi],Wi[Gi]=null,Yi=Wi[--Gi],Wi[Gi]=null;for(;e===Zi;)Zi=Xi[--Ji],Xi[Ji]=null,ts=Xi[--Ji],Xi[Ji]=null,es=Xi[--Ji],Xi[Ji]=null}var os=null,as=null,ls=!1,us=null;function cs(e,t){var n=Fu(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function hs(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,os=e,as=hi(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,os=e,as=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Zi?{id:es,overflow:ts}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Fu(18,null,null,0)).stateNode=t,n.return=e,e.child=n,os=e,as=null,!0);default:return!1}}function ds(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function fs(e){if(ls){var t=as;if(t){var n=t;if(!hs(e,t)){if(ds(e))throw Error(s(418));t=hi(n.nextSibling);var r=os;t&&hs(e,t)?cs(r,n):(e.flags=-4097&e.flags|2,ls=!1,os=e)}}else{if(ds(e))throw Error(s(418));e.flags=-4097&e.flags|2,ls=!1,os=e}}}function ps(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;os=e}function ms(e){if(e!==os)return!1;if(!ls)return ps(e),ls=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ri(e.type,e.memoizedProps)),t&&(t=as)){if(ds(e))throw gs(),Error(s(418));for(;t;)cs(e,t),t=hi(t.nextSibling)}if(ps(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){as=hi(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}as=null}}else as=os?hi(e.stateNode.nextSibling):null;return!0}function gs(){for(var e=as;e;)e=hi(e.nextSibling)}function ys(){as=os=null,ls=!1}function vs(e){null===us?us=[e]:us.push(e)}var bs=w.ReactCurrentBatchConfig;function ws(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Es(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ss(e){return(0,e._init)(e._payload)}function ks(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Uu(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=$u(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){var s=n.type;return s===k?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===R&&Ss(s)===t.type)?((r=i(t,n.props)).ref=ws(e,t,n),r.return=e,r):((r=Vu(n.type,n.key,n.props,null,e.mode,r)).ref=ws(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=qu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=zu(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=$u(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case E:return(n=Vu(t.type,t.key,t.props,null,e.mode,n)).ref=ws(e,null,t),n.return=e,n;case S:return(t=qu(t,e.mode,n)).return=e,t;case R:return d(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=zu(t,e.mode,n,null)).return=e,t;Es(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case E:return n.key===i?u(e,t,n,r):null;case S:return n.key===i?c(e,t,n,r):null;case R:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);Es(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case E:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case S:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);Es(t,r)}return null}function m(i,s,a,l){for(var u=null,c=null,h=s,m=s=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=f(i,h,a[m],l);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),s=o(y,s,m),null===c?u=y:c.sibling=y,c=y,h=g}if(m===a.length)return n(i,h),ls&&ns(i,m),u;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],l))&&(s=o(h,s,m),null===c?u=h:c.sibling=h,c=h);return ls&&ns(i,m),u}for(h=r(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),s=o(g,s,m),null===c?u=g:c.sibling=g,c=g);return e&&h.forEach(function(e){return t(i,e)}),ls&&ns(i,m),u}function g(i,a,l,u){var c=L(l);if("function"!==typeof c)throw Error(s(150));if(null==(l=c.call(l)))throw Error(s(151));for(var h=c=null,m=a,g=a=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=f(i,m,v.value,u);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(i,m),a=o(b,a,g),null===h?c=b:h.sibling=b,h=b,m=y}if(v.done)return n(i,m),ls&&ns(i,g),c;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=d(i,v.value,u))&&(a=o(v,a,g),null===h?c=v:h.sibling=v,h=v);return ls&&ns(i,g),c}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,u))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=o(v,a,g),null===h?c=v:h.sibling=v,h=v);return e&&m.forEach(function(e){return t(i,e)}),ls&&ns(i,g),c}return function e(r,s,o,l){if("object"===typeof o&&null!==o&&o.type===k&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case E:e:{for(var u=o.key,c=s;null!==c;){if(c.key===u){if((u=o.type)===k){if(7===c.tag){n(r,c.sibling),(s=i(c,o.props.children)).return=r,r=s;break e}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===R&&Ss(u)===c.type){n(r,c.sibling),(s=i(c,o.props)).ref=ws(r,c,o),s.return=r,r=s;break e}n(r,c);break}t(r,c),c=c.sibling}o.type===k?((s=zu(o.props.children,r.mode,l,o.key)).return=r,r=s):((l=Vu(o.type,o.key,o.props,null,r.mode,l)).ref=ws(r,s,o),l.return=r,r=l)}return a(r);case S:e:{for(c=o.key;null!==s;){if(s.key===c){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=qu(o,r.mode,l)).return=r,r=s}return a(r);case R:return e(r,s,(c=o._init)(o._payload),l)}if(te(o))return m(r,s,o,l);if(L(o))return g(r,s,o,l);Es(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=$u(o,r.mode,l)).return=r,r=s),a(r)):n(r,s)}}var _s=ks(!0),Ts=ks(!1),xs=Ci(null),Is=null,Cs=null,Ns=null;function As(){Ns=Cs=Is=null}function Ds(e){var t=xs.current;Ni(xs),e._currentValue=t}function Rs(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ps(e,t){Is=e,Ns=Cs=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(_a=!0),e.firstContext=null)}function Os(e){var t=e._currentValue;if(Ns!==e)if(e={context:e,memoizedValue:t,next:null},null===Cs){if(null===Is)throw Error(s(308));Cs=e,Is.dependencies={lanes:0,firstContext:e}}else Cs=Cs.next=e;return t}var Ls=null;function Ms(e){null===Ls?Ls=[e]:Ls.push(e)}function Fs(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ms(t)):(n.next=i.next,i.next=n),t.interleaved=n,js(e,r)}function js(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Us=!1;function Vs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function $s(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function qs(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Ol)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,js(e,n)}return null===(i=r.interleaved)?(t.next=t,Ms(r)):(t.next=i.next,i.next=t),r.interleaved=t,js(e,n)}function Hs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Ks(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ws(e,t,n,r){var i=e.updateQueue;Us=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,u=l.next;l.next=null,null===o?s=u:o.next=u,o=l;var c=e.alternate;null!==c&&((a=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===a?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(null!==s){var h=i.baseState;for(o=0,c=u=l=null,a=s;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==c&&(c=c.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(f,h,d):p)||void 0===d)break e;h=F({},h,d);break e;case 2:Us=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===c?(u=c=f,l=h):c=c.next=f,o|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===c&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Bl|=o,e.lanes=o,e.memoizedState=h}}function Gs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Qs={},Ys=Ci(Qs),Xs=Ci(Qs),Js=Ci(Qs);function Zs(e){if(e===Qs)throw Error(s(174));return e}function eo(e,t){switch(Ai(Js,t),Ai(Xs,e),Ai(Ys,Qs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ni(Ys),Ai(Ys,t)}function to(){Ni(Ys),Ni(Xs),Ni(Js)}function no(e){Zs(Js.current);var t=Zs(Ys.current),n=le(t,e.type);t!==n&&(Ai(Xs,e),Ai(Ys,n))}function ro(e){Xs.current===e&&(Ni(Ys),Ni(Xs))}var io=Ci(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var oo=[];function ao(){for(var e=0;e<oo.length;e++)oo[e]._workInProgressVersionPrimary=null;oo.length=0}var lo=w.ReactCurrentDispatcher,uo=w.ReactCurrentBatchConfig,co=0,ho=null,fo=null,po=null,mo=!1,go=!1,yo=0,vo=0;function bo(){throw Error(s(321))}function wo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function Eo(e,t,n,r,i,o){if(co=o,ho=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,lo.current=null===e||null===e.memoizedState?ia:sa,e=n(r,i),go){o=0;do{if(go=!1,yo=0,25<=o)throw Error(s(301));o+=1,po=fo=null,t.updateQueue=null,lo.current=oa,e=n(r,i)}while(go)}if(lo.current=ra,t=null!==fo&&null!==fo.next,co=0,po=fo=ho=null,mo=!1,t)throw Error(s(300));return e}function So(){var e=0!==yo;return yo=0,e}function ko(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===po?ho.memoizedState=po=e:po=po.next=e,po}function _o(){if(null===fo){var e=ho.alternate;e=null!==e?e.memoizedState:null}else e=fo.next;var t=null===po?ho.memoizedState:po.next;if(null!==t)po=t,fo=e;else{if(null===e)throw Error(s(310));e={memoizedState:(fo=e).memoizedState,baseState:fo.baseState,baseQueue:fo.baseQueue,queue:fo.queue,next:null},null===po?ho.memoizedState=po=e:po=po.next=e}return po}function To(e,t){return"function"===typeof t?t(e):t}function xo(e){var t=_o(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=fo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=a=null,u=null,c=o;do{var h=c.lane;if((co&h)===h)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=d,a=r):u=u.next=d,ho.lanes|=h,Bl|=h}c=c.next}while(null!==c&&c!==o);null===u?a=r:u.next=l,ar(r,t.memoizedState)||(_a=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=u,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,ho.lanes|=o,Bl|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Io(e){var t=_o(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(_a=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Co(){}function No(e,t){var n=ho,r=_o(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,_a=!0),r=r.queue,zo(Ro.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==po&&1&po.memoizedState.tag){if(n.flags|=2048,Mo(9,Do.bind(null,n,r,i,t),void 0,null),null===Ll)throw Error(s(349));0!==(30&co)||Ao(n,t,i)}return i}function Ao(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ho.updateQueue)?(t={lastEffect:null,stores:null},ho.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Do(e,t,n,r){t.value=n,t.getSnapshot=r,Po(t)&&Oo(e)}function Ro(e,t,n){return n(function(){Po(t)&&Oo(e)})}function Po(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Oo(e){var t=js(e,1);null!==t&&lu(t,e,1,-1)}function Lo(e){var t=ko();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:To,lastRenderedState:e},t.queue=e,e=e.dispatch=Zo.bind(null,ho,e),[t.memoizedState,e]}function Mo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ho.updateQueue)?(t={lastEffect:null,stores:null},ho.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Fo(){return _o().memoizedState}function jo(e,t,n,r){var i=ko();ho.flags|=e,i.memoizedState=Mo(1|t,n,void 0,void 0===r?null:r)}function Uo(e,t,n,r){var i=_o();r=void 0===r?null:r;var s=void 0;if(null!==fo){var o=fo.memoizedState;if(s=o.destroy,null!==r&&wo(r,o.deps))return void(i.memoizedState=Mo(t,n,s,r))}ho.flags|=e,i.memoizedState=Mo(1|t,n,s,r)}function Vo(e,t){return jo(8390656,8,e,t)}function zo(e,t){return Uo(2048,8,e,t)}function Bo(e,t){return Uo(4,2,e,t)}function $o(e,t){return Uo(4,4,e,t)}function qo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ho(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Uo(4,4,qo.bind(null,t,e),n)}function Ko(){}function Wo(e,t){var n=_o();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&wo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Go(e,t){var n=_o();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&wo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Qo(e,t,n){return 0===(21&co)?(e.baseState&&(e.baseState=!1,_a=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),ho.lanes|=n,Bl|=n,e.baseState=!0),t)}function Yo(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=uo.transition;uo.transition={};try{e(!1),t()}finally{bt=n,uo.transition=r}}function Xo(){return _o().memoizedState}function Jo(e,t,n){var r=au(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ea(e))ta(t,n);else if(null!==(n=Fs(e,t,n,r))){lu(n,e,r,ou()),na(n,t,r)}}function Zo(e,t,n){var r=au(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ea(e))ta(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var l=t.interleaved;return null===l?(i.next=i,Ms(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(oi){}null!==(n=Fs(e,t,i,r))&&(lu(n,e,r,i=ou()),na(n,t,r))}}function ea(e){var t=e.alternate;return e===ho||null!==t&&t===ho}function ta(e,t){go=mo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function na(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var ra={readContext:Os,useCallback:bo,useContext:bo,useEffect:bo,useImperativeHandle:bo,useInsertionEffect:bo,useLayoutEffect:bo,useMemo:bo,useReducer:bo,useRef:bo,useState:bo,useDebugValue:bo,useDeferredValue:bo,useTransition:bo,useMutableSource:bo,useSyncExternalStore:bo,useId:bo,unstable_isNewReconciler:!1},ia={readContext:Os,useCallback:function(e,t){return ko().memoizedState=[e,void 0===t?null:t],e},useContext:Os,useEffect:Vo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,jo(4194308,4,qo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return jo(4194308,4,e,t)},useInsertionEffect:function(e,t){return jo(4,2,e,t)},useMemo:function(e,t){var n=ko();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ko();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Jo.bind(null,ho,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ko().memoizedState=e},useState:Lo,useDebugValue:Ko,useDeferredValue:function(e){return ko().memoizedState=e},useTransition:function(){var e=Lo(!1),t=e[0];return e=Yo.bind(null,e[1]),ko().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ho,i=ko();if(ls){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Ll)throw Error(s(349));0!==(30&co)||Ao(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Vo(Ro.bind(null,r,o,e),[e]),r.flags|=2048,Mo(9,Do.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=ko(),t=Ll.identifierPrefix;if(ls){var n=ts;t=":"+t+"R"+(n=(es&~(1<<32-ot(es)-1)).toString(32)+n),0<(n=yo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=vo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},sa={readContext:Os,useCallback:Wo,useContext:Os,useEffect:zo,useImperativeHandle:Ho,useInsertionEffect:Bo,useLayoutEffect:$o,useMemo:Go,useReducer:xo,useRef:Fo,useState:function(){return xo(To)},useDebugValue:Ko,useDeferredValue:function(e){return Qo(_o(),fo.memoizedState,e)},useTransition:function(){return[xo(To)[0],_o().memoizedState]},useMutableSource:Co,useSyncExternalStore:No,useId:Xo,unstable_isNewReconciler:!1},oa={readContext:Os,useCallback:Wo,useContext:Os,useEffect:zo,useImperativeHandle:Ho,useInsertionEffect:Bo,useLayoutEffect:$o,useMemo:Go,useReducer:Io,useRef:Fo,useState:function(){return Io(To)},useDebugValue:Ko,useDeferredValue:function(e){var t=_o();return null===fo?t.memoizedState=e:Qo(t,fo.memoizedState,e)},useTransition:function(){return[Io(To)[0],_o().memoizedState]},useMutableSource:Co,useSyncExternalStore:No,useId:Xo,unstable_isNewReconciler:!1};function aa(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function la(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ua={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ou(),i=au(e),s=$s(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=qs(e,s,i))&&(lu(t,e,i,r),Hs(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ou(),i=au(e),s=$s(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=qs(e,s,i))&&(lu(t,e,i,r),Hs(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ou(),r=au(e),i=$s(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=qs(e,i,r))&&(lu(t,e,r,n),Hs(t,e,r))}};function ca(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function ha(e,t,n){var r=!1,i=Di,s=t.contextType;return"object"===typeof s&&null!==s?s=Os(s):(i=Mi(t)?Oi:Ri.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Li(e,i):Di),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ua,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function da(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ua.enqueueReplaceState(t,t.state,null)}function fa(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Vs(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Os(s):(s=Mi(t)?Oi:Ri.current,i.context=Li(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(la(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ua.enqueueReplaceState(i,i.state,null),Ws(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function pa(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ma(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ga(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ya="function"===typeof WeakMap?WeakMap:Map;function va(e,t,n){(n=$s(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Yl||(Yl=!0,Xl=r),ga(0,t)},n}function ba(e,t,n){(n=$s(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ga(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){ga(0,t),"function"!==typeof r&&(null===Jl?Jl=new Set([this]):Jl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function wa(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ya;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Du.bind(null,e,t,n),t.then(e,e))}function Ea(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function Sa(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=$s(-1,1)).tag=2,qs(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ka=w.ReactCurrentOwner,_a=!1;function Ta(e,t,n,r){t.child=null===e?Ts(t,null,n,r):_s(t,e.child,n,r)}function xa(e,t,n,r,i){n=n.render;var s=t.ref;return Ps(t,i),r=Eo(e,t,n,r,s,i),n=So(),null===e||_a?(ls&&n&&is(t),t.flags|=1,Ta(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Qa(e,t,i))}function Ia(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||ju(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Vu(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ca(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return Qa(e,t,i)}return t.flags|=1,(e=Uu(s,r)).ref=t.ref,e.return=t,t.child=e}function Ca(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(_a=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Qa(e,t,i);0!==(131072&e.flags)&&(_a=!0)}}return Da(e,t,n,r,i)}function Na(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ai(Ul,jl),jl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ai(Ul,jl),jl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ai(Ul,jl),jl|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ai(Ul,jl),jl|=r;return Ta(e,t,i,n),t.child}function Aa(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Da(e,t,n,r,i){var s=Mi(n)?Oi:Ri.current;return s=Li(t,s),Ps(t,i),n=Eo(e,t,n,r,s,i),r=So(),null===e||_a?(ls&&r&&is(t),t.flags|=1,Ta(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Qa(e,t,i))}function Ra(e,t,n,r,i){if(Mi(n)){var s=!0;Vi(t)}else s=!1;if(Ps(t,i),null===t.stateNode)Ga(e,t),ha(t,n,r),fa(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,u=n.contextType;"object"===typeof u&&null!==u?u=Os(u):u=Li(t,u=Mi(n)?Oi:Ri.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==u)&&da(t,o,r,u),Us=!1;var d=t.memoizedState;o.state=d,Ws(t,r,o,i),l=t.memoizedState,a!==r||d!==l||Pi.current||Us?("function"===typeof c&&(la(t,n,c,r),l=t.memoizedState),(a=Us||ca(t,n,a,r,d,l,u))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,zs(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:aa(t.type,a),o.props=u,h=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Os(l):l=Li(t,l=Mi(n)?Oi:Ri.current);var f=n.getDerivedStateFromProps;(c="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==l)&&da(t,o,r,l),Us=!1,d=t.memoizedState,o.state=d,Ws(t,r,o,i);var p=t.memoizedState;a!==h||d!==p||Pi.current||Us?("function"===typeof f&&(la(t,n,f,r),p=t.memoizedState),(u=Us||ca(t,n,u,r,d,p,l)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=u):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Pa(e,t,n,r,s,i)}function Pa(e,t,n,r,i,s){Aa(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&zi(t,n,!1),Qa(e,t,s);r=t.stateNode,ka.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=_s(t,e.child,null,s),t.child=_s(t,null,a,s)):Ta(e,t,a,s),t.memoizedState=r.state,i&&zi(t,n,!0),t.child}function Oa(e){var t=e.stateNode;t.pendingContext?ji(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ji(0,t.context,!1),eo(e,t.containerInfo)}function La(e,t,n,r,i){return ys(),vs(i),t.flags|=256,Ta(e,t,n,r),t.child}var Ma,Fa,ja,Ua,Va={dehydrated:null,treeContext:null,retryLane:0};function za(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ba(e,t,n){var r,i=t.pendingProps,o=io.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ai(io,1&o),null===e)return fs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Bu(l,i,0,null),e=zu(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=za(n),t.memoizedState=Va,e):$a(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,qa(e,t,a,r=ma(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Bu({mode:"visible",children:r.children},i,0,null),(o=zu(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&_s(t,e.child,null,a),t.child.memoizedState=za(a),t.memoizedState=Va,o);if(0===(1&t.mode))return qa(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,qa(e,t,a,r=ma(o=Error(s(419)),r,void 0))}if(l=0!==(a&e.childLanes),_a||l){if(null!==(r=Ll)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,js(e,i),lu(r,e,i,-1))}return Eu(),qa(e,t,a,r=ma(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Pu.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,as=hi(i.nextSibling),os=t,ls=!0,us=null,null!==e&&(Xi[Ji++]=es,Xi[Ji++]=ts,Xi[Ji++]=Zi,es=e.id,ts=e.overflow,Zi=t),t=$a(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(a){a=i.fallback,l=t.mode,r=(o=e.child).sibling;var u={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=u,t.deletions=null):(i=Uu(o,u)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Uu(r,a):(a=zu(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?za(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Va,i}return e=(a=e.child).sibling,i=Uu(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function $a(e,t){return(t=Bu({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function qa(e,t,n,r){return null!==r&&vs(r),_s(t,e.child,null,n),(e=$a(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ha(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Rs(e.return,t,n)}function Ka(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Wa(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Ta(e,t,r.children,n),0!==(2&(r=io.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ha(e,n,t);else if(19===e.tag)Ha(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ai(io,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ka(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ka(t,!0,n,null,s);break;case"together":Ka(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ga(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Qa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Bl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Uu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Uu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ya(e,t){if(!ls)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Xa(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ja(e,t,n){var r=t.pendingProps;switch(ss(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xa(t),null;case 1:case 17:return Mi(t.type)&&Fi(),Xa(t),null;case 3:return r=t.stateNode,to(),Ni(Pi),Ni(Ri),ao(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ms(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==us&&(du(us),us=null))),Fa(e,t),Xa(t),null;case 5:ro(t);var i=Zs(Js.current);if(n=t.type,null!==e&&null!=t.stateNode)ja(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Xa(t),null}if(e=Zs(Ys.current),ms(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[pi]=t,r[gi]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":Y(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var l in ve(n,o),i=null,o)if(o.hasOwnProperty(l)){var u=o[l];"children"===l?"string"===typeof u?r.textContent!==u&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,u,e),i=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,u,e),i=["children",""+u]):a.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&Ur("scroll",r)}switch(n){case"input":K(r),Z(r,o,!0);break;case"textarea":K(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[pi]=t,e[gi]=r,Ma(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":Y(e,r),i=Q(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ve(n,i),u=i)if(u.hasOwnProperty(o)){var c=u[o];"style"===o?ge(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&he(e,c):"children"===o?"string"===typeof c?("textarea"!==n||""!==c)&&de(e,c):"number"===typeof c&&de(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=c&&"onScroll"===o&&Ur("scroll",e):null!=c&&b(e,o,c,l))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Xa(t),null;case 6:if(e&&null!=t.stateNode)Ua(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Zs(Js.current),Zs(Ys.current),ms(t)){if(r=t.stateNode,n=t.memoizedProps,r[pi]=t,(o=r.nodeValue!==n)&&null!==(e=os))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[pi]=t,t.stateNode=r}return Xa(t),null;case 13:if(Ni(io),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ls&&null!==as&&0!==(1&t.mode)&&0===(128&t.flags))gs(),ys(),t.flags|=98560,o=!1;else if(o=ms(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[pi]=t}else ys(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Xa(t),o=!1}else null!==us&&(du(us),us=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&io.current)?0===Vl&&(Vl=3):Eu())),null!==t.updateQueue&&(t.flags|=4),Xa(t),null);case 4:return to(),Fa(e,t),null===e&&Br(t.stateNode.containerInfo),Xa(t),null;case 10:return Ds(t.type._context),Xa(t),null;case 19:if(Ni(io),null===(o=t.memoizedState))return Xa(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Ya(o,!1);else{if(0!==Vl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=so(e))){for(t.flags|=128,Ya(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ai(io,1&io.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>Gl&&(t.flags|=128,r=!0,Ya(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ya(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!ls)return Xa(t),null}else 2*Xe()-o.renderingStartTime>Gl&&1073741824!==n&&(t.flags|=128,r=!0,Ya(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=io.current,Ai(io,r?1&n|2:1&n),t):(Xa(t),null);case 22:case 23:return yu(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&jl)&&(Xa(t),6&t.subtreeFlags&&(t.flags|=8192)):Xa(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Za(e,t){switch(ss(t),t.tag){case 1:return Mi(t.type)&&Fi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return to(),Ni(Pi),Ni(Ri),ao(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return ro(t),null;case 13:if(Ni(io),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ys()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ni(io),null;case 4:return to(),null;case 10:return Ds(t.type._context),null;case 22:case 23:return yu(),null;default:return null}}Ma=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Fa=function(){},ja=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Zs(Ys.current);var s,o=null;switch(n){case"input":i=Q(e,i),r=Q(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(c in ve(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var l=i[c];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(a.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var u=r[c];if(l=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(s in l)!l.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&l[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(o||(o=[]),o.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(o=o||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(o=o||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(a.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&Ur("scroll",e),o||l===u||(o=[])):(o=o||[]).push(c,u))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},Ua=function(e,t,n,r){n!==r&&(t.flags|=4)};var el=!1,tl=!1,nl="function"===typeof WeakSet?WeakSet:Set,rl=null;function il(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Au(e,t,r)}else n.current=null}function sl(e,t,n){try{n()}catch(r){Au(e,t,r)}}var ol=!1;function al(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&sl(t,n,s)}i=i.next}while(i!==r)}}function ll(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ul(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function cl(e){var t=e.alternate;null!==t&&(e.alternate=null,cl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[pi],delete t[gi],delete t[vi],delete t[wi],delete t[Ei])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function hl(e){return 5===e.tag||3===e.tag||4===e.tag}function dl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||hl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function fl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(fl(e,t,n),e=e.sibling;null!==e;)fl(e,t,n),e=e.sibling}function pl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(pl(e,t,n),e=e.sibling;null!==e;)pl(e,t,n),e=e.sibling}var ml=null,gl=!1;function yl(e,t,n){for(n=n.child;null!==n;)vl(e,t,n),n=n.sibling}function vl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:tl||il(n,t);case 6:var r=ml,i=gl;ml=null,yl(e,t,n),gl=i,null!==(ml=r)&&(gl?(e=ml,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ml.removeChild(n.stateNode));break;case 18:null!==ml&&(gl?(e=ml,n=n.stateNode,8===e.nodeType?ci(e.parentNode,n):1===e.nodeType&&ci(e,n),Bt(e)):ci(ml,n.stateNode));break;case 4:r=ml,i=gl,ml=n.stateNode.containerInfo,gl=!0,yl(e,t,n),ml=r,gl=i;break;case 0:case 11:case 14:case 15:if(!tl&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&sl(n,t,o),i=i.next}while(i!==r)}yl(e,t,n);break;case 1:if(!tl&&(il(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Au(n,t,a)}yl(e,t,n);break;case 21:yl(e,t,n);break;case 22:1&n.mode?(tl=(r=tl)||null!==n.memoizedState,yl(e,t,n),tl=r):yl(e,t,n);break;default:yl(e,t,n)}}function bl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new nl),t.forEach(function(t){var r=Ou.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function wl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:ml=l.stateNode,gl=!1;break e;case 3:case 4:ml=l.stateNode.containerInfo,gl=!0;break e}l=l.return}if(null===ml)throw Error(s(160));vl(o,a,i),ml=null,gl=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(oi){Au(i,t,oi)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)El(t,e),t=t.sibling}function El(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(wl(t,e),Sl(e),4&r){try{al(3,e,e.return),ll(3,e)}catch(g){Au(e,e.return,g)}try{al(5,e,e.return)}catch(g){Au(e,e.return,g)}}break;case 1:wl(t,e),Sl(e),512&r&&null!==n&&il(n,n.return);break;case 5:if(wl(t,e),Sl(e),512&r&&null!==n&&il(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(g){Au(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===l&&"radio"===o.type&&null!=o.name&&X(i,o),be(l,a);var c=be(l,o);for(a=0;a<u.length;a+=2){var h=u[a],d=u[a+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):b(i,h,d,c)}switch(l){case"input":J(i,o);break;case"textarea":se(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[gi]=o}catch(g){Au(e,e.return,g)}}break;case 6:if(wl(t,e),Sl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){Au(e,e.return,g)}}break;case 3:if(wl(t,e),Sl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(g){Au(e,e.return,g)}break;case 4:default:wl(t,e),Sl(e);break;case 13:wl(t,e),Sl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Wl=Xe())),4&r&&bl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(tl=(c=tl)||h,wl(t,e),tl=c):wl(t,e),Sl(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!h&&0!==(1&e.mode))for(rl=e,h=e.child;null!==h;){for(d=rl=h;null!==rl;){switch(p=(f=rl).child,f.tag){case 0:case 11:case 14:case 15:al(4,f,f.return);break;case 1:il(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Au(r,n,g)}}break;case 5:il(f,f.return);break;case 22:if(null!==f.memoizedState){Il(d);continue}}null!==p?(p.return=f,rl=p):Il(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,c?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,a=void 0!==(u=d.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=me("display",a))}catch(g){Au(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(g){Au(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:wl(t,e),Sl(e),4&r&&bl(e);case 21:}}function Sl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(hl(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),pl(e,dl(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;fl(e,dl(e),o);break;default:throw Error(s(161))}}catch(ni){Au(e,e.return,ni)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function _l(e,t,n){rl=e,Tl(e,t,n)}function Tl(e,t,n){for(var r=0!==(1&e.mode);null!==rl;){var i=rl,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||el;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||tl;a=el;var u=tl;if(el=o,(tl=l)&&!u)for(rl=i;null!==rl;)l=(o=rl).child,22===o.tag&&null!==o.memoizedState?Cl(i):null!==l?(l.return=o,rl=l):Cl(i);for(;null!==s;)rl=s,Tl(s,t,n),s=s.sibling;rl=i,el=a,tl=u}xl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,rl=s):xl(e)}}function xl(e){for(;null!==rl;){var t=rl;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:tl||ll(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!tl)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:aa(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Gs(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Gs(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Bt(d)}}}break;default:throw Error(s(163))}tl||512&t.flags&&ul(t)}catch(mi){Au(t,t.return,mi)}}if(t===e){rl=null;break}if(null!==(n=t.sibling)){n.return=t.return,rl=n;break}rl=t.return}}function Il(e){for(;null!==rl;){var t=rl;if(t===e){rl=null;break}var n=t.sibling;if(null!==n){n.return=t.return,rl=n;break}rl=t.return}}function Cl(e){for(;null!==rl;){var t=rl;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ll(4,t)}catch(ni){Au(t,n,ni)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(ni){Au(t,i,ni)}}var s=t.return;try{ul(t)}catch(ni){Au(t,s,ni)}break;case 5:var o=t.return;try{ul(t)}catch(ni){Au(t,o,ni)}}}catch(ni){Au(t,t.return,ni)}if(t===e){rl=null;break}var a=t.sibling;if(null!==a){a.return=t.return,rl=a;break}rl=t.return}}var Nl,Al=Math.ceil,Dl=w.ReactCurrentDispatcher,Rl=w.ReactCurrentOwner,Pl=w.ReactCurrentBatchConfig,Ol=0,Ll=null,Ml=null,Fl=0,jl=0,Ul=Ci(0),Vl=0,zl=null,Bl=0,$l=0,ql=0,Hl=null,Kl=null,Wl=0,Gl=1/0,Ql=null,Yl=!1,Xl=null,Jl=null,Zl=!1,eu=null,tu=0,nu=0,ru=null,iu=-1,su=0;function ou(){return 0!==(6&Ol)?Xe():-1!==iu?iu:iu=Xe()}function au(e){return 0===(1&e.mode)?1:0!==(2&Ol)&&0!==Fl?Fl&-Fl:null!==bs.transition?(0===su&&(su=mt()),su):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function lu(e,t,n,r){if(50<nu)throw nu=0,ru=null,Error(s(185));yt(e,n,r),0!==(2&Ol)&&e===Ll||(e===Ll&&(0===(2&Ol)&&($l|=n),4===Vl&&fu(e,Fl)),uu(e,r),1===n&&0===Ol&&0===(1&t.mode)&&(Gl=Xe()+500,$i&&Ki()))}function uu(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=ft(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=dt(e,e===Ll?Fl:0);if(0===r)null!==n&&Ge(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ge(n),1===t)0===e.tag?function(e){$i=!0,Hi(e)}(pu.bind(null,e)):Hi(pu.bind(null,e)),li(function(){0===(6&Ol)&&Ki()}),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Lu(n,cu.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function cu(e,t){if(iu=-1,su=0,0!==(6&Ol))throw Error(s(327));var n=e.callbackNode;if(Cu()&&e.callbackNode!==n)return null;var r=dt(e,e===Ll?Fl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=Su(e,r);else{t=r;var i=Ol;Ol|=2;var o=wu();for(Ll===e&&Fl===t||(Ql=null,Gl=Xe()+500,vu(e,t));;)try{_u();break}catch(l){bu(e,l)}As(),Dl.current=o,Ol=i,null!==Ml?t=0:(Ll=null,Fl=0,t=Vl)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=hu(e,i))),1===t)throw n=zl,vu(e,0),fu(e,r),uu(e,Xe()),n;if(6===t)fu(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=Su(e,r))&&(0!==(o=pt(e))&&(r=o,t=hu(e,o))),1===t))throw n=zl,vu(e,0),fu(e,r),uu(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:Iu(e,Kl,Ql);break;case 3:if(fu(e,r),(130023424&r)===r&&10<(t=Wl+500-Xe())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ou(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ii(Iu.bind(null,e,Kl,Ql),t);break}Iu(e,Kl,Ql);break;case 4:if(fu(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Al(r/1960))-r)){e.timeoutHandle=ii(Iu.bind(null,e,Kl,Ql),r);break}Iu(e,Kl,Ql);break;default:throw Error(s(329))}}}return uu(e,Xe()),e.callbackNode===n?cu.bind(null,e):null}function hu(e,t){var n=Hl;return e.current.memoizedState.isDehydrated&&(vu(e,t).flags|=256),2!==(e=Su(e,t))&&(t=Kl,Kl=n,null!==t&&du(t)),e}function du(e){null===Kl?Kl=e:Kl.push.apply(Kl,e)}function fu(e,t){for(t&=~ql,t&=~$l,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function pu(e){if(0!==(6&Ol))throw Error(s(327));Cu();var t=dt(e,0);if(0===(1&t))return uu(e,Xe()),null;var n=Su(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=hu(e,r))}if(1===n)throw n=zl,vu(e,0),fu(e,t),uu(e,Xe()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Iu(e,Kl,Ql),uu(e,Xe()),null}function mu(e,t){var n=Ol;Ol|=1;try{return e(t)}finally{0===(Ol=n)&&(Gl=Xe()+500,$i&&Ki())}}function gu(e){null!==eu&&0===eu.tag&&0===(6&Ol)&&Cu();var t=Ol;Ol|=1;var n=Pl.transition,r=bt;try{if(Pl.transition=null,bt=1,e)return e()}finally{bt=r,Pl.transition=n,0===(6&(Ol=t))&&Ki()}}function yu(){jl=Ul.current,Ni(Ul)}function vu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,si(n)),null!==Ml)for(n=Ml.return;null!==n;){var r=n;switch(ss(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Fi();break;case 3:to(),Ni(Pi),Ni(Ri),ao();break;case 5:ro(r);break;case 4:to();break;case 13:case 19:Ni(io);break;case 10:Ds(r.type._context);break;case 22:case 23:yu()}n=n.return}if(Ll=e,Ml=e=Uu(e.current,null),Fl=jl=t,Vl=0,zl=null,ql=$l=Bl=0,Kl=Hl=null,null!==Ls){for(t=0;t<Ls.length;t++)if(null!==(r=(n=Ls[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}Ls=null}return e}function bu(e,t){for(;;){var n=Ml;try{if(As(),lo.current=ra,mo){for(var r=ho.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}mo=!1}if(co=0,po=fo=ho=null,go=!1,yo=0,Rl.current=null,null===n||null===n.return){Vl=1,zl=t,Ml=null;break}e:{var o=e,a=n.return,l=n,u=t;if(t=Fl,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=Ea(a);if(null!==p){p.flags&=-257,Sa(p,a,l,0,t),1&p.mode&&wa(o,c,t),u=c;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(u),t.updateQueue=g}else m.add(u);break e}if(0===(1&t)){wa(o,c,t),Eu();break e}u=Error(s(426))}else if(ls&&1&l.mode){var y=Ea(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),Sa(y,a,l,0,t),vs(pa(u,l));break e}}o=u=pa(u,l),4!==Vl&&(Vl=2),null===Hl?Hl=[o]:Hl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ks(o,va(0,u,t));break e;case 1:l=u;var v=o.type,b=o.stateNode;if(0===(128&o.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Jl||!Jl.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t,Ks(o,ba(o,l,t));break e}}o=o.return}while(null!==o)}xu(n)}catch(bi){t=bi,Ml===n&&null!==n&&(Ml=n=n.return);continue}break}}function wu(){var e=Dl.current;return Dl.current=ra,null===e?ra:e}function Eu(){0!==Vl&&3!==Vl&&2!==Vl||(Vl=4),null===Ll||0===(268435455&Bl)&&0===(268435455&$l)||fu(Ll,Fl)}function Su(e,t){var n=Ol;Ol|=2;var r=wu();for(Ll===e&&Fl===t||(Ql=null,vu(e,t));;)try{ku();break}catch(i){bu(e,i)}if(As(),Ol=n,Dl.current=r,null!==Ml)throw Error(s(261));return Ll=null,Fl=0,Vl}function ku(){for(;null!==Ml;)Tu(Ml)}function _u(){for(;null!==Ml&&!Qe();)Tu(Ml)}function Tu(e){var t=Nl(e.alternate,e,jl);e.memoizedProps=e.pendingProps,null===t?xu(e):Ml=t,Rl.current=null}function xu(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ja(n,t,jl)))return void(Ml=n)}else{if(null!==(n=Za(n,t)))return n.flags&=32767,void(Ml=n);if(null===e)return Vl=6,void(Ml=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ml=t);Ml=t=e}while(null!==t);0===Vl&&(Vl=5)}function Iu(e,t,n){var r=bt,i=Pl.transition;try{Pl.transition=null,bt=1,function(e,t,n,r){do{Cu()}while(null!==eu);if(0!==(6&Ol))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Ll&&(Ml=Ll=null,Fl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Zl||(Zl=!0,Lu(tt,function(){return Cu(),null})),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Pl.transition,Pl.transition=null;var a=bt;bt=1;var l=Ol;Ol|=4,Rl.current=null,function(e,t){if(ei=qt,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(Bs){n=null;break e}var a=0,l=-1,u=-1,c=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==o||0!==r&&3!==d.nodeType||(u=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++c===i&&(l=a),f===o&&++h===r&&(u=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},qt=!1,rl=t;null!==rl;)if(e=(t=rl).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,rl=e;else for(;null!==rl;){t=rl;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:aa(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(s(163))}}catch(Bs){Au(t,t.return,Bs)}if(null!==(e=t.sibling)){e.return=t.return,rl=e;break}rl=t.return}m=ol,ol=!1}(e,n),El(n,e),pr(ti),qt=!!ei,ti=ei=null,e.current=n,_l(n,e,i),Ye(),Ol=l,bt=a,Pl.transition=o}else e.current=n;if(Zl&&(Zl=!1,eu=e,tu=i),o=e.pendingLanes,0===o&&(Jl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),uu(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Yl)throw Yl=!1,e=Xl,Xl=null,e;0!==(1&tu)&&0!==e.tag&&Cu(),o=e.pendingLanes,0!==(1&o)?e===ru?nu++:(nu=0,ru=e):nu=0,Ki()}(e,t,n,r)}finally{Pl.transition=i,bt=r}return null}function Cu(){if(null!==eu){var e=wt(tu),t=Pl.transition,n=bt;try{if(Pl.transition=null,bt=16>e?16:e,null===eu)var r=!1;else{if(e=eu,eu=null,tu=0,0!==(6&Ol))throw Error(s(331));var i=Ol;for(Ol|=4,rl=e.current;null!==rl;){var o=rl,a=o.child;if(0!==(16&rl.flags)){var l=o.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(rl=c;null!==rl;){var h=rl;switch(h.tag){case 0:case 11:case 15:al(8,h,o)}var d=h.child;if(null!==d)d.return=h,rl=d;else for(;null!==rl;){var f=(h=rl).sibling,p=h.return;if(cl(h),h===c){rl=null;break}if(null!==f){f.return=p,rl=f;break}rl=p}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}rl=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,rl=a;else e:for(;null!==rl;){if(0!==(2048&(o=rl).flags))switch(o.tag){case 0:case 11:case 15:al(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,rl=v;break e}rl=o.return}}var b=e.current;for(rl=b;null!==rl;){var w=(a=rl).child;if(0!==(2064&a.subtreeFlags)&&null!==w)w.return=a,rl=w;else e:for(a=b;null!==rl;){if(0!==(2048&(l=rl).flags))try{switch(l.tag){case 0:case 11:case 15:ll(9,l)}}catch(bi){Au(l,l.return,bi)}if(l===a){rl=null;break e}var E=l.sibling;if(null!==E){E.return=l.return,rl=E;break e}rl=l.return}}if(Ol=i,Ki(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(bi){}r=!0}return r}finally{bt=n,Pl.transition=t}}return!1}function Nu(e,t,n){e=qs(e,t=va(0,t=pa(n,t),1),1),t=ou(),null!==e&&(yt(e,1,t),uu(e,t))}function Au(e,t,n){if(3===e.tag)Nu(e,e,n);else for(;null!==t;){if(3===t.tag){Nu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Jl||!Jl.has(r))){t=qs(t,e=ba(t,e=pa(n,e),1),1),e=ou(),null!==t&&(yt(t,1,e),uu(t,e));break}}t=t.return}}function Du(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ou(),e.pingedLanes|=e.suspendedLanes&n,Ll===e&&(Fl&n)===n&&(4===Vl||3===Vl&&(130023424&Fl)===Fl&&500>Xe()-Wl?vu(e,0):ql|=n),uu(e,t)}function Ru(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=ou();null!==(e=js(e,t))&&(yt(e,t,n),uu(e,n))}function Pu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ru(e,n)}function Ou(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Ru(e,n)}function Lu(e,t){return We(e,t)}function Mu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fu(e,t,n,r){return new Mu(e,t,n,r)}function ju(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Uu(e,t){var n=e.alternate;return null===n?((n=Fu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Vu(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)ju(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case k:return zu(n.children,i,o,t);case _:a=8,i|=8;break;case T:return(e=Fu(12,n,t,2|i)).elementType=T,e.lanes=o,e;case N:return(e=Fu(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=Fu(19,n,t,i)).elementType=A,e.lanes=o,e;case P:return Bu(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case x:a=10;break e;case I:a=9;break e;case C:a=11;break e;case D:a=14;break e;case R:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Fu(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function zu(e,t,n,r){return(e=Fu(7,e,r,t)).lanes=n,e}function Bu(e,t,n,r){return(e=Fu(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function $u(e,t,n){return(e=Fu(6,e,null,t)).lanes=n,e}function qu(e,t,n){return(t=Fu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Hu(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Ku(e,t,n,r,i,s,o,a,l){return e=new Hu(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Fu(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Vs(s),e}function Wu(e){if(!e)return Di;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Mi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Mi(n))return Ui(e,n,t)}return t}function Gu(e,t,n,r,i,s,o,a,l){return(e=Ku(n,r,!0,e,0,s,0,a,l)).context=Wu(null),n=e.current,(s=$s(r=ou(),i=au(n))).callback=void 0!==t&&null!==t?t:null,qs(n,s,i),e.current.lanes=i,yt(e,i,r),uu(e,r),e}function Qu(e,t,n,r){var i=t.current,s=ou(),o=au(i);return n=Wu(n),null===t.context?t.context=n:t.pendingContext=n,(t=$s(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=qs(i,t,o))&&(lu(e,i,o,s),Hs(e,i,o)),o}function Yu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Xu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Ju(e,t){Xu(e,t),(e=e.alternate)&&Xu(e,t)}Nl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Pi.current)_a=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return _a=!1,function(e,t,n){switch(t.tag){case 3:Oa(t),ys();break;case 5:no(t);break;case 1:Mi(t.type)&&Vi(t);break;case 4:eo(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ai(xs,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ai(io,1&io.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ba(e,t,n):(Ai(io,1&io.current),null!==(e=Qa(e,t,n))?e.sibling:null);Ai(io,1&io.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Wa(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ai(io,io.current),r)break;return null;case 22:case 23:return t.lanes=0,Na(e,t,n)}return Qa(e,t,n)}(e,t,n);_a=0!==(131072&e.flags)}else _a=!1,ls&&0!==(1048576&t.flags)&&rs(t,Yi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ga(e,t),e=t.pendingProps;var i=Li(t,Ri.current);Ps(t,n),i=Eo(null,t,r,e,i,n);var o=So();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Mi(r)?(o=!0,Vi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Vs(t),i.updater=ua,t.stateNode=i,i._reactInternals=t,fa(t,r,e,n),t=Pa(null,t,r,!0,o,n)):(t.tag=0,ls&&o&&is(t),Ta(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ga(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return ju(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===D)return 14}return 2}(r),e=aa(r,e),i){case 0:t=Da(null,t,r,e,n);break e;case 1:t=Ra(null,t,r,e,n);break e;case 11:t=xa(null,t,r,e,n);break e;case 14:t=Ia(null,t,r,aa(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Da(e,t,r,i=t.elementType===r?i:aa(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ra(e,t,r,i=t.elementType===r?i:aa(r,i),n);case 3:e:{if(Oa(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,zs(e,t),Ws(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=La(e,t,r,n,i=pa(Error(s(423)),t));break e}if(r!==i){t=La(e,t,r,n,i=pa(Error(s(424)),t));break e}for(as=hi(t.stateNode.containerInfo.firstChild),os=t,ls=!0,us=null,n=Ts(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ys(),r===i){t=Qa(e,t,n);break e}Ta(e,t,r,n)}t=t.child}return t;case 5:return no(t),null===e&&fs(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ri(r,i)?a=null:null!==o&&ri(r,o)&&(t.flags|=32),Aa(e,t),Ta(e,t,a,n),t.child;case 6:return null===e&&fs(t),null;case 13:return Ba(e,t,n);case 4:return eo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=_s(t,null,r,n):Ta(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xa(e,t,r,i=t.elementType===r?i:aa(r,i),n);case 7:return Ta(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ta(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,Ai(xs,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!Pi.current){t=Qa(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===o.tag){(u=$s(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}o.lanes|=n,null!==(u=o.alternate)&&(u.lanes|=n),Rs(o.return,n,t),l.lanes|=n;break}u=u.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Rs(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}Ta(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ps(t,n),r=r(i=Os(i)),t.flags|=1,Ta(e,t,r,n),t.child;case 14:return i=aa(r=t.type,t.pendingProps),Ia(e,t,r,i=aa(r.type,i),n);case 15:return Ca(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:aa(r,i),Ga(e,t),t.tag=1,Mi(r)?(e=!0,Vi(t)):e=!1,Ps(t,n),ha(t,r,i),fa(t,r,i,n),Pa(null,t,r,!0,e,n);case 19:return Wa(e,t,n);case 22:return Na(e,t,n)}throw Error(s(156,t.tag))};var Zu="function"===typeof reportError?reportError:function(e){console.error(e)};function ec(e){this._internalRoot=e}function tc(e){this._internalRoot=e}function nc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function rc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function ic(){}function sc(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=Yu(o);a.call(e)}}Qu(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Yu(o);s.call(e)}}var o=Gu(t,r,e,0,null,!1,0,"",ic);return e._reactRootContainer=o,e[yi]=o.current,Br(8===e.nodeType?e.parentNode:e),gu(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Yu(l);a.call(e)}}var l=Ku(e,0,!1,null,0,!1,0,"",ic);return e._reactRootContainer=l,e[yi]=l.current,Br(8===e.nodeType?e.parentNode:e),gu(function(){Qu(t,l,n,r)}),l}(n,t,e,i,r);return Yu(o)}tc.prototype.render=ec.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Qu(e,t,null,null)},tc.prototype.unmount=ec.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;gu(function(){Qu(null,e,null,null)}),t[yi]=null}},tc.prototype.unstable_scheduleHydration=function(e){if(e){var t=_t();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Ft(e)}},Et=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(vt(t,1|n),uu(t,Xe()),0===(6&Ol)&&(Gl=Xe()+500,Ki()))}break;case 13:gu(function(){var t=js(e,1);if(null!==t){var n=ou();lu(t,e,1,n)}}),Ju(e,1)}},St=function(e){if(13===e.tag){var t=js(e,134217728);if(null!==t)lu(t,e,134217728,ou());Ju(e,134217728)}},kt=function(e){if(13===e.tag){var t=au(e),n=js(e,t);if(null!==n)lu(n,e,t,ou());Ju(e,t)}},_t=function(){return bt},Tt=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},Se=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Ti(r);if(!i)throw Error(s(90));W(r),J(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=mu,Ne=gu;var oc={usingClientEntryPoint:!1,Events:[ki,_i,Ti,xe,Ie,mu]},ac={findFiberByHostInstance:Si,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lc={bundleType:ac.bundleType,version:ac.version,rendererPackageName:ac.rendererPackageName,rendererConfig:ac.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:ac.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var uc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uc.isDisabled&&uc.supportsFiber)try{it=uc.inject(lc),st=uc}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!nc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!nc(e))throw Error(s(299));var n=!1,r="",i=Zu;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Ku(e,1,!1,null,0,n,0,r,i),e[yi]=t.current,Br(8===e.nodeType?e.parentNode:e),new ec(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return gu(e)},t.hydrate=function(e,t,n){if(!rc(t))throw Error(s(200));return sc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!nc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Zu;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Gu(t,null,e,1,null!=n?n:null,i,0,o,a),e[yi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new tc(t)},t.render=function(e,t,n){if(!rc(t))throw Error(s(200));return sc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!rc(e))throw Error(s(40));return!!e._reactRootContainer&&(gu(function(){sc(null,null,e,!1,function(){e._reactRootContainer=null,e[yi]=null})}),!0)},t.unstable_batchedUpdates=mu,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!rc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return sc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}();var r=n(43),i=n(391);const s=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},o={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,u=t>>2,c=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),r.push(n[u],n[c],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(s(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const l=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==l)throw new a;const u=t<<2|s>>4;if(r.push(u),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==l){const e=o<<6&192|l;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class a extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const l=function(e){return function(e){const t=s(e);return o.encodeByteArray(t,!0)}(e).replace(/\./g,"")},u=function(e){try{return o.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};const c=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,h=()=>{try{return c()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&u(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},d=e=>{var t,n;return null===(n=null===(t=h())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},f=()=>{var e;return null===(e=h())||void 0===e?void 0:e.config},p=e=>{var t;return null===(t=h())||void 0===t?void 0:t[`_${e}`]};class m{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function g(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function y(){try{return"object"===typeof indexedDB}catch(e){return!1}}class v extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,v.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,b.prototype.create)}}class b{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${e}`,r=this.errors[e],i=r?function(e,t){return e.replace(w,(e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`})}(r,t):"Error",s=`${this.serviceName}: ${i} (${n}).`;return new v(n,s,t)}}const w=/\{\$([^}]+)}/g;function E(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(S(n)&&S(s)){if(!E(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function S(e){return null!==e&&"object"===typeof e}function k(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function _(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function T(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class x{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=I),void 0===r.error&&(r.error=I),void 0===r.complete&&(r.complete=I);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function I(){}function C(e){return e&&e._delegate?e._delegate:e}class N{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const A="[DEFAULT]";class D{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new m;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:A})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===A?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A;return this.component?this.component.multipleInstances?e:A:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class R{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new D(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const P=[];var O;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(O||(O={}));const L={debug:O.DEBUG,verbose:O.VERBOSE,info:O.INFO,warn:O.WARN,error:O.ERROR,silent:O.SILENT},M=O.INFO,F={[O.DEBUG]:"log",[O.VERBOSE]:"log",[O.INFO]:"info",[O.WARN]:"warn",[O.ERROR]:"error"},j=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=F[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r](`[${n}]  ${e.name}:`,...s)};class U{constructor(e){this.name=e,this._logLevel=M,this._logHandler=j,this._userLogHandler=null,P.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in O))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?L[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,O.DEBUG,...t),this._logHandler(this,O.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,O.VERBOSE,...t),this._logHandler(this,O.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,O.INFO,...t),this._logHandler(this,O.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,O.WARN,...t),this._logHandler(this,O.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,O.ERROR,...t),this._logHandler(this,O.ERROR,...t)}}let V,z;const B=new WeakMap,$=new WeakMap,q=new WeakMap,H=new WeakMap,K=new WeakMap;let W={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return $.get(e);if("objectStoreNames"===t)return e.objectStoreNames||q.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Y(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function G(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(z||(z=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(X(this),n),Y(B.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Y(e.apply(X(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(X(this),t,...r);return q.set(s,t.sort?t.sort():[t]),Y(s)}}function Q(e){return"function"===typeof e?G(e):(e instanceof IDBTransaction&&function(e){if($.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});$.set(e,t)}(e),t=e,(V||(V=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,W):e);var t}function Y(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(Y(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&B.set(t,e)}).catch(()=>{}),K.set(t,e),t}(e);if(H.has(e))return H.get(e);const t=Q(e);return t!==e&&(H.set(e,t),K.set(t,e)),t}const X=e=>K.get(e);const J=["get","getKey","getAll","getAllKeys","count"],Z=["put","add","delete","clear"],ee=new Map;function te(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(ee.get(t))return ee.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Z.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!J.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return ee.set(t,s),s}W=(e=>({...e,get:(t,n,r)=>te(t,n)||e.get(t,n,r),has:(t,n)=>!!te(t,n)||e.has(t,n)}))(W);class ne{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const re="@firebase/app",ie="0.9.13",se=new U("@firebase/app"),oe="@firebase/app-compat",ae="@firebase/analytics-compat",le="@firebase/analytics",ue="@firebase/app-check-compat",ce="@firebase/app-check",he="@firebase/auth",de="@firebase/auth-compat",fe="@firebase/database",pe="@firebase/database-compat",me="@firebase/functions",ge="@firebase/functions-compat",ye="@firebase/installations",ve="@firebase/installations-compat",be="@firebase/messaging",we="@firebase/messaging-compat",Ee="@firebase/performance",Se="@firebase/performance-compat",ke="@firebase/remote-config",_e="@firebase/remote-config-compat",Te="@firebase/storage",xe="@firebase/storage-compat",Ie="@firebase/firestore",Ce="@firebase/firestore-compat",Ne="firebase",Ae="[DEFAULT]",De={[re]:"fire-core",[oe]:"fire-core-compat",[le]:"fire-analytics",[ae]:"fire-analytics-compat",[ce]:"fire-app-check",[ue]:"fire-app-check-compat",[he]:"fire-auth",[de]:"fire-auth-compat",[fe]:"fire-rtdb",[pe]:"fire-rtdb-compat",[me]:"fire-fn",[ge]:"fire-fn-compat",[ye]:"fire-iid",[ve]:"fire-iid-compat",[be]:"fire-fcm",[we]:"fire-fcm-compat",[Ee]:"fire-perf",[Se]:"fire-perf-compat",[ke]:"fire-rc",[_e]:"fire-rc-compat",[Te]:"fire-gcs",[xe]:"fire-gcs-compat",[Ie]:"fire-fst",[Ce]:"fire-fst-compat","fire-js":"fire-js",[Ne]:"fire-js-all"},Re=new Map,Pe=new Map;function Oe(e,t){try{e.container.addComponent(t)}catch(n){se.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Le(e){const t=e.name;if(Pe.has(t))return se.debug(`There were multiple attempts to register component ${t}.`),!1;Pe.set(t,e);for(const n of Re.values())Oe(n,e);return!0}function Me(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const Fe=new b("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class je{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new N("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fe.create("app-deleted",{appName:this._name})}}const Ue="9.23.0";function Ve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Ae,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Fe.create("bad-app-name",{appName:String(i)});if(n||(n=f()),!n)throw Fe.create("no-options");const s=Re.get(i);if(s){if(E(n,s.options)&&E(r,s.config))return s;throw Fe.create("duplicate-app",{appName:i})}const o=new R(i);for(const l of Pe.values())o.addComponent(l);const a=new je(n,r,o);return Re.set(i,a),a}function ze(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae;const t=Re.get(e);if(!t&&e===Ae&&f())return Ve();if(!t)throw Fe.create("no-app",{appName:e});return t}function Be(e,t,n){var r;let i=null!==(r=De[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=[`Unable to register library "${i}" with version "${t}":`];return s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void se.warn(e.join(" "))}Le(new N(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}const $e="firebase-heartbeat-store";let qe=null;function He(){return qe||(qe=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=Y(o);return r&&o.addEventListener("upgradeneeded",e=>{r(Y(o.result),e.oldVersion,e.newVersion,Y(o.transaction),e)}),n&&o.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore($e)}}).catch(e=>{throw Fe.create("idb-open",{originalErrorMessage:e.message})})),qe}async function Ke(e,t){try{const n=(await He()).transaction($e,"readwrite"),r=n.objectStore($e);await r.put(t,We(e)),await n.done}catch(n){if(n instanceof v)se.warn(n.message);else{const e=Fe.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});se.warn(e.message)}}}function We(e){return`${e.name}!${e.options.appId}`}class Ge{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Ye(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=Qe();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some(e=>e.date===t))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=Qe(),{heartbeatsToSend:t,unsentEntries:n}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),Xe(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Xe(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=l(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function Qe(){return(new Date).toISOString().substring(0,10)}class Ye{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!y()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=await He();return await t.transaction($e).objectStore($e).get(We(e))}catch(t){if(t instanceof v)se.warn(t.message);else{const e=Fe.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});se.warn(e.message)}}}(this.app);return e||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Ke(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Ke(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Xe(e){return l(JSON.stringify({version:2,heartbeats:e})).length}var Je;Je="",Le(new N("platform-logger",e=>new ne(e),"PRIVATE")),Le(new N("heartbeat",e=>new Ge(e),"PRIVATE")),Be(re,ie,Je),Be(re,ie,"esm2017"),Be("fire-js","");Be("firebase","9.23.0","app");function Ze(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function et(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const tt=et,nt=new b("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),rt=new U("@firebase/auth");function it(e){if(rt.logLevel<=O.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];rt.error(`Auth (${Ue}): ${e}`,...n)}}function st(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw ut(e,...n)}function ot(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ut(e,...n)}function at(e,t,n){const r=Object.assign(Object.assign({},tt()),{[t]:n});return new b("auth","Firebase",r).create(t,{appName:e.name})}function lt(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&st(e,"argument-error"),at(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ut(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return nt.create(e,...n)}function ct(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw ut(t,...r)}}function ht(e){const t="INTERNAL ASSERTION FAILED: "+e;throw it(t),new Error(t)}function dt(e,t){e||ht(t)}function ft(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function pt(){return"http:"===mt()||"https:"===mt()}function mt(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function gt(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(pt()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class yt{constructor(e,t){this.shortDelay=e,this.longDelay=t,dt(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(g())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return gt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function vt(e,t){dt(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class bt{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void ht("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void ht("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void ht("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const wt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Et=new yt(3e4,6e4);function St(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function kt(e,t,n,r){return _t(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=k(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),bt.fetch()(xt(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))})}async function _t(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},wt),t);try{const t=new It(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw Ct(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Ct(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw Ct(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw Ct(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw at(e,a,o);st(e,a)}}catch(i){if(i instanceof v)throw i;st(e,"network-request-failed",{message:String(i)})}}async function Tt(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await kt(e,t,n,r,i);return"mfaPendingCredential"in s&&st(e,"multi-factor-auth-required",{_serverResponse:s}),s}function xt(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?vt(e.config,i):`${e.config.apiScheme}://${i}`}class It{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(ot(this.auth,"network-request-failed")),Et.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ct(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=ot(e,t,r);return i.customData._tokenResponse=n,i}function Nt(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function At(e){return 1e3*Number(e)}function Dt(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return it("JWT malformed, contained fewer than 3 sections"),null;try{const e=u(n);return e?JSON.parse(e):(it("Failed to decode base64 JWT payload"),null)}catch(i){return it("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}async function Rt(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof v&&function(e){let{code:t}=e;return"auth/user-disabled"===t||"auth/user-token-expired"===t}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class Pt{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===(null===e||void 0===e?void 0:e.code)&&this.schedule(!0))}this.schedule()}}class Ot{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Nt(this.lastLoginAt),this.creationTime=Nt(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Lt(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Rt(e,async function(e,t){return kt(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));ct(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map(e=>{var{providerId:t}=e,n=Ze(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}):[];const a=(l=e.providerData,u=o,[...l.filter(e=>!u.some(t=>t.providerId===e.providerId)),...u]);var l,u;const c=e.isAnonymous,h=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),d=!!c&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Ot(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}class Mt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ct(e.idToken,"internal-error"),ct("undefined"!==typeof e.idToken,"internal-error"),ct("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){const t=Dt(e);return ct(t,"internal-error"),ct("undefined"!==typeof t.exp,"internal-error"),ct("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return ct(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await _t(e,{},async()=>{const n=k({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=xt(e,r,"/v1/token",`key=${i}`),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",bt.fetch()(s,{method:"POST",headers:o,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Mt;return n&&(ct("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(ct("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(ct("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Mt,this.toJSON())}_performRefresh(){return ht("not implemented")}}function Ft(e,t){ct("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class jt{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=Ze(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Pt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Ot(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Rt(this,this.stsTokenManager.getToken(this.auth,e));return ct(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=C(e),r=await n.getIdToken(t),i=Dt(r);ct(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Nt(At(i.auth_time)),issuedAtTime:Nt(At(i.iat)),expirationTime:Nt(At(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=C(e);await Lt(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(ct(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new jt(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ct(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Lt(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Rt(this,async function(e,t){return kt(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,u;const c=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:v,emailVerified:b,isAnonymous:w,providerData:E,stsTokenManager:S}=t;ct(v&&S,e,"internal-error");const k=Mt.fromJSON(this.name,S);ct("string"===typeof v,e,"internal-error"),Ft(c,e.name),Ft(h,e.name),ct("boolean"===typeof b,e,"internal-error"),ct("boolean"===typeof w,e,"internal-error"),Ft(d,e.name),Ft(f,e.name),Ft(p,e.name),Ft(m,e.name),Ft(g,e.name),Ft(y,e.name);const _=new jt({uid:v,auth:e,email:h,emailVerified:b,displayName:c,isAnonymous:w,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:k,createdAt:g,lastLoginAt:y});return E&&Array.isArray(E)&&(_.providerData=E.map(e=>Object.assign({},e))),m&&(_._redirectEventId=m),_}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Mt;r.updateFromServerResponse(t);const i=new jt({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Lt(i),i}}const Ut=new Map;function Vt(e){dt(e instanceof Function,"Expected a class definition");let t=Ut.get(e);return t?(dt(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Ut.set(e,t),t)}class zt{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}zt.type="NONE";const Bt=zt;function $t(e,t,n){return`firebase:${e}:${t}:${n}`}class qt{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=$t(this.userKey,r.apiKey,i),this.fullPersistenceKey=$t("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?jt._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new qt(Vt(Bt),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||Vt(Bt);const s=$t(n,e.config.apiKey,e.name);let o=null;for(const u of t)try{const t=await u._get(s);if(t){const n=jt._fromJSON(e,t);u!==i&&(o=n),i=u;break}}catch(l){}const a=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(s)}catch(l){}})),new qt(i,e,n)):new qt(i,e,n)}}function Ht(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Qt(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Kt(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Xt(t))return"Blackberry";if(Jt(t))return"Webos";if(Wt(t))return"Safari";if((t.includes("chrome/")||Gt(t))&&!t.includes("edge/"))return"Chrome";if(Yt(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Kt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g();return/firefox\//i.test(e)}function Wt(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:g()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Gt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g();return/crios\//i.test(e)}function Qt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g();return/iemobile/i.test(e)}function Yt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g();return/android/i.test(e)}function Xt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g();return/blackberry/i.test(e)}function Jt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g();return/webos/i.test(e)}function Zt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function en(){return function(){const e=g();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function tn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g();return Zt(e)||Yt(e)||Jt(e)||Xt(e)||/windows phone/i.test(e)||Qt(e)}function nn(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Ht(g());break;case"Worker":t=`${Ht(g())}-${e}`;break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ue}/${r}`}async function rn(e,t){return kt(e,"GET","/v2/recaptchaConfig",St(e,t))}function sn(e){return void 0!==e&&void 0!==e.enterprise}class on{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(e=>"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState)}}function an(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=ot("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})}function ln(e){return`__${e}${Math.floor(1e6*Math.random())}`}class un{constructor(e){this.type="recaptcha-enterprise",this.auth=fn(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;sn(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n("NO_RECAPTCHA")})}):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{rn(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new on(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&sn(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));an("https://www.google.com/recaptcha/enterprise.js?render="+i).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function cn(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new un(e);let s;try{s=await i.verify(n)}catch(a){s=await i.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}class hn{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(i){r(i)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class dn{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new pn(this),this.idTokenSubscription=new pn(this),this.beforeStateQueue=new hn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=nt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Vt(t)),this._initializationPromise=this.queue(async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await qt.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ct(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Lt(e)}catch(t){if("auth/network-request-failed"!==(null===t||void 0===t?void 0:t.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?C(e):null;return t&&ct(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&ct(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Vt(e))})}async initializeRecaptchaConfig(){const e=await rn(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),t=new on(e);if(null==this.tenantId?this._agentRecaptchaConfig=t:this._tenantRecaptchaConfigs[this.tenantId]=t,t.emailPasswordEnabled){new un(this).verify()}}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new b("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Vt(e)||this._popupRedirectResolver;ct(t,this,"argument-error"),this.redirectPersistenceManager=await qt.create(this,[Vt(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return ct(s,this,"internal-error"),s.then(()=>i(this.currentUser)),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ct(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=nn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(rt.logLevel<=O.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];rt.warn(`Auth (${Ue}): ${e}`,...n)}}(`Error while retrieving App Check token: ${t.error}`),null===t||void 0===t?void 0:t.token}}function fn(e){return C(e)}class pn{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new x(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return ct(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function mn(e,t,n){const r=fn(e);ct(r._canInitEmulator,r,"emulator-config-failed"),ct(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=gn(t),{host:o,port:a}=function(e){const t=gn(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:yn(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:yn(t)}}}(t),l=null===a?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function gn(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function yn(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class vn{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ht("not implemented")}_getIdTokenResponse(e){return ht("not implemented")}_linkToIdToken(e,t){return ht("not implemented")}_getReauthenticationResolver(e){return ht("not implemented")}}async function bn(e,t){return kt(e,"POST","/v1/accounts:update",t)}async function wn(e,t){return Tt(e,"POST","/v1/accounts:signInWithPassword",St(e,t))}class En extends vn{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new En(e,t,"password")}static _fromEmailAndCode(e,t){return new En(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){var t;switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(null===(t=e._getRecaptchaConfig())||void 0===t?void 0:t.emailPasswordEnabled){const t=await cn(e,n,"signInWithPassword");return wn(e,t)}return wn(e,n).catch(async t=>{if("auth/missing-recaptcha-token"===t.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const t=await cn(e,n,"signInWithPassword");return wn(e,t)}return Promise.reject(t)});case"emailLink":return async function(e,t){return Tt(e,"POST","/v1/accounts:signInWithEmailLink",St(e,t))}(e,{email:this._email,oobCode:this._password});default:st(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return bn(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return Tt(e,"POST","/v1/accounts:signInWithEmailLink",St(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:st(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Sn(e,t){return Tt(e,"POST","/v1/accounts:signInWithIdp",St(e,t))}class kn extends vn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new kn(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):st("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=Ze(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new kn(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return Sn(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Sn(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Sn(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=k(t)}return e}}const _n={USER_NOT_FOUND:"user-not-found"};class Tn extends vn{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Tn({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Tn({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Tt(e,"POST","/v1/accounts:signInWithPhoneNumber",St(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Tt(e,"POST","/v1/accounts:signInWithPhoneNumber",St(e,t));if(n.temporaryProof)throw Ct(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Tt(e,"POST","/v1/accounts:signInWithPhoneNumber",St(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),_n)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Tn({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class xn{constructor(e){var t,n,r,i,s,o;const a=_(T(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,u=null!==(n=a.oobCode)&&void 0!==n?n:null,c=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);ct(l&&u&&c,"argument-error"),this.apiKey=l,this.operation=c,this.code=u,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=_(T(e)).link,n=t?_(T(t)).deep_link_id:null,r=_(T(e)).deep_link_id;return(r?_(T(r)).link:null)||r||n||t||e}(e);try{return new xn(t)}catch(n){return null}}}class In{constructor(){this.providerId=In.PROVIDER_ID}static credential(e,t){return En._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=xn.parseLink(t);return ct(n,"argument-error"),En._fromEmailAndCode(e,n.code,n.tenantId)}}In.PROVIDER_ID="password",In.EMAIL_PASSWORD_SIGN_IN_METHOD="password",In.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Cn{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Nn extends Cn{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class An extends Nn{constructor(){super("facebook.com")}static credential(e){return kn._fromParams({providerId:An.PROVIDER_ID,signInMethod:An.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return An.credentialFromTaggedObject(e)}static credentialFromError(e){return An.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return An.credential(t.oauthAccessToken)}catch(n){return null}}}An.FACEBOOK_SIGN_IN_METHOD="facebook.com",An.PROVIDER_ID="facebook.com";class Dn extends Nn{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return kn._fromParams({providerId:Dn.PROVIDER_ID,signInMethod:Dn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Dn.credentialFromTaggedObject(e)}static credentialFromError(e){return Dn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Dn.credential(n,r)}catch(i){return null}}}Dn.GOOGLE_SIGN_IN_METHOD="google.com",Dn.PROVIDER_ID="google.com";class Rn extends Nn{constructor(){super("github.com")}static credential(e){return kn._fromParams({providerId:Rn.PROVIDER_ID,signInMethod:Rn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Rn.credentialFromTaggedObject(e)}static credentialFromError(e){return Rn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Rn.credential(t.oauthAccessToken)}catch(n){return null}}}Rn.GITHUB_SIGN_IN_METHOD="github.com",Rn.PROVIDER_ID="github.com";class Pn extends Nn{constructor(){super("twitter.com")}static credential(e,t){return kn._fromParams({providerId:Pn.PROVIDER_ID,signInMethod:Pn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Pn.credentialFromTaggedObject(e)}static credentialFromError(e){return Pn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Pn.credential(n,r)}catch(i){return null}}}Pn.TWITTER_SIGN_IN_METHOD="twitter.com",Pn.PROVIDER_ID="twitter.com";class On{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await jt._fromIdTokenResponse(e,n,r),s=Ln(n);return new On({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Ln(n);return new On({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Ln(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Mn extends v{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Mn.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Mn(e,t,n,r)}}function Fn(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw Mn._fromErrorAndOperation(e,n,t,r);throw n})}async function jn(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Rt(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return On._forOperation(e,"link",r)}async function Un(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e,i="reauthenticate";try{const s=await Rt(e,Fn(r,i,t,e),n);ct(s.idToken,r,"internal-error");const o=Dt(s.idToken);ct(o,r,"internal-error");const{sub:a}=o;return ct(e.uid===a,r,"user-mismatch"),On._forOperation(e,i,s)}catch(s){throw"auth/user-not-found"===(null===s||void 0===s?void 0:s.code)&&st(r,"user-mismatch"),s}}async function Vn(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r="signIn",i=await Fn(e,r,t),s=await On._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function zn(e){return C(e).signOut()}new WeakMap;const Bn="__sak";class $n{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Bn,"1"),this.storage.removeItem(Bn),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class qn extends $n{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=g();return Wt(e)||Zt(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=tn(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);en()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}qn.type="LOCAL";const Hn=qn;class Kn extends $n{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Kn.type="SESSION";const Wn=Kn;class Gn{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new Gn(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map(async e=>e(t.origin,i)),a=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Qn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Gn.receivers=[];class Yn{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise((o,a)=>{const l=Qn("",20);r.port1.start();const u=setTimeout(()=>{a(new Error("unsupported_event"))},n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(u),i=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(u),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function Xn(){return window}function Jn(){return"undefined"!==typeof Xn().WorkerGlobalScope&&"function"===typeof Xn().importScripts}const Zn="firebaseLocalStorageDb",er="firebaseLocalStorage",tr="fbase_key";class nr{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function rr(e,t){return e.transaction([er],t?"readwrite":"readonly").objectStore(er)}function ir(){const e=indexedDB.open(Zn,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(er,{keyPath:tr})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(er)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Zn);return new nr(e).toPromise()}(),t(await ir()))})})}async function sr(e,t,n){const r=rr(e,!0).put({[tr]:t,value:n});return new nr(r).toPromise()}function or(e,t){const n=rr(e,!0).delete(t);return new nr(n).toPromise()}class ar{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await ir()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Jn()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Gn._getInstance(Jn()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Yn(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ir();return await sr(e,Bn,"1"),await or(e,Bn),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>sr(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=rr(e,!1).get(t),r=await new nr(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>or(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=rr(e,!1).getAll();return new nr(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}ar.type="LOCAL";const lr=ar;ln("rcb"),new yt(3e4,6e4);const ur="recaptcha";async function cr(e,t,n){var r;const i=await n.verify();try{let s;if(ct("string"===typeof i,e,"argument-error"),ct(n.type===ur,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){ct("enroll"===t.type,e,"internal-error");const n=await function(e,t){return kt(e,"POST","/v2/accounts/mfaEnrollment:start",St(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{ct("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;ct(n,e,"missing-multi-factor-info");const o=await function(e,t){return kt(e,"POST","/v2/accounts/mfaSignIn:start",St(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return kt(e,"POST","/v1/accounts:sendVerificationCode",St(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class hr{constructor(e){this.providerId=hr.PROVIDER_ID,this.auth=fn(e)}verifyPhoneNumber(e,t){return cr(this.auth,e,C(t))}static credential(e,t){return Tn._fromVerification(e,t)}static credentialFromResult(e){const t=e;return hr.credentialFromTaggedObject(t)}static credentialFromError(e){return hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Tn._fromTokenResponse(n,r):null}}function dr(e,t){return t?Vt(t):(ct(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}hr.PROVIDER_ID="phone",hr.PHONE_SIGN_IN_METHOD="phone";class fr extends vn{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Sn(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Sn(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Sn(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function pr(e){return Vn(e.auth,new fr(e),e.bypassAuthState)}function mr(e){const{auth:t,user:n}=e;return ct(n,t,"internal-error"),Un(n,new fr(e),e.bypassAuthState)}async function gr(e){const{auth:t,user:n}=e;return ct(n,t,"internal-error"),jn(n,new fr(e),e.bypassAuthState)}class yr{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return pr;case"linkViaPopup":case"linkViaRedirect":return gr;case"reauthViaPopup":case"reauthViaRedirect":return mr;default:st(this.auth,"internal-error")}}resolve(e){dt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){dt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const vr=new yt(2e3,1e4);class br extends yr{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,br.currentPopupAction&&br.currentPopupAction.cancel(),br.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ct(e,this.auth,"internal-error"),e}async onExecution(){dt(1===this.filter.length,"Popup operations only handle one event");const e=Qn();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(ot(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(ot(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,br.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ot(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,vr.get())};e()}}br.currentPopupAction=null;const wr=new Map;class Er extends yr{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=wr.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=_r(t),r=kr(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}wr.set(this.auth._key(),e)}return this.bypassAuthState||wr.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Sr(e,t){wr.set(e._key(),t)}function kr(e){return Vt(e._redirectPersistence)}function _r(e){return $t("pendingRedirect",e.config.apiKey,e.name)}async function Tr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=fn(e),i=dr(r,t),s=new Er(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}class xr{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Cr(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Cr(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(ot(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ir(e))}saveEventToCache(e){this.cachedEventUids.add(Ir(e)),this.lastProcessedEventTime=Date.now()}}function Ir(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function Cr(e){let{type:t,error:n}=e;return"unknown"===t&&"auth/no-auth-event"===(null===n||void 0===n?void 0:n.code)}const Nr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ar=/^https?/;async function Dr(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return kt(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(Rr(r))return}catch(n){}st(e,"unauthorized-domain")}function Rr(e){const t=ft(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Ar.test(n))return!1;if(Nr.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Pr=new yt(3e4,6e4);function Or(){const e=Xn().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let Lr=null;function Mr(e){return Lr=Lr||function(e){return new Promise((t,n)=>{var r,i,s;function o(){Or(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Or(),n(ot(e,"network-request-failed"))},timeout:Pr.get()})}if(null===(i=null===(r=Xn().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Xn().gapi)||void 0===s?void 0:s.load)){const t=ln("iframefcb");return Xn()[t]=()=>{gapi.load?o():n(ot(e,"network-request-failed"))},an(`https://apis.google.com/js/api.js?onload=${t}`).catch(e=>n(e))}o()}}).catch(e=>{throw Lr=null,e})}(e),Lr}const Fr=new yt(5e3,15e3),jr={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ur=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Vr(e){const t=e.config;ct(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?vt(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:Ue},i=Ur.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${k(r).slice(1)}`}const zr={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Br{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function $r(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},zr),{width:r.toString(),height:i.toString(),top:s,left:o}),u=g().toLowerCase();n&&(a=Gt(u)?"_blank":n),Kt(u)&&(t=t||"http://localhost",l.scrollbars="yes");const c=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return`${e}${n}=${r},`},"");if(function(){var e;return Zt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:g())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(u)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new Br(null);const h=window.open(t||"",a,c);ct(h,e,"popup-blocked");try{h.focus()}catch(d){}return new Br(h)}const qr="__/auth/handler",Hr="emulator/auth/handler",Kr=encodeURIComponent("fac");async function Wr(e,t,n,r,i,s){ct(e.config.authDomain,e,"auth-domain-config-required"),ct(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Ue,eventId:i};if(t instanceof Cn){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof Nn){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))void 0===a[c]&&delete a[c];const l=await e._getAppCheckToken(),u=l?`#${Kr}=${encodeURIComponent(l)}`:"";return`${function(e){let{config:t}=e;if(!t.emulator)return`https://${t.authDomain}/${qr}`;return vt(t,Hr)}(e)}?${k(a).slice(1)}${u}`}const Gr="webStorageSupport";const Qr=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Wn,this._completeRedirectFn=Tr,this._overrideRedirectResult=Sr}async _openPopup(e,t,n,r){var i;dt(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return $r(e,await Wr(e,t,n,ft(),r),Qn())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Xn().location.href=e}(await Wr(e,t,n,ft(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(dt(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await async function(e){const t=await Mr(e),n=Xn().gapi;return ct(n,e,"internal-error"),t.open({where:document.body,url:Vr(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jr,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=ot(e,"network-request-failed"),s=Xn().setTimeout(()=>{r(i)},Fr.get());function o(){Xn().clearTimeout(s),n(t)}t.ping(o).then(o,()=>{r(i)})}))}(e),n=new xr(e);return t.register("authEvent",t=>{ct(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Gr,{type:Gr},n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Gr];void 0!==i&&t(!!i),st(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Dr(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return tn()||Wt()||Zt()}};var Yr="@firebase/auth",Xr="0.23.2";class Jr{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ct(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Zr=p("authIdTokenMaxAge")||300;let ei=null;var ti;ti="Browser",Le(new N("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ct(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:ti,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:nn(ti)},u=new dn(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Vt);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Le(new N("auth-internal",e=>(e=>new Jr(e))(fn(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),Be(Yr,Xr,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(ti)),Be(Yr,Xr,"esm2017");var ni,ri="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},ii={},si=si||{},oi=ri||self;function ai(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function li(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var ui="closure_uid_"+(1e9*Math.random()>>>0),ci=0;function hi(e,t,n){return e.call.apply(e.bind,arguments)}function di(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function fi(e,t,n){return(fi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?hi:di).apply(null,arguments)}function pi(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function mi(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function gi(){this.s=this.s,this.o=this.o}gi.prototype.s=!1,gi.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,ui)&&e[ui]||(e[ui]=++ci))},gi.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const yi=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function vi(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function bi(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(ai(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function wi(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}wi.prototype.h=function(){this.defaultPrevented=!0};var Ei=function(){if(!oi.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{oi.addEventListener("test",()=>{},t),oi.removeEventListener("test",()=>{},t)}catch(n){}return e}();function Si(e){return/^[\s\xa0]*$/.test(e)}function ki(){var e=oi.navigator;return e&&(e=e.userAgent)?e:""}function _i(e){return-1!=ki().indexOf(e)}function Ti(e){return Ti[" "](e),e}Ti[" "]=function(){};var xi,Ii,Ci=_i("Opera"),Ni=_i("Trident")||_i("MSIE"),Ai=_i("Edge"),Di=Ai||Ni,Ri=_i("Gecko")&&!(-1!=ki().toLowerCase().indexOf("webkit")&&!_i("Edge"))&&!(_i("Trident")||_i("MSIE"))&&!_i("Edge"),Pi=-1!=ki().toLowerCase().indexOf("webkit")&&!_i("Edge");function Oi(){var e=oi.document;return e?e.documentMode:void 0}e:{var Li="",Mi=function(){var e=ki();return Ri?/rv:([^\);]+)(\)|;)/.exec(e):Ai?/Edge\/([\d\.]+)/.exec(e):Ni?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Pi?/WebKit\/(\S+)/.exec(e):Ci?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Mi&&(Li=Mi?Mi[1]:""),Ni){var Fi=Oi();if(null!=Fi&&Fi>parseFloat(Li)){xi=String(Fi);break e}}xi=Li}if(oi.document&&Ni){var ji=Oi();Ii=ji||(parseInt(xi,10)||void 0)}else Ii=void 0;var Ui=Ii;function Vi(e,t){if(wi.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Ri){e:{try{Ti(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:zi[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Vi.$.h.call(this)}}mi(Vi,wi);var zi={2:"touch",3:"pen",4:"mouse"};Vi.prototype.h=function(){Vi.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Bi="closure_listenable_"+(1e6*Math.random()|0),$i=0;function qi(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++$i,this.fa=this.ia=!1}function Hi(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Ki(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function Wi(e){const t={};for(const n in e)t[n]=e[n];return t}const Gi="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Qi(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<Gi.length;t++)n=Gi[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Yi(e){this.src=e,this.g={},this.h=0}function Xi(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=yi(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(Hi(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Ji(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}Yi.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=Ji(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new qi(t,this.src,s,!!r,i)).ia=n,e.push(t)),t};var Zi="closure_lm_"+(1e6*Math.random()|0),es={};function ts(e,t,n,r,i){if(r&&r.once)return rs(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)ts(e,t[s],n,r,i);return null}return n=cs(n),e&&e[Bi]?e.O(t,n,li(r)?!!r.capture:!!r,i):ns(e,t,n,!1,r,i)}function ns(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=li(i)?!!i.capture:!!i,a=ls(e);if(a||(e[Zi]=a=new Yi(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=as;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Ei||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(os(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function rs(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)rs(e,t[s],n,r,i);return null}return n=cs(n),e&&e[Bi]?e.P(t,n,li(r)?!!r.capture:!!r,i):ns(e,t,n,!0,r,i)}function is(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)is(e,t[s],n,r,i);else r=li(r)?!!r.capture:!!r,n=cs(n),e&&e[Bi]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Ji(s=e.g[t],n,r,i))&&(Hi(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=ls(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Ji(t,n,r,i)),(n=-1<e?t[e]:null)&&ss(n))}function ss(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Bi])Xi(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(os(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ls(t))?(Xi(n,e),0==n.h&&(n.src=null,t[Zi]=null)):Hi(e)}}}function os(e){return e in es?es[e]:es[e]="on"+e}function as(e,t){if(e.fa)e=!0;else{t=new Vi(t,this);var n=e.listener,r=e.la||e.src;e.ia&&ss(e),e=n.call(r,t)}return e}function ls(e){return(e=e[Zi])instanceof Yi?e:null}var us="__closure_events_fn_"+(1e9*Math.random()>>>0);function cs(e){return"function"===typeof e?e:(e[us]||(e[us]=function(t){return e.handleEvent(t)}),e[us])}function hs(){gi.call(this),this.i=new Yi(this),this.S=this,this.J=null}function ds(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new wi(t,e);else if(t instanceof wi)t.target=t.target||e;else{var i=t;Qi(t=new wi(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=fs(o,r,!0,t)&&i}if(i=fs(o=t.g=e,r,!0,t)&&i,i=fs(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=fs(o=t.g=n[s],r,!1,t)&&i}function fs(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&Xi(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}mi(hs,gi),hs.prototype[Bi]=!0,hs.prototype.removeEventListener=function(e,t,n,r){is(this,e,t,n,r)},hs.prototype.N=function(){if(hs.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Hi(n[r]);delete t.g[e],t.h--}}this.J=null},hs.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},hs.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var ps=oi.JSON.stringify;function ms(){var e=Ss;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var gs=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new ys,e=>e.reset());class ys{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function vs(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function bs(e){oi.setTimeout(()=>{throw e},0)}let ws,Es=!1,Ss=new class{constructor(){this.h=this.g=null}add(e,t){const n=gs.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},ks=()=>{const e=oi.Promise.resolve(void 0);ws=()=>{e.then(_s)}};var _s=()=>{for(var e;e=ms();){try{e.h.call(e.g)}catch(n){bs(n)}var t=gs;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Es=!1};function Ts(e,t){hs.call(this),this.h=e||1,this.g=t||oi,this.j=fi(this.qb,this),this.l=Date.now()}function xs(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Is(e,t,n){if("function"===typeof e)n&&(e=fi(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=fi(e.handleEvent,e)}return 2147483647<Number(t)?-1:oi.setTimeout(e,t||0)}function Cs(e){e.g=Is(()=>{e.g=null,e.i&&(e.i=!1,Cs(e))},e.j);const t=e.h;e.h=null,e.m.apply(null,t)}mi(Ts,hs),(ni=Ts.prototype).ga=!1,ni.T=null,ni.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),ds(this,"tick"),this.ga&&(xs(this),this.start()))}},ni.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ni.N=function(){Ts.$.N.call(this),xs(this),delete this.g};class Ns extends gi{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Cs(this)}N(){super.N(),this.g&&(oi.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function As(e){gi.call(this),this.h=e,this.g={}}mi(As,gi);var Ds=[];function Rs(e,t,n,r){Array.isArray(n)||(n&&(Ds[0]=n.toString()),n=Ds);for(var i=0;i<n.length;i++){var s=ts(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function Ps(e){Ki(e.g,function(e,t){this.g.hasOwnProperty(t)&&ss(e)},e),e.g={}}function Os(){this.g=!0}function Ls(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return ps(n)}catch(a){return t}}(e,n)+(r?" "+r:"")})}As.prototype.N=function(){As.$.N.call(this),Ps(this)},As.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Os.prototype.Ea=function(){this.g=!1},Os.prototype.info=function(){};var Ms={},Fs=null;function js(){return Fs=Fs||new hs}function Us(e){wi.call(this,Ms.Ta,e)}function Vs(e){const t=js();ds(t,new Us(t))}function zs(e,t){wi.call(this,Ms.STAT_EVENT,e),this.stat=t}function Bs(e){const t=js();ds(t,new zs(t,e))}function $s(e,t){wi.call(this,Ms.Ua,e),this.size=t}function qs(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return oi.setTimeout(function(){e()},t)}Ms.Ta="serverreachability",mi(Us,wi),Ms.STAT_EVENT="statevent",mi(zs,wi),Ms.Ua="timingevent",mi($s,wi);var Hs={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Ks={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Ws(){}function Gs(e){return e.h||(e.h=e.i())}function Qs(){}Ws.prototype.h=null;var Ys,Xs={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Js(){wi.call(this,"d")}function Zs(){wi.call(this,"c")}function eo(){}function to(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new As(this),this.P=ro,e=Di?125:void 0,this.V=new Ts(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new no}function no(){this.i=null,this.g="",this.h=!1}mi(Js,wi),mi(Zs,wi),mi(eo,Ws),eo.prototype.g=function(){return new XMLHttpRequest},eo.prototype.i=function(){return{}},Ys=new eo;var ro=45e3,io={},so={};function oo(e,t,n){e.L=1,e.v=xo(Eo(t)),e.s=n,e.S=!0,ao(e,null)}function ao(e,t){e.G=Date.now(),ho(e),e.A=Eo(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),Uo(n.i,"t",r),e.C=0,n=e.l.J,e.h=new no,e.g=Va(e.l,n?t:null,!e.s),0<e.O&&(e.M=new Ns(fi(e.Pa,e,e.g),e.O)),Rs(e.U,e.g,"readystatechange",e.nb),t=e.I?Wi(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),Vs(),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");o=2<=h.length&&"type"==h[1]?o+(c+"=")+u+"&":o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o})}(e.j,e.u,e.A,e.m,e.W,e.s)}function lo(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function uo(e,t,n){let r,i=!0;for(;!e.J&&e.C<n.length;){if(r=co(e,n),r==so){4==t&&(e.o=4,Bs(14),i=!1),Ls(e.j,e.m,null,"[Incomplete Response]");break}if(r==io){e.o=4,Bs(15),Ls(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Ls(e.j,e.m,r,null),yo(e,r)}lo(e)&&r!=so&&r!=io&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Bs(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ra(t),t.M=!0,Bs(11))):(Ls(e.j,e.m,n,"[Invalid Chunked Response]"),go(e),mo(e))}function co(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?so:(n=Number(t.substring(n,r)),isNaN(n)?io:(r+=1)+n>t.length?so:(t=t.slice(r,r+n),e.C=r+n,t))}function ho(e){e.Y=Date.now()+e.P,fo(e,e.P)}function fo(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=qs(fi(e.lb,e),t)}function po(e){e.B&&(oi.clearTimeout(e.B),e.B=null)}function mo(e){0==e.l.H||e.J||La(e.l,e)}function go(e){po(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,xs(e.V),Ps(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function yo(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Ko(n.i,e)))if(!e.K&&Ko(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Oa(n),_a(n)}Da(n),Bs(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=qs(fi(n.ib,n),6e3));if(1>=Ho(n.i)&&n.oa){try{n.oa()}catch(u){}n.oa=void 0}}else Fa(n,11)}else if((e.K||n.g==e)&&Oa(n),!Si(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let u=i[t];if(n.V=u[0],u=u[1],2==n.H)if("c"==u[0]){n.K=u[1],n.pa=u[2];const t=u[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=u[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const c=u[5];null!=c&&"number"===typeof c&&0<c&&(r=1.5*c,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Wo(s,s.h),s.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,To(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=e;if((r=n).wa=Ua(r,r.J?r.pa:null,r.Y),o.K){Go(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.B&&(po(a),ho(a)),r.g=o}else Aa(r);0<n.j.length&&xa(n)}else"stop"!=u[0]&&"close"!=u[0]||Fa(n,7);else 3==n.H&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?Fa(n,7):ka(n):"noop"!=u[0]&&n.h&&n.h.Aa(u),n.A=0)}Vs()}catch(u){}}function vo(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(ai(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(ai(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(ai(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}(ni=to.prototype).setTimeout=function(e){this.P=e},ni.nb=function(e){e=e.target;const t=this.M;t&&3==ya(e)?t.l():this.Pa(e)},ni.Pa=function(e){try{if(e==this.g)e:{const c=ya(this.g);var t=this.g.Ia();this.g.da();if(!(3>c)&&(3!=c||Di||this.g&&(this.h.h||this.g.ja()||va(this.g)))){this.J||4!=c||7==t||Vs(),po(this);var n=this.g.da();this.ca=n;t:if(lo(this)){var r=va(this.g);e="";var i=r.length,s=4==ya(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){go(this),mo(this);var o="";break t}this.h.i=new oi.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.splice(0,i),this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.W,c,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Si(a)){var u=a;break t}}u=null}if(!(n=u)){this.i=!1,this.o=3,Bs(12),go(this),mo(this);break e}Ls(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,yo(this,n)}this.S?(uo(this,c,o),Di&&this.i&&3==c&&(Rs(this.U,this.V,"tick",this.mb),this.V.start())):(Ls(this.j,this.m,o,null),yo(this,o)),4==c&&go(this),this.i&&!this.J&&(4==c?La(this.l,this):(this.i=!1,ho(this)))}else(function(e){const t={};e=(e.g&&2<=ya(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(Si(e[r]))continue;var n=vs(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.o=3,Bs(12)):(this.o=0,Bs(13)),go(this),mo(this)}}}catch(c){}},ni.mb=function(){if(this.g){var e=ya(this.g),t=this.g.ja();this.C<t.length&&(po(this),uo(this,e,t),this.i&&4!=e&&ho(this))}},ni.cancel=function(){this.J=!0,go(this)},ni.lb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.L&&(Vs(),Bs(17)),go(this),this.o=2,mo(this)):fo(this,this.Y-e)};var bo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wo(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof wo){this.h=e.h,So(this,e.j),this.s=e.s,this.g=e.g,ko(this,e.m),this.l=e.l;var t=e.i,n=new Lo;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),_o(this,n),this.o=e.o}else e&&(t=String(e).match(bo))?(this.h=!1,So(this,t[1]||"",!0),this.s=Io(t[2]||""),this.g=Io(t[3]||"",!0),ko(this,t[4]),this.l=Io(t[5]||"",!0),_o(this,t[6]||"",!0),this.o=Io(t[7]||"")):(this.h=!1,this.i=new Lo(null,this.h))}function Eo(e){return new wo(e)}function So(e,t,n){e.j=n?Io(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ko(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function _o(e,t,n){t instanceof Lo?(e.i=t,function(e,t){t&&!e.j&&(Mo(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Fo(this,t),Uo(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=Co(t,Po)),e.i=new Lo(t,e.h))}function To(e,t,n){e.i.set(t,n)}function xo(e){return To(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Io(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Co(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,No),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function No(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}wo.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Co(t,Ao,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Co(t,Ao,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Co(n,"/"==n.charAt(0)?Ro:Do,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Co(n,Oo)),e.join("")};var Ao=/[#\/\?@]/g,Do=/[#\?:]/g,Ro=/[#\?]/g,Po=/[#\?@]/g,Oo=/#/g;function Lo(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Mo(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Fo(e,t){Mo(e),t=Vo(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function jo(e,t){return Mo(e),t=Vo(e,t),e.g.has(t)}function Uo(e,t,n){Fo(e,t),0<n.length&&(e.i=null,e.g.set(Vo(e,t),vi(n)),e.h+=n.length)}function Vo(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(ni=Lo.prototype).add=function(e,t){Mo(this),this.i=null,e=Vo(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},ni.forEach=function(e,t){Mo(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},ni.ta=function(){Mo(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},ni.Z=function(e){Mo(this);let t=[];if("string"===typeof e)jo(this,e)&&(t=t.concat(this.g.get(Vo(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},ni.set=function(e,t){return Mo(this),this.i=null,jo(this,e=Vo(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},ni.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},ni.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")};var zo=class{constructor(e,t){this.g=e,this.map=t}};function Bo(e){this.l=e||$o,oi.PerformanceNavigationTiming?e=0<(e=oi.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(oi.g&&oi.g.Ka&&oi.g.Ka()&&oi.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var $o=10;function qo(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ho(e){return e.h?1:e.g?e.g.size:0}function Ko(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Wo(e,t){e.g?e.g.add(t):e.h=t}function Go(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Qo(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return vi(e.i)}Bo.prototype.cancel=function(){if(this.i=Qo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var Yo,Xo=class{stringify(e){return oi.JSON.stringify(e,void 0)}parse(e){return oi.JSON.parse(e,void 0)}};function Jo(){this.g=new Xo}function Zo(e,t,n){const r=n||"";try{vo(e,function(e,n){let i=e;li(e)&&(i=ps(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function ea(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(s){}}function ta(e){this.l=e.fc||null,this.j=e.ob||!1}function na(e,t){hs.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=ra,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}mi(ta,Ws),ta.prototype.g=function(){return new na(this.l,this.j)},ta.prototype.i=(Yo={},function(){return Yo}),mi(na,hs);var ra=0;function ia(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function sa(e){e.readyState=4,e.l=null,e.j=null,e.A=null,oa(e)}function oa(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(ni=na.prototype).open=function(e,t){if(this.readyState!=ra)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,oa(this)},ni.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||oi).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},ni.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,sa(this)),this.readyState=ra},ni.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,oa(this)),this.g&&(this.readyState=3,oa(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof oi.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ia(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},ni.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?sa(this):oa(this),3==this.readyState&&ia(this)}},ni.Za=function(e){this.g&&(this.response=this.responseText=e,sa(this))},ni.Ya=function(e){this.g&&(this.response=e,sa(this))},ni.ka=function(){this.g&&sa(this)},ni.setRequestHeader=function(e,t){this.v.append(e,t)},ni.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},ni.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(na.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var aa=oi.JSON.parse;function la(e){hs.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=ua,this.L=this.M=!1}mi(la,hs);var ua="",ca=/^https?$/i,ha=["POST","PUT"];function da(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,fa(e),ma(e)}function fa(e){e.F||(e.F=!0,ds(e,"complete"),ds(e,"error"))}function pa(e){if(e.h&&"undefined"!=typeof si&&(!e.C[1]||4!=ya(e)||2!=e.da()))if(e.v&&4==ya(e))Is(e.La,0,e);else if(ds(e,"readystatechange"),4==ya(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.I).match(bo)[1]||null;!i&&oi.self&&oi.self.location&&(i=oi.self.location.protocol.slice(0,-1)),r=!ca.test(i?i.toLowerCase():"")}n=r}if(n)ds(e,"complete"),ds(e,"success");else{e.m=6;try{var s=2<ya(e)?e.g.statusText:""}catch(o){s=""}e.j=s+" ["+e.da()+"]",fa(e)}}finally{ma(e)}}}function ma(e,t){if(e.g){ga(e);const r=e.g,i=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||ds(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function ga(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(oi.clearTimeout(e.A),e.A=null)}function ya(e){return e.g?e.g.readyState:0}function va(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case ua:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(kl){return null}}function ba(e){let t="";return Ki(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function wa(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=ba(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):To(e,t,n))}function Ea(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Sa(e){this.Ga=0,this.j=[],this.l=new Os,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Ea("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Ea("baseRetryDelayMs",5e3,e),this.hb=Ea("retryDelaySeedMs",1e4,e),this.eb=Ea("forwardChannelMaxRetries",2,e),this.xa=Ea("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Bo(e&&e.concurrentRequestLimit),this.Ja=new Jo,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function ka(e){if(Ta(e),3==e.H){var t=e.W++,n=Eo(e.I);if(To(n,"SID",e.K),To(n,"RID",t),To(n,"TYPE","terminate"),Ca(e,n),(t=new to(e,e.l,t)).L=2,t.v=xo(Eo(n)),n=!1,oi.navigator&&oi.navigator.sendBeacon)try{n=oi.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&oi.Image&&((new Image).src=t.v,n=!0),n||(t.g=Va(t.l,null),t.g.ha(t.v)),t.G=Date.now(),ho(t)}ja(e)}function _a(e){e.g&&(Ra(e),e.g.cancel(),e.g=null)}function Ta(e){_a(e),e.u&&(oi.clearTimeout(e.u),e.u=null),Oa(e),e.i.cancel(),e.m&&("number"===typeof e.m&&oi.clearTimeout(e.m),e.m=null)}function xa(e){if(!qo(e.i)&&!e.m){e.m=!0;var t=e.Na;ws||ks(),Es||(ws(),Es=!0),Ss.add(t,e),e.C=0}}function Ia(e,t){var n;n=t?t.m:e.W++;const r=Eo(e.I);To(r,"SID",e.K),To(r,"RID",n),To(r,"AID",e.V),Ca(e,r),e.o&&e.s&&wa(r,e.o,e.s),n=new to(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Na(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Wo(e.i,n),oo(n,r,t)}function Ca(e,t){e.na&&Ki(e.na,function(e,n){To(t,n,e)}),e.h&&vo({},function(e,n){To(t,n,e)})}function Na(e,t,n){n=Math.min(e.j.length,n);var r=e.h?fi(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{Zo(a,e,"req"+n+"_")}catch(Ol){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function Aa(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;ws||ks(),Es||(ws(),Es=!0),Ss.add(t,e),e.A=0}}function Da(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=qs(fi(e.Ma,e),Ma(e,e.A)),e.A++,!0)}function Ra(e){null!=e.B&&(oi.clearTimeout(e.B),e.B=null)}function Pa(e){e.g=new to(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Eo(e.wa);To(t,"RID","rpc"),To(t,"SID",e.K),To(t,"AID",e.V),To(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&To(t,"TO",e.qa),To(t,"TYPE","xmlhttp"),Ca(e,t),e.o&&e.s&&wa(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=xo(Eo(t)),n.s=null,n.S=!0,ao(n,e)}function Oa(e){null!=e.v&&(oi.clearTimeout(e.v),e.v=null)}function La(e,t){var n=null;if(e.g==t){Oa(e),Ra(e),e.g=null;var r=2}else{if(!Ko(e.i,t))return;n=t.F,Go(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;ds(r=js(),new $s(r,n)),xa(e)}else Aa(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(Ho(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=qs(fi(e.Na,e,t),Ma(e,e.C)),e.C++,!0))}(e,t)||2==r&&Da(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Fa(e,5);break;case 4:Fa(e,10);break;case 3:Fa(e,6);break;default:Fa(e,2)}}function Ma(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Fa(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=fi(e.pb,e);n||(n=new wo("//www.google.com/images/cleardot.gif"),oi.location&&"http"==oi.location.protocol||So(n,"https"),xo(n)),function(e,t){const n=new Os;if(oi.Image){const r=new Image;r.onload=pi(ea,n,r,"TestLoadImage: loaded",!0,t),r.onerror=pi(ea,n,r,"TestLoadImage: error",!1,t),r.onabort=pi(ea,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=pi(ea,n,r,"TestLoadImage: timeout",!1,t),oi.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(n.toString(),r)}else Bs(2);e.H=0,e.h&&e.h.za(t),ja(e),Ta(e)}function ja(e){if(e.H=0,e.ma=[],e.h){const t=Qo(e.i);0==t.length&&0==e.j.length||(bi(e.ma,t),bi(e.ma,e.j),e.i.i.length=0,vi(e.j),e.j.length=0),e.h.ya()}}function Ua(e,t,n){var r=n instanceof wo?Eo(n):new wo(n);if(""!=r.g)t&&(r.g=t+"."+r.g),ko(r,r.m);else{var i=oi.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new wo(null);r&&So(s,r),t&&(s.g=t),i&&ko(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&To(r,n,t),To(r,"VER",e.ra),Ca(e,r),r}function Va(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new la(new ta({ob:!0})):new la(e.va)).Oa(e.J),t}function za(){}function Ba(){if(Ni&&!(10<=Number(Ui)))throw Error("Environmental error: no available transport.")}function $a(e,t){hs.call(this),this.g=new Sa(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Si(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Si(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Ka(this)}function qa(e){Js.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Ha(){Zs.call(this),this.status=1}function Ka(e){this.g=e}function Wa(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Ga(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function Qa(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}(ni=la.prototype).Oa=function(e){this.M=e},ni.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Ys.g(),this.C=this.u?Gs(this.u):Gs(Ys),this.g.onreadystatechange=fi(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){return void da(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=oi.FormData&&e instanceof oi.FormData,!(0<=yi(ha,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,a]of n)this.g.setRequestHeader(o,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{ga(this),0<this.B&&((this.L=function(e){return Ni&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=fi(this.ua,this)):this.A=Is(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){da(this,s)}},ni.ua=function(){"undefined"!=typeof si&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ds(this,"timeout"),this.abort(8))},ni.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,ds(this,"complete"),ds(this,"abort"),ma(this))},ni.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ma(this,!0)),la.$.N.call(this)},ni.La=function(){this.s||(this.G||this.v||this.l?pa(this):this.kb())},ni.kb=function(){pa(this)},ni.isActive=function(){return!!this.g},ni.da=function(){try{return 2<ya(this)?this.g.status:-1}catch(Yo){return-1}},ni.ja=function(){try{return this.g?this.g.responseText:""}catch(Yo){return""}},ni.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),aa(t)}},ni.Ia=function(){return this.m},ni.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(ni=Sa.prototype).ra=8,ni.H=1,ni.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new to(this,this.l,e);let s=this.s;if(this.U&&(s?(s=Wi(s),Qi(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Na(this,i,t),To(n=Eo(this.I),"RID",e),To(n,"CVER",22),this.F&&To(n,"X-HTTP-Session-Id",this.F),Ca(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(ba(s)))+"&"+t:this.o&&wa(n,this.o,s)),Wo(this.i,i),this.bb&&To(n,"TYPE","init"),this.P?(To(n,"$req",t),To(n,"SID","null"),i.aa=!0,oo(i,n,null)):oo(i,n,t),this.H=2}}else 3==this.H&&(e?Ia(this,e):0==this.j.length||qo(this.i)||Ia(this))},ni.Ma=function(){if(this.u=null,Pa(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=qs(fi(this.jb,this),e)}},ni.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Bs(10),_a(this),Pa(this))},ni.ib=function(){null!=this.v&&(this.v=null,_a(this),Da(this),Bs(19))},ni.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Bs(2)):(this.l.info("Failed to ping google.com"),Bs(1))},ni.isActive=function(){return!!this.h&&this.h.isActive(this)},(ni=za.prototype).Ba=function(){},ni.Aa=function(){},ni.za=function(){},ni.ya=function(){},ni.isActive=function(){return!0},ni.Va=function(){},Ba.prototype.g=function(e,t){return new $a(e,t)},mi($a,hs),$a.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Bs(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Ua(e,null,e.Y),xa(e)},$a.prototype.close=function(){ka(this.g)},$a.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=ps(e),e=n);t.j.push(new zo(t.fb++,e)),3==t.H&&xa(t)},$a.prototype.N=function(){this.g.h=null,delete this.j,ka(this.g),delete this.g,$a.$.N.call(this)},mi(qa,Js),mi(Ha,Zs),mi(Ka,za),Ka.prototype.Ba=function(){ds(this.g,"a")},Ka.prototype.Aa=function(e){ds(this.g,new qa(e))},Ka.prototype.za=function(e){ds(this.g,new Ha)},Ka.prototype.ya=function(){ds(this.g,"b")},mi(Wa,function(){this.blockSize=-1}),Wa.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Wa.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(0==i)for(;s<=n;)Ga(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){Ga(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){Ga(this,r),i=0;break}}this.h=i,this.i+=t},Wa.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var Ya={};function Xa(e){return-128<=e&&128>e?function(e,t){var n=Ya;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new Qa([0|e],0>e?-1:0)}):new Qa([0|e],0>e?-1:0)}function Ja(e){if(isNaN(e)||!isFinite(e))return el;if(0>e)return sl(Ja(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Za;return new Qa(t,0)}var Za=4294967296,el=Xa(0),tl=Xa(1),nl=Xa(16777216);function rl(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function il(e){return-1==e.h}function sl(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Qa(n,~e.h).add(tl)}function ol(e,t){return e.add(sl(t))}function al(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function ll(e,t){this.g=e,this.h=t}function ul(e,t){if(rl(t))throw Error("division by zero");if(rl(e))return new ll(el,el);if(il(e))return t=ul(sl(e),t),new ll(sl(t.g),sl(t.h));if(il(t))return t=ul(e,sl(t)),new ll(sl(t.g),t.h);if(30<e.g.length){if(il(e)||il(t))throw Error("slowDivide_ only works with positive integers.");for(var n=tl,r=t;0>=r.X(e);)n=cl(n),r=cl(r);var i=hl(n,1),s=hl(r,1);for(r=hl(r,2),n=hl(n,2);!rl(r);){var o=s.add(r);0>=o.X(e)&&(i=i.add(n),s=o),r=hl(r,1),n=hl(n,1)}return t=ol(e,i.R(t)),new ll(i,t)}for(i=el;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=Ja(n)).R(t);il(o)||0<o.X(e);)o=(s=Ja(n-=r)).R(t);rl(s)&&(s=tl),i=i.add(s),e=ol(e,o)}return new ll(i,e)}function cl(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Qa(n,e.h)}function hl(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new Qa(i,e.h)}(ni=Qa.prototype).ea=function(){if(il(this))return-sl(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Za+r)*t,t*=Za}return e},ni.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(rl(this))return"0";if(il(this))return"-"+sl(this).toString(e);for(var t=Ja(Math.pow(e,6)),n=this,r="";;){var i=ul(n,t).g,s=((0<(n=ol(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(rl(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},ni.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},ni.X=function(e){return il(e=ol(this,e))?-1:rl(e)?0:1},ni.abs=function(){return il(this)?sl(this):this},ni.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(65535&this.D(i))+(65535&e.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new Qa(n,-2147483648&n[n.length-1]?-1:0)},ni.R=function(e){if(rl(this)||rl(e))return el;if(il(this))return il(e)?sl(this).R(sl(e)):sl(sl(this).R(e));if(il(e))return sl(this.R(sl(e)));if(0>this.X(nl)&&0>e.X(nl))return Ja(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=e.D(i)>>>16,l=65535&e.D(i);n[2*r+2*i]+=o*l,al(n,2*r+2*i),n[2*r+2*i+1]+=s*l,al(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,al(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,al(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Qa(n,0)},ni.gb=function(e){return ul(this,e).h},ni.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Qa(n,this.h&e.h)},ni.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Qa(n,this.h|e.h)},ni.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Qa(n,this.h^e.h)},Ba.prototype.createWebChannel=Ba.prototype.g,$a.prototype.send=$a.prototype.u,$a.prototype.open=$a.prototype.m,$a.prototype.close=$a.prototype.close,Hs.NO_ERROR=0,Hs.TIMEOUT=8,Hs.HTTP_ERROR=6,Ks.COMPLETE="complete",Qs.EventType=Xs,Xs.OPEN="a",Xs.CLOSE="b",Xs.ERROR="c",Xs.MESSAGE="d",hs.prototype.listen=hs.prototype.O,la.prototype.listenOnce=la.prototype.P,la.prototype.getLastError=la.prototype.Sa,la.prototype.getLastErrorCode=la.prototype.Ia,la.prototype.getStatus=la.prototype.da,la.prototype.getResponseJson=la.prototype.Wa,la.prototype.getResponseText=la.prototype.ja,la.prototype.send=la.prototype.ha,la.prototype.setWithCredentials=la.prototype.Oa,Wa.prototype.digest=Wa.prototype.l,Wa.prototype.reset=Wa.prototype.reset,Wa.prototype.update=Wa.prototype.j,Qa.prototype.add=Qa.prototype.add,Qa.prototype.multiply=Qa.prototype.R,Qa.prototype.modulo=Qa.prototype.gb,Qa.prototype.compare=Qa.prototype.X,Qa.prototype.toNumber=Qa.prototype.ea,Qa.prototype.toString=Qa.prototype.toString,Qa.prototype.getBits=Qa.prototype.D,Qa.fromNumber=Ja,Qa.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return sl(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Ja(Math.pow(n,8)),i=el,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),n);8>o?(o=Ja(Math.pow(n,o)),i=i.R(o).add(Ja(a))):i=(i=i.R(r)).add(Ja(a))}return i};var dl=ii.createWebChannelTransport=function(){return new Ba},fl=ii.getStatEventTarget=function(){return js()},pl=ii.ErrorCode=Hs,ml=ii.EventType=Ks,gl=ii.Event=Ms,yl=ii.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},vl=ii.FetchXmlHttpFactory=ta,bl=ii.WebChannel=Qs,wl=ii.XhrIo=la,El=ii.Md5=Wa,Sl=ii.Integer=Qa;const kl="@firebase/firestore";class _l{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}_l.UNAUTHENTICATED=new _l(null),_l.GOOGLE_CREDENTIALS=new _l("google-credentials-uid"),_l.FIRST_PARTY=new _l("first-party-uid"),_l.MOCK_USER=new _l("mock-user");let Tl="9.23.0";const xl=new U("@firebase/firestore");function Il(){return xl.logLevel}function Cl(e){if(xl.logLevel<=O.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Dl);xl.debug(`Firestore (${Tl}): ${e}`,...i)}}function Nl(e){if(xl.logLevel<=O.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Dl);xl.error(`Firestore (${Tl}): ${e}`,...i)}}function Al(e){if(xl.logLevel<=O.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Dl);xl.warn(`Firestore (${Tl}): ${e}`,...i)}}function Dl(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Rl(){const e=`FIRESTORE (${Tl}) INTERNAL ASSERTION FAILED: `+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state");throw Nl(e),new Error(e)}function Pl(e,t){e||Rl()}function Ol(e,t){return e}const Ll={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ml extends v{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Fl{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class jl{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ul{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(_l.UNAUTHENTICATED))}shutdown(){}}class Vl{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class zl{constructor(e){this.t=e,this.currentUser=_l.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Fl;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Fl,e.enqueueRetryable(()=>r(this.currentUser))};const s=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},o=e=>{Cl("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(e=>o(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Cl("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Fl)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(Cl("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Pl("string"==typeof t.accessToken),new jl(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Pl(null===e||"string"==typeof e),new _l(e)}}class Bl{constructor(e,t,n){this.h=e,this.l=t,this.m=n,this.type="FirstParty",this.user=_l.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class $l{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new Bl(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(_l.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ql{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Hl{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const n=e=>{null!=e.error&&Cl("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.T;return this.T=e.token,Cl("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{Cl("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.I.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.I.getImmediate({optional:!0});e?r(e):Cl("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(Pl("string"==typeof e.token),this.T=e.token,new ql(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Kl(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Wl{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=Kl(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function Gl(e,t){return e<t?-1:e>t?1:0}function Ql(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}class Yl{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ml(Ll.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ml(Ll.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ml(Ll.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ml(Ll.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Yl.fromMillis(Date.now())}static fromDate(e){return Yl.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Yl(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Gl(this.nanoseconds,e.nanoseconds):Gl(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Xl{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Xl(e)}static min(){return new Xl(new Yl(0,0))}static max(){return new Xl(new Yl(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Jl{constructor(e,t,n){void 0===t?t=0:t>e.length&&Rl(),void 0===n?n=e.length-t:n>e.length-t&&Rl(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Jl.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Jl?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Zl extends Jl{construct(e,t,n){return new Zl(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Ml(Ll.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(e=>e.length>0))}return new Zl(e)}static emptyPath(){return new Zl([])}}const eu=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tu extends Jl{construct(e,t,n){return new tu(e,t,n)}static isValidIdentifier(e){return eu.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tu.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new tu(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Ml(Ll.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Ml(Ll.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Ml(Ll.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Ml(Ll.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new tu(t)}static emptyPath(){return new tu([])}}class nu{constructor(e){this.path=e}static fromPath(e){return new nu(Zl.fromString(e))}static fromName(e){return new nu(Zl.fromString(e).popFirst(5))}static empty(){return new nu(Zl.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Zl.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Zl.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new nu(new Zl(e.slice()))}}class ru{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}ru.UNKNOWN_ID=-1;function iu(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Xl.fromTimestamp(1e9===r?new Yl(n+1,0):new Yl(n,r));return new ou(i,nu.empty(),t)}function su(e){return new ou(e.readTime,e.key,-1)}class ou{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new ou(Xl.min(),nu.empty(),-1)}static max(){return new ou(Xl.max(),nu.empty(),-1)}}function au(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=nu.comparator(e.documentKey,t.documentKey),0!==n?n:Gl(e.largestBatchId,t.largestBatchId))}const lu="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class uu{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function cu(e){if(e.code!==Ll.FAILED_PRECONDITION||e.message!==lu)throw e;Cl("LocalStore","Unexpectedly lost primary lease")}class hu{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Rl(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new hu((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof hu?t:hu.resolve(t)}catch(e){return hu.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):hu.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):hu.reject(t)}static resolve(e){return new hu((t,n)=>{t(e)})}static reject(e){return new hu((t,n)=>{n(e)})}static waitFor(e){return new hu((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=hu.resolve(!1);for(const n of e)t=t.next(e=>e?hu.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new hu((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next(e=>{s[l]=e,++o,o===i&&n(s)},e=>r(e))}})}static doWhile(e,t){return new hu((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function du(e){return"IndexedDbTransactionError"===e.name}class fu{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ot(e),this.ut=e=>t.writeSequenceNumber(e))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}function pu(e){return null==e}function mu(e){return 0===e&&1/e==-1/0}function gu(e){return"number"==typeof e&&Number.isInteger(e)&&!mu(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}fu.ct=-1;const yu=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],vu=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],bu=vu;function wu(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Eu(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Su(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class ku{constructor(e,t){this.comparator=e,this.root=t||Tu.EMPTY}insert(e,t){return new ku(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Tu.BLACK,null,null))}remove(e){return new ku(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Tu.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _u(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _u(this.root,e,this.comparator,!1)}getReverseIterator(){return new _u(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _u(this.root,e,this.comparator,!0)}}class _u{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Tu{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Tu.RED,this.left=null!=r?r:Tu.EMPTY,this.right=null!=i?i:Tu.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Tu(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Tu.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Tu.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Tu.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Tu.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Rl();if(this.right.isRed())throw Rl();const e=this.left.check();if(e!==this.right.check())throw Rl();return e+(this.isRed()?0:1)}}Tu.EMPTY=null,Tu.RED=!0,Tu.BLACK=!1,Tu.EMPTY=new class{constructor(){this.size=0}get key(){throw Rl()}get value(){throw Rl()}get color(){throw Rl()}get left(){throw Rl()}get right(){throw Rl()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Tu(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class xu{constructor(e){this.comparator=e,this.data=new ku(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Iu(this.data.getIterator())}getIteratorFrom(e){return new Iu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof xu))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new xu(this.comparator);return t.data=e,t}}class Iu{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Cu{constructor(e){this.fields=e,e.sort(tu.comparator)}static empty(){return new Cu([])}unionWith(e){let t=new xu(tu.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Cu(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ql(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class Nu extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Au{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Nu("Invalid base64 string: "+e):e}}(e);return new Au(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Au(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Gl(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Au.EMPTY_BYTE_STRING=new Au("");const Du=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ru(e){if(Pl(!!e),"string"==typeof e){let t=0;const n=Du.exec(e);if(Pl(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Pu(e.seconds),nanos:Pu(e.nanos)}}function Pu(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Ou(e){return"string"==typeof e?Au.fromBase64String(e):Au.fromUint8Array(e)}function Lu(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Mu(e){const t=e.mapValue.fields.__previous_value__;return Lu(t)?Mu(t):t}function Fu(e){const t=Ru(e.mapValue.fields.__local_write_time__.timestampValue);return new Yl(t.seconds,t.nanos)}class ju{constructor(e,t,n,r,i,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class Uu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Uu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Uu&&e.projectId===this.projectId&&e.database===this.database}}const Vu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function zu(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Lu(e)?4:tc(e)?9007199254740991:10:Rl()}function Bu(e,t){if(e===t)return!0;const n=zu(e);if(n!==zu(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Fu(e).isEqual(Fu(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Ru(e.timestampValue),r=Ru(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Ou(e.bytesValue).isEqual(Ou(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Pu(e.geoPointValue.latitude)===Pu(t.geoPointValue.latitude)&&Pu(e.geoPointValue.longitude)===Pu(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Pu(e.integerValue)===Pu(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Pu(e.doubleValue),r=Pu(t.doubleValue);return n===r?mu(n)===mu(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Ql(e.arrayValue.values||[],t.arrayValue.values||[],Bu);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(wu(n)!==wu(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Bu(n[i],r[i])))return!1;return!0}(e,t);default:return Rl()}}function $u(e,t){return void 0!==(e.values||[]).find(e=>Bu(e,t))}function qu(e,t){if(e===t)return 0;const n=zu(e),r=zu(t);if(n!==r)return Gl(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Gl(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Pu(e.integerValue||e.doubleValue),r=Pu(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Hu(e.timestampValue,t.timestampValue);case 4:return Hu(Fu(e),Fu(t));case 5:return Gl(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Ou(e),r=Ou(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Gl(n[i],r[i]);if(0!==e)return e}return Gl(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Gl(Pu(e.latitude),Pu(t.latitude));return 0!==n?n:Gl(Pu(e.longitude),Pu(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=qu(n[i],r[i]);if(e)return e}return Gl(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Vu.mapValue&&t===Vu.mapValue)return 0;if(e===Vu.mapValue)return 1;if(t===Vu.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=Gl(r[o],s[o]);if(0!==e)return e;const t=qu(n[r[o]],i[s[o]]);if(0!==t)return t}return Gl(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Rl()}}function Hu(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Gl(e,t);const n=Ru(e),r=Ru(t),i=Gl(n.seconds,r.seconds);return 0!==i?i:Gl(n.nanos,r.nanos)}function Ku(e){return Wu(e)}function Wu(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Ru(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Ou(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,nu.fromName(n).toString()):"geoPointValue"in e?`geo(${(t=e.geoPointValue).latitude},${t.longitude})`:"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Wu(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${Wu(e.fields[i])}`;return n+"}"}(e.mapValue):Rl();var t,n}function Gu(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Qu(e){return!!e&&"integerValue"in e}function Yu(e){return!!e&&"arrayValue"in e}function Xu(e){return!!e&&"nullValue"in e}function Ju(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Zu(e){return!!e&&"mapValue"in e}function ec(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Eu(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=ec(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=ec(e.arrayValue.values[n]);return t}return Object.assign({},e)}function tc(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class nc{constructor(e){this.value=e}static empty(){return new nc({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Zu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ec(t)}setAll(e){let t=tu.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=ec(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Zu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Bu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Zu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Eu(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new nc(ec(this.value))}}function rc(e){const t=[];return Eu(e.fields,(e,n)=>{const r=new tu([e]);if(Zu(n)){const e=rc(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new Cu(t)}class ic{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new ic(e,0,Xl.min(),Xl.min(),Xl.min(),nc.empty(),0)}static newFoundDocument(e,t,n,r){return new ic(e,1,t,Xl.min(),n,r,0)}static newNoDocument(e,t){return new ic(e,2,t,Xl.min(),Xl.min(),nc.empty(),0)}static newUnknownDocument(e,t){return new ic(e,3,t,Xl.min(),Xl.min(),nc.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Xl.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=nc.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=nc.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Xl.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ic&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ic(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class sc{constructor(e,t){this.position=e,this.inclusive=t}}function oc(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?nu.comparator(nu.fromName(o.referenceValue),n.key):qu(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function ac(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Bu(e.position[n],t.position[n]))return!1;return!0}class lc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function uc(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class cc{}class hc extends cc{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new bc(e,t,n):"array-contains"===t?new kc(e,n):"in"===t?new _c(e,n):"not-in"===t?new Tc(e,n):"array-contains-any"===t?new xc(e,n):new hc(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new wc(e,n):new Ec(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(qu(t,this.value)):null!==t&&zu(this.value)===zu(t)&&this.matchesComparison(qu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Rl()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class dc extends cc{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new dc(e,t)}matches(e){return fc(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(e=>e.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function fc(e){return"and"===e.op}function pc(e){return mc(e)&&fc(e)}function mc(e){for(const t of e.filters)if(t instanceof dc)return!1;return!0}function gc(e){if(e instanceof hc)return e.field.canonicalString()+e.op.toString()+Ku(e.value);if(pc(e))return e.filters.map(e=>gc(e)).join(",");{const t=e.filters.map(e=>gc(e)).join(",");return`${e.op}(${t})`}}function yc(e,t){return e instanceof hc?function(e,t){return t instanceof hc&&e.op===t.op&&e.field.isEqual(t.field)&&Bu(e.value,t.value)}(e,t):e instanceof dc?function(e,t){return t instanceof dc&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&yc(n,t.filters[r]),!0)}(e,t):void Rl()}function vc(e){return e instanceof hc?function(e){return`${e.field.canonicalString()} ${e.op} ${Ku(e.value)}`}(e):e instanceof dc?function(e){return e.op.toString()+" {"+e.getFilters().map(vc).join(" ,")+"}"}(e):"Filter"}class bc extends hc{constructor(e,t,n){super(e,t,n),this.key=nu.fromName(n.referenceValue)}matches(e){const t=nu.comparator(e.key,this.key);return this.matchesComparison(t)}}class wc extends hc{constructor(e,t){super(e,"in",t),this.keys=Sc("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Ec extends hc{constructor(e,t){super(e,"not-in",t),this.keys=Sc("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Sc(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>nu.fromName(e.referenceValue))}class kc extends hc{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Yu(t)&&$u(t.arrayValue,this.value)}}class _c extends hc{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&$u(this.value.arrayValue,t)}}class Tc extends hc{constructor(e,t){super(e,"not-in",t)}matches(e){if($u(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!$u(this.value.arrayValue,t)}}class xc extends hc{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Yu(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>$u(this.value.arrayValue,e))}}class Ic{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.dt=null}}function Cc(e){return new Ic(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Nc(e){const t=Ol(e);if(null===t.dt){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>gc(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),pu(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Ku(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Ku(e)).join(",")),t.dt=e}return t.dt}function Ac(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!uc(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!yc(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ac(e.startAt,t.startAt)&&ac(e.endAt,t.endAt)}function Dc(e){return nu.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Rc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.wt=null,this._t=null,this.startAt,this.endAt}}function Pc(e,t,n,r,i,s,o,a){return new Rc(e,t,n,r,i,s,o,a)}function Oc(e){return new Rc(e)}function Lc(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Mc(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Fc(e){for(const t of e.filters){const e=t.getFirstInequalityField();if(null!==e)return e}return null}function jc(e){return null!==e.collectionGroup}function Uc(e){const t=Ol(e);if(null===t.wt){t.wt=[];const e=Fc(t),n=Mc(t);if(null!==e&&null===n)e.isKeyField()||t.wt.push(new lc(e)),t.wt.push(new lc(tu.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.wt.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new lc(tu.keyField(),e))}}}return t.wt}function Vc(e){const t=Ol(e);if(!t._t)if("F"===t.limitType)t._t=Cc(t.path,t.collectionGroup,Uc(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const i of Uc(t)){const t="desc"===i.dir?"asc":"desc";e.push(new lc(i.field,t))}const n=t.endAt?new sc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new sc(t.startAt.position,t.startAt.inclusive):null;t._t=Cc(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}return t._t}function zc(e,t){t.getFirstInequalityField(),Fc(e);const n=e.filters.concat([t]);return new Rc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Bc(e,t,n){return new Rc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function $c(e,t){return Ac(Vc(e),Vc(t))&&e.limitType===t.limitType}function qc(e){return`${Nc(Vc(e))}|lt:${e.limitType}`}function Hc(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>vc(e)).join(", ")}]`),pu(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e)).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Ku(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Ku(e)).join(",")),`Target(${t})`}(Vc(e))}; limitType=${e.limitType})`}function Kc(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):nu.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Uc(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=oc(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Uc(e),t))&&!(e.endAt&&!function(e,t,n){const r=oc(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Uc(e),t))}(e,t)}function Wc(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Gc(e){return(t,n)=>{let r=!1;for(const i of Uc(e)){const e=Qc(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Qc(e,t,n){const r=e.field.isKeyField()?nu.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?qu(r,i):Rl()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Rl()}}class Yc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Eu(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return Su(this.inner)}size(){return this.innerSize}}const Xc=new ku(nu.comparator);function Jc(){return Xc}const Zc=new ku(nu.comparator);function eh(){let e=Zc;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function th(e){let t=Zc;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function nh(){return ih()}function rh(){return ih()}function ih(){return new Yc(e=>e.toString(),(e,t)=>e.isEqual(t))}const sh=new ku(nu.comparator),oh=new xu(nu.comparator);function ah(){let e=oh;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const lh=new xu(Gl);function uh(){return lh}function ch(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mu(t)?"-0":t}}function hh(e){return{integerValue:""+e}}function dh(e,t){return gu(t)?hh(t):ch(e,t)}class fh{constructor(){this._=void 0}}function ph(e,t,n){return e instanceof yh?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Lu(t)&&(t=Mu(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof vh?bh(e,t):e instanceof wh?Eh(e,t):function(e,t){const n=gh(e,t),r=kh(n)+kh(e.gt);return Qu(n)&&Qu(e.gt)?hh(r):ch(e.serializer,r)}(e,t)}function mh(e,t,n){return e instanceof vh?bh(e,t):e instanceof wh?Eh(e,t):n}function gh(e,t){return e instanceof Sh?Qu(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class yh extends fh{}class vh extends fh{constructor(e){super(),this.elements=e}}function bh(e,t){const n=_h(t);for(const r of e.elements)n.some(e=>Bu(e,r))||n.push(r);return{arrayValue:{values:n}}}class wh extends fh{constructor(e){super(),this.elements=e}}function Eh(e,t){let n=_h(t);for(const r of e.elements)n=n.filter(e=>!Bu(e,r));return{arrayValue:{values:n}}}class Sh extends fh{constructor(e,t){super(),this.serializer=e,this.gt=t}}function kh(e){return Pu(e.integerValue||e.doubleValue)}function _h(e){return Yu(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Th{constructor(e,t){this.version=e,this.transformResults=t}}class xh{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new xh}static exists(e){return new xh(void 0,e)}static updateTime(e){return new xh(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ih(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Ch{}function Nh(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Uh(e.key,xh.none()):new Oh(e.key,e.data,xh.none());{const n=e.data,r=nc.empty();let i=new xu(tu.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Lh(e.key,r,new Cu(i.toArray()),xh.none())}}function Ah(e,t,n){e instanceof Oh?function(e,t,n){const r=e.value.clone(),i=Fh(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Lh?function(e,t,n){if(!Ih(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Fh(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Mh(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Dh(e,t,n,r){return e instanceof Oh?function(e,t,n,r){if(!Ih(e.precondition,t))return n;const i=e.value.clone(),s=jh(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Lh?function(e,t,n,r){if(!Ih(e.precondition,t))return n;const i=jh(e.fieldTransforms,r,t),s=t.data;return s.setAll(Mh(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return Ih(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Rh(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=gh(r.transform,e||null);null!=i&&(null===n&&(n=nc.empty()),n.set(r.field,i))}return n||null}function Ph(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Ql(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof vh&&t instanceof vh||e instanceof wh&&t instanceof wh?Ql(e.elements,t.elements,Bu):e instanceof Sh&&t instanceof Sh?Bu(e.gt,t.gt):e instanceof yh&&t instanceof yh}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Oh extends Ch{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Lh extends Ch{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Mh(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Fh(e,t,n){const r=new Map;Pl(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,mh(o,a,n[i]))}return r}function jh(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,ph(e,s,t))}return r}class Uh extends Ch{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Vh extends Ch{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class zh{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Ah(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Dh(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Dh(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=rh();return this.mutations.forEach(r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=Nh(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(Xl.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ah())}isEqual(e){return this.batchId===e.batchId&&Ql(this.mutations,e.mutations,(e,t)=>Ph(e,t))&&Ql(this.baseMutations,e.baseMutations,(e,t)=>Ph(e,t))}}class Bh{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Pl(e.mutations.length===n.length);let r=sh;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Bh(e,t,n,r)}}class $h{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class qh{constructor(e,t){this.count=e,this.unchangedNames=t}}var Hh,Kh;function Wh(e){switch(e){default:return Rl();case Ll.CANCELLED:case Ll.UNKNOWN:case Ll.DEADLINE_EXCEEDED:case Ll.RESOURCE_EXHAUSTED:case Ll.INTERNAL:case Ll.UNAVAILABLE:case Ll.UNAUTHENTICATED:return!1;case Ll.INVALID_ARGUMENT:case Ll.NOT_FOUND:case Ll.ALREADY_EXISTS:case Ll.PERMISSION_DENIED:case Ll.FAILED_PRECONDITION:case Ll.ABORTED:case Ll.OUT_OF_RANGE:case Ll.UNIMPLEMENTED:case Ll.DATA_LOSS:return!0}}function Gh(e){if(void 0===e)return Nl("GRPC error has no .code"),Ll.UNKNOWN;switch(e){case Hh.OK:return Ll.OK;case Hh.CANCELLED:return Ll.CANCELLED;case Hh.UNKNOWN:return Ll.UNKNOWN;case Hh.DEADLINE_EXCEEDED:return Ll.DEADLINE_EXCEEDED;case Hh.RESOURCE_EXHAUSTED:return Ll.RESOURCE_EXHAUSTED;case Hh.INTERNAL:return Ll.INTERNAL;case Hh.UNAVAILABLE:return Ll.UNAVAILABLE;case Hh.UNAUTHENTICATED:return Ll.UNAUTHENTICATED;case Hh.INVALID_ARGUMENT:return Ll.INVALID_ARGUMENT;case Hh.NOT_FOUND:return Ll.NOT_FOUND;case Hh.ALREADY_EXISTS:return Ll.ALREADY_EXISTS;case Hh.PERMISSION_DENIED:return Ll.PERMISSION_DENIED;case Hh.FAILED_PRECONDITION:return Ll.FAILED_PRECONDITION;case Hh.ABORTED:return Ll.ABORTED;case Hh.OUT_OF_RANGE:return Ll.OUT_OF_RANGE;case Hh.UNIMPLEMENTED:return Ll.UNIMPLEMENTED;case Hh.DATA_LOSS:return Ll.DATA_LOSS;default:return Rl()}}(Kh=Hh||(Hh={}))[Kh.OK=0]="OK",Kh[Kh.CANCELLED=1]="CANCELLED",Kh[Kh.UNKNOWN=2]="UNKNOWN",Kh[Kh.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Kh[Kh.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Kh[Kh.NOT_FOUND=5]="NOT_FOUND",Kh[Kh.ALREADY_EXISTS=6]="ALREADY_EXISTS",Kh[Kh.PERMISSION_DENIED=7]="PERMISSION_DENIED",Kh[Kh.UNAUTHENTICATED=16]="UNAUTHENTICATED",Kh[Kh.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Kh[Kh.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Kh[Kh.ABORTED=10]="ABORTED",Kh[Kh.OUT_OF_RANGE=11]="OUT_OF_RANGE",Kh[Kh.UNIMPLEMENTED=12]="UNIMPLEMENTED",Kh[Kh.INTERNAL=13]="INTERNAL",Kh[Kh.UNAVAILABLE=14]="UNAVAILABLE",Kh[Kh.DATA_LOSS=15]="DATA_LOSS";class Qh{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Yh}static getOrCreateInstance(){return null===Yh&&(Yh=new Qh),Yh}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let Yh=null;function Xh(){return new TextEncoder}const Jh=new Sl([4294967295,4294967295],0);function Zh(e){const t=Xh().encode(e),n=new El;return n.update(t),new Uint8Array(n.digest())}function ed(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Sl([n,r],0),new Sl([i,s],0)]}class td{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new nd(`Invalid padding: ${t}`);if(n<0)throw new nd(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new nd(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new nd(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=Sl.fromNumber(this.It)}Et(e,t,n){let r=e.add(t.multiply(Sl.fromNumber(n)));return 1===r.compare(Jh)&&(r=new Sl([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=Zh(e),[n,r]=ed(t);for(let i=0;i<this.hashCount;i++){const e=this.Et(n,r,i);if(!this.At(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new td(i,r,t);return n.forEach(e=>s.insert(e)),s}insert(e){if(0===this.It)return;const t=Zh(e),[n,r]=ed(t);for(let i=0;i<this.hashCount;i++){const e=this.Et(n,r,i);this.Rt(e)}}Rt(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class nd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class rd{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,id.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new rd(Xl.min(),r,new ku(Gl),Jc(),ah())}}class id{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new id(n,t,ah(),ah(),ah())}}class sd{constructor(e,t,n,r){this.Pt=e,this.removedTargetIds=t,this.key=n,this.bt=r}}class od{constructor(e,t){this.targetId=e,this.Vt=t}}class ad{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Au.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class ld{constructor(){this.St=0,this.Dt=hd(),this.Ct=Au.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=ah(),t=ah(),n=ah();return this.Dt.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Rl()}}),new id(this.Ct,this.xt,e,t,n)}Ft(){this.Nt=!1,this.Dt=hd()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class ud{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Jc(),this.zt=cd(),this.Wt=new ku(Gl)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const n=this.Zt(t);switch(e.state){case 0:this.te(t)&&n.$t(e.resumeToken);break;case 1:n.Ut(),n.kt||n.Ft(),n.$t(e.resumeToken);break;case 2:n.Ut(),n.kt||this.removeTarget(t);break;case 3:this.te(t)&&(n.Kt(),n.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),n.$t(e.resumeToken));break;default:Rl()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((e,n)=>{this.te(n)&&t(n)})}ne(e){var t;const n=e.targetId,r=e.Vt.count,i=this.se(n);if(i){const s=i.target;if(Dc(s))if(0===r){const e=new nu(s.path);this.Yt(n,e,ic.newNoDocument(e,Xl.min()))}else Pl(1===r);else{const i=this.ie(n);if(i!==r){const r=this.re(e,i);if(0!==r){this.ee(n);const e=2===r?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,e)}null===(t=Qh.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var r,i,s,o,a,l;const u={localCacheCount:t,existenceFilterCount:n.count},c=n.unchangedNames;return c&&(u.bloomFilter={applied:0===e,hashCount:null!==(r=null==c?void 0:c.hashCount)&&void 0!==r?r:0,bitmapLength:null!==(o=null===(s=null===(i=null==c?void 0:c.bits)||void 0===i?void 0:i.bitmap)||void 0===s?void 0:s.length)&&void 0!==o?o:0,padding:null!==(l=null===(a=null==c?void 0:c.bits)||void 0===a?void 0:a.padding)&&void 0!==l?l:0}),u}(r,i,e.Vt))}}}}re(e,t){const{unchangedNames:n,count:r}=e.Vt;if(!n||!n.bits)return 1;const{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=n;let a,l;try{a=Ou(i).toUint8Array()}catch(e){if(e instanceof Nu)return Al("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw e}try{l=new td(a,s,o)}catch(e){return Al(e instanceof nd?"BloomFilter error: ":"Applying bloom filter failed: ",e),1}return 0===l.It?1:r!==t-this.oe(e.targetId,l)?2:0}oe(e,t){const n=this.Gt.getRemoteKeysForTarget(e);let r=0;return n.forEach(n=>{const i=this.Gt.ue(),s=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;t.vt(s)||(this.Yt(e,n,null),r++)}),r}ce(e){const t=new Map;this.Qt.forEach((n,r)=>{const i=this.se(r);if(i){if(n.current&&Dc(i.target)){const t=new nu(i.target.path);null!==this.jt.get(t)||this.ae(r,t)||this.Yt(r,t,ic.newNoDocument(t,e))}n.Mt&&(t.set(r,n.Ot()),n.Ft())}});let n=ah();this.zt.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.se(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.jt.forEach((t,n)=>n.setReadTime(e));const r=new rd(e,t,this.Wt,this.jt,n);return this.jt=Jc(),this.zt=cd(),this.Wt=new ku(Gl),r}Jt(e,t){if(!this.te(e))return;const n=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,n),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,n){if(!this.te(e))return;const r=this.Zt(e);this.ae(e,t)?r.Bt(t,1):r.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),n&&(this.jt=this.jt.insert(t,n))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new ld,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new xu(Gl),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Cl("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new ld),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function cd(){return new ku(nu.comparator)}function hd(){return new ku(nu.comparator)}const dd={asc:"ASCENDING",desc:"DESCENDING"},fd={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},pd={and:"AND",or:"OR"};class md{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function gd(e,t){return e.useProto3Json||pu(t)?t:{value:t}}function yd(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function vd(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function bd(e,t){return yd(e,t.toTimestamp())}function wd(e){return Pl(!!e),Xl.fromTimestamp(function(e){const t=Ru(e);return new Yl(t.seconds,t.nanos)}(e))}function Ed(e,t){return function(e){return new Zl(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Sd(e){const t=Zl.fromString(e);return Pl(Bd(t)),t}function kd(e,t){return Ed(e.databaseId,t.path)}function _d(e,t){const n=Sd(t);if(n.get(1)!==e.databaseId.projectId)throw new Ml(Ll.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Ml(Ll.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new nu(Cd(n))}function Td(e,t){return Ed(e.databaseId,t)}function xd(e){const t=Sd(e);return 4===t.length?Zl.emptyPath():Cd(t)}function Id(e){return new Zl(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Cd(e){return Pl(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Nd(e,t,n){return{name:kd(e,t),fields:n.value.mapValue.fields}}function Ad(e,t){let n;if(t instanceof Oh)n={update:Nd(e,t.key,t.value)};else if(t instanceof Uh)n={delete:kd(e,t.key)};else if(t instanceof Lh)n={update:Nd(e,t.key,t.data),updateMask:zd(t.fieldMask)};else{if(!(t instanceof Vh))return Rl();n={verify:kd(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof yh)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof vh)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof wh)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Sh)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw Rl()}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:bd(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Rl()}(e,t.precondition)),n}function Dd(e,t){return{documents:[Td(e,t.path)]}}function Rd(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Td(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Td(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0!==e.length)return Vd(dc.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const s=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:jd(e.field),direction:Ld(e.dir)}}(e))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=gd(e,t.limit);var a;return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt={before:(a=t.startAt).inclusive,values:a.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Pd(e){let t=xd(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Pl(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Od(e);return t instanceof dc&&pc(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(e=>function(e){return new lc(Ud(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,pu(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new sc(n,t)}(n.startAt));let u=null;return n.endAt&&(u=function(e){const t=!e.before,n=e.values||[];return new sc(n,t)}(n.endAt)),Pc(t,i,o,s,a,"F",l,u)}function Od(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Ud(e.unaryFilter.field);return hc.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Ud(e.unaryFilter.field);return hc.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Ud(e.unaryFilter.field);return hc.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Ud(e.unaryFilter.field);return hc.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Rl()}}(e):void 0!==e.fieldFilter?function(e){return hc.create(Ud(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Rl()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return dc.create(e.compositeFilter.filters.map(e=>Od(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Rl()}}(e.compositeFilter.op))}(e):Rl()}function Ld(e){return dd[e]}function Md(e){return fd[e]}function Fd(e){return pd[e]}function jd(e){return{fieldPath:e.canonicalString()}}function Ud(e){return tu.fromServerFormat(e.fieldPath)}function Vd(e){return e instanceof hc?function(e){if("=="===e.op){if(Ju(e.value))return{unaryFilter:{field:jd(e.field),op:"IS_NAN"}};if(Xu(e.value))return{unaryFilter:{field:jd(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Ju(e.value))return{unaryFilter:{field:jd(e.field),op:"IS_NOT_NAN"}};if(Xu(e.value))return{unaryFilter:{field:jd(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jd(e.field),op:Md(e.op),value:e.value}}}(e):e instanceof dc?function(e){const t=e.getFilters().map(e=>Vd(e));return 1===t.length?t[0]:{compositeFilter:{op:Fd(e.op),filters:t}}}(e):Rl()}function zd(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Bd(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class $d{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Xl.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Xl.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Au.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new $d(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new $d(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new $d(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new $d(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class qd{constructor(e){this.fe=e}}function Hd(e){const t=Pd({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Bc(t,t.limit,"L"):t}class Kd{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Pu(e.integerValue));else if("doubleValue"in e){const n=Pu(e.doubleValue);isNaN(n)?this.ye(t,13):(this.ye(t,15),mu(n)?t.pe(0):t.pe(n))}else if("timestampValue"in e){const n=e.timestampValue;this.ye(t,20),"string"==typeof n?t.Ie(n):(t.Ie(`${n.seconds||""}`),t.pe(n.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Ou(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ye(t,45),t.pe(n.latitude||0),t.pe(n.longitude||0)}else"mapValue"in e?tc(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):Rl()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const n=e.fields||{};this.ye(t,55);for(const r of Object.keys(n))this.Te(r,t),this.me(n[r],t)}Pe(e,t){const n=e.values||[];this.ye(t,50);for(const r of n)this.me(r,t)}ve(e,t){this.ye(t,37),nu.fromName(e).path.forEach(e=>{this.ye(t,60),this.be(e,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}Kd.Ve=new Kd;class Wd{constructor(){this.rn=new Gd}addToCollectionParentIndex(e,t){return this.rn.add(t),hu.resolve()}getCollectionParents(e,t){return hu.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return hu.resolve()}deleteFieldIndex(e,t){return hu.resolve()}getDocumentsMatchingTarget(e,t){return hu.resolve(null)}getIndexType(e,t){return hu.resolve(0)}getFieldIndexes(e,t){return hu.resolve([])}getNextCollectionGroupToUpdate(e){return hu.resolve(null)}getMinOffset(e,t){return hu.resolve(ou.min())}getMinOffsetFromCollectionGroup(e,t){return hu.resolve(ou.min())}updateCollectionGroup(e,t,n){return hu.resolve()}updateIndexEntries(e,t){return hu.resolve()}}class Gd{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new xu(Zl.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new xu(Zl.comparator)).toArray()}}new Uint8Array(0);class Qd{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Qd(e,Qd.DEFAULT_COLLECTION_PERCENTILE,Qd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Qd.DEFAULT_COLLECTION_PERCENTILE=10,Qd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qd.DEFAULT=new Qd(41943040,Qd.DEFAULT_COLLECTION_PERCENTILE,Qd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qd.DISABLED=new Qd(-1,0,0);class Yd{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Yd(0)}static Mn(){return new Yd(-1)}}class Xd{constructor(){this.changes=new Yc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ic.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?hu.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Jd{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Zd{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Dh(n.mutation,e,Cu.empty(),Yl.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,ah()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ah();const r=nh();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=eh();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=nh();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,ah()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=Jc();const s=ih(),o=ih();return t.forEach((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Lh)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Dh(o.mutation,t,o.mutation.getFieldMask(),Yl.now())):s.set(t.key,Cu.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var n;return o.set(e,new Jd(t,null!==(n=s.get(e))&&void 0!==n?n:null))}),o))}recalculateAndSaveOverlays(e,t){const n=ih();let r=new ku((e,t)=>e-t),i=ah();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||Cu.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||ah()).add(e);r=r.insert(i.batchId,a)})}).next(()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,u=rh();l.forEach(e=>{if(!i.has(e)){const r=Nh(t.get(e),n.get(e));null!==r&&u.set(e,r),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,a,u))}return hu.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n){return function(e){return nu.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):jc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):hu.resolve(nh());let o=-1,a=i;return s.next(t=>hu.forEach(t,(t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?hu.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,a,t,ah())).next(e=>({batchId:o,changes:th(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new nu(t)).next(e=>{let t=eh();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n){const r=t.collectionGroup;let i=eh();return this.indexManager.getCollectionParents(e,r).next(s=>hu.forEach(s,s=>{const o=function(e,t){return new Rc(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(r));return this.getDocumentsMatchingCollectionQuery(e,o,n).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,t,n){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(i=>(r=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r))).next(e=>{r.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,ic.newInvalidDocument(r)))});let n=eh();return e.forEach((e,i)=>{const s=r.get(e);void 0!==s&&Dh(s.mutation,i,Cu.empty(),Yl.now()),Kc(t,i)&&(n=n.insert(e,i))}),n})}}class ef{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return hu.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var n;return this.cs.set(t.id,{id:(n=t).id,version:n.version,createTime:wd(n.createTime)}),hu.resolve()}getNamedQuery(e,t){return hu.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,function(e){return{name:e.name,query:Hd(e.bundledQuery),readTime:wd(e.readTime)}}(t)),hu.resolve()}}class tf{constructor(){this.overlays=new ku(nu.comparator),this.ls=new Map}getOverlay(e,t){return hu.resolve(this.overlays.get(t))}getOverlays(e,t){const n=nh();return hu.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.we(e,t,r)}),hu.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.ls.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.ls.delete(n)),hu.resolve()}getOverlaysForCollection(e,t,n){const r=nh(),i=t.length+1,s=new nu(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return hu.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new ku((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=nh(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=nh(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>o.set(e,t)),!(o.size()>=r)););return hu.resolve(o)}we(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.ls.get(r.largestBatchId).delete(n.key);this.ls.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new $h(t,n));let i=this.ls.get(t);void 0===i&&(i=ah(),this.ls.set(t,i)),this.ls.set(t,i.add(n.key))}}class nf{constructor(){this.fs=new xu(rf.ds),this.ws=new xu(rf._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const n=new rf(e,t);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}gs(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.ys(new rf(e,t))}ps(e,t){e.forEach(e=>this.removeReference(e,t))}Is(e){const t=new nu(new Zl([])),n=new rf(t,e),r=new rf(t,e+1),i=[];return this.ws.forEachInRange([n,r],e=>{this.ys(e),i.push(e.key)}),i}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new nu(new Zl([])),n=new rf(t,e),r=new rf(t,e+1);let i=ah();return this.ws.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new rf(e,0),n=this.fs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class rf{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return nu.comparator(e.key,t.key)||Gl(e.As,t.As)}static _s(e,t){return Gl(e.As,t.As)||nu.comparator(e.key,t.key)}}class sf{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new xu(rf.ds)}checkEmpty(e){return hu.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new zh(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.Rs=this.Rs.add(new rf(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return hu.resolve(s)}lookupMutationBatch(e,t){return hu.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.bs(n),i=r<0?0:r;return hu.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return hu.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return hu.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new rf(t,0),r=new rf(t,Number.POSITIVE_INFINITY),i=[];return this.Rs.forEachInRange([n,r],e=>{const t=this.Ps(e.As);i.push(t)}),hu.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new xu(Gl);return t.forEach(e=>{const t=new rf(e,0),r=new rf(e,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([t,r],e=>{n=n.add(e.As)})}),hu.resolve(this.Vs(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;nu.isDocumentKey(i)||(i=i.child(""));const s=new rf(new nu(i),0);let o=new xu(Gl);return this.Rs.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.As)),!0)},s),hu.resolve(this.Vs(o))}Vs(e){const t=[];return e.forEach(e=>{const n=this.Ps(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){Pl(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let n=this.Rs;return hu.forEach(t.mutations,r=>{const i=new rf(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Rs=n})}Cn(e){}containsKey(e,t){const n=new rf(t,0),r=this.Rs.firstAfterOrEqual(n);return hu.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,hu.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class of{constructor(e){this.Ds=e,this.docs=new ku(nu.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Ds(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return hu.resolve(n?n.document.mutableCopy():ic.newInvalidDocument(t))}getEntries(e,t){let n=Jc();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():ic.newInvalidDocument(e))}),hu.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Jc();const s=t.path,o=new nu(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||au(su(o),n)<=0||(r.has(o.key)||Kc(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return hu.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Rl()}Cs(e,t){return hu.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new af(this)}getSize(e){return hu.resolve(this.size)}}class af extends Xd{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.os.addEntry(e,r)):this.os.removeEntry(n)}),hu.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class lf{constructor(e){this.persistence=e,this.xs=new Yc(e=>Nc(e),Ac),this.lastRemoteSnapshotVersion=Xl.min(),this.highestTargetId=0,this.Ns=0,this.ks=new nf,this.targetCount=0,this.Ms=Yd.kn()}forEachTarget(e,t){return this.xs.forEach((e,n)=>t(n)),hu.resolve()}getLastRemoteSnapshotVersion(e){return hu.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return hu.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),hu.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ns&&(this.Ns=t),hu.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Yd(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,hu.resolve()}updateTargetData(e,t){return this.Fn(t),hu.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,hu.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.xs.forEach((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.xs.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),hu.waitFor(i).next(()=>r)}getTargetCount(e){return hu.resolve(this.targetCount)}getTargetData(e,t){const n=this.xs.get(t)||null;return hu.resolve(n)}addMatchingKeys(e,t,n){return this.ks.gs(t,n),hu.resolve()}removeMatchingKeys(e,t,n){this.ks.ps(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),hu.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),hu.resolve()}getMatchingKeysForTargetId(e,t){const n=this.ks.Es(t);return hu.resolve(n)}containsKey(e,t){return hu.resolve(this.ks.containsKey(t))}}class uf{constructor(e,t){this.$s={},this.overlays={},this.Os=new fu(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new lf(this),this.indexManager=new Wd,this.remoteDocumentCache=function(e){return new of(e)}(e=>this.referenceDelegate.Ls(e)),this.serializer=new qd(t),this.qs=new ef(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new tf,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.$s[e.toKey()];return n||(n=new sf(t,this.referenceDelegate),this.$s[e.toKey()]=n),n}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,n){Cl("MemoryPersistence","Starting transaction:",e);const r=new cf(this.Os.next());return this.referenceDelegate.Us(),n(r).next(e=>this.referenceDelegate.Ks(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Gs(e,t){return hu.or(Object.values(this.$s).map(n=>()=>n.containsKey(e,t)))}}class cf extends uu{constructor(e){super(),this.currentSequenceNumber=e}}class hf{constructor(e){this.persistence=e,this.Qs=new nf,this.js=null}static zs(e){return new hf(e)}get Ws(){if(this.js)return this.js;throw Rl()}addReference(e,t,n){return this.Qs.addReference(n,t),this.Ws.delete(n.toString()),hu.resolve()}removeReference(e,t,n){return this.Qs.removeReference(n,t),this.Ws.add(n.toString()),hu.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),hu.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(e=>this.Ws.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.Ws.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return hu.forEach(this.Ws,n=>{const r=nu.fromPath(n);return this.Hs(e,r).next(e=>{e||t.removeEntry(r,Xl.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(e=>{e?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return hu.or([()=>hu.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class df{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Fi=n,this.Bi=r}static Li(e,t){let n=ah(),r=ah();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new df(e,t.fromCache,n,r)}}class ff{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,n,r){return this.Ki(e,t).next(i=>i||this.Gi(e,t,r,n)).next(n=>n||this.Qi(e,t))}Ki(e,t){if(Lc(t))return hu.resolve(null);let n=Vc(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Bc(t,null,"F"),n=Vc(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=ah(...r);return this.Ui.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const s=this.ji(t,r);return this.zi(t,s,i,n.readTime)?this.Ki(e,Bc(t,null,"F")):this.Wi(e,s,t,n)}))})))}Gi(e,t,n,r){return Lc(t)||r.isEqual(Xl.min())?this.Qi(e,t):this.Ui.getDocuments(e,n).next(i=>{const s=this.ji(t,i);return this.zi(t,s,n,r)?this.Qi(e,t):(Il()<=O.DEBUG&&Cl("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Hc(t)),this.Wi(e,s,t,iu(r,-1)))})}ji(e,t){let n=new xu(Gc(e));return t.forEach((t,r)=>{Kc(e,r)&&(n=n.add(r))}),n}zi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Qi(e,t){return Il()<=O.DEBUG&&Cl("QueryEngine","Using full collection scan to execute query:",Hc(t)),this.Ui.getDocumentsMatchingQuery(e,t,ou.min())}Wi(e,t,n,r){return this.Ui.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}class pf{constructor(e,t,n,r){this.persistence=e,this.Hi=t,this.serializer=r,this.Ji=new ku(Gl),this.Yi=new Yc(e=>Nc(e),Ac),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(n)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Zd(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function mf(e,t,n,r){return new pf(e,t,n,r)}async function gf(e,t){const n=Ol(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.tr(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],s=[];let o=ah();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next(e=>({er:e,removedBatchIds:i,addedBatchIds:s}))})})}function yf(e){const t=Ol(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Bs.getLastRemoteSnapshotVersion(e))}function vf(e,t,n){let r=ah(),i=ah();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=Jc();return n.forEach((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(Xl.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):Cl("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)}),{nr:r,sr:i}})}function bf(e,t){const n=Ol(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function wf(e,t){const n=Ol(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Bs.getTargetData(e,t).next(i=>i?(r=i,hu.resolve(r)):n.Bs.allocateTargetId(e).next(i=>(r=new $d(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Bs.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ji.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e})}async function Ef(e,t,n){const r=Ol(e),i=r.Ji.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!du(e))throw e;Cl("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.Ji=r.Ji.remove(t),r.Yi.delete(i.target)}function Sf(e,t,n){const r=Ol(e);let i=Xl.min(),s=ah();return r.persistence.runTransaction("Execute query","readonly",e=>function(e,t,n){const r=Ol(e),i=r.Yi.get(n);return void 0!==i?hu.resolve(r.Ji.get(i)):r.Bs.getTargetData(t,n)}(r,e,Vc(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.Hi.getDocumentsMatchingQuery(e,t,n?i:Xl.min(),n?s:ah())).next(e=>(kf(r,Wc(t),e),{documents:e,ir:s})))}function kf(e,t,n){let r=e.Xi.get(t)||Xl.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Xi.set(t,r)}class _f{constructor(){this.activeTargetIds=uh()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Tf{constructor(){this.Hr=new _f,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,n){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new _f,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class xf{Yr(e){}shutdown(){}}class If{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Cl("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Cl("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Cf=null;function Nf(){return null===Cf?Cf=268435456+Math.round(2147483648*Math.random()):Cf++,"0x"+Cf.toString(16)}const Af={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Df{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Rf="WebChannelConnection";class Pf extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.mo=t+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,n,r,i){const s=Nf(),o=this.To(e,t);Cl("RestConnection",`Sending RPC '${e}' ${s}:`,o,n);const a={};return this.Eo(a,r,i),this.Ao(e,o,a,n).then(t=>(Cl("RestConnection",`Received RPC '${e}' ${s}: `,t),t),t=>{throw Al("RestConnection",`RPC '${e}' ${s} failed with error: `,t,"url: ",o,"request:",n),t})}vo(e,t,n,r,i,s){return this.Io(e,t,n,r,i)}Eo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Tl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}To(e,t){const n=Af[e];return`${this.mo}/v1/${t}:${n}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,n,r){const i=Nf();return new Promise((s,o)=>{const a=new wl;a.setWithCredentials(!0),a.listenOnce(ml.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case pl.NO_ERROR:const t=a.getResponseJson();Cl(Rf,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),s(t);break;case pl.TIMEOUT:Cl(Rf,`RPC '${e}' ${i} timed out`),o(new Ml(Ll.DEADLINE_EXCEEDED,"Request time out"));break;case pl.HTTP_ERROR:const n=a.getStatus();if(Cl(Rf,`RPC '${e}' ${i} failed with status:`,n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Ll).indexOf(t)>=0?t:Ll.UNKNOWN}(t.status);o(new Ml(e,t.message))}else o(new Ml(Ll.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Ml(Ll.UNAVAILABLE,"Connection failed."));break;default:Rl()}}finally{Cl(Rf,`RPC '${e}' ${i} completed.`)}});const l=JSON.stringify(r);Cl(Rf,`RPC '${e}' ${i} sending request:`,r),a.send(t,"POST",l,n,15)})}Ro(e,t,n){const r=Nf(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=dl(),o=fl(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.xmlHttpFactory=new vl({})),this.Eo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const u=i.join("");Cl(Rf,`Creating RPC '${e}' stream ${r}: ${u}`,a);const c=s.createWebChannel(u,a);let h=!1,d=!1;const f=new Df({ro:t=>{d?Cl(Rf,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(h||(Cl(Rf,`Opening RPC '${e}' stream ${r} transport.`),c.open(),h=!0),Cl(Rf,`RPC '${e}' stream ${r} sending:`,t),c.send(t))},oo:()=>c.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(c,bl.EventType.OPEN,()=>{d||Cl(Rf,`RPC '${e}' stream ${r} transport opened.`)}),p(c,bl.EventType.CLOSE,()=>{d||(d=!0,Cl(Rf,`RPC '${e}' stream ${r} transport closed`),f.wo())}),p(c,bl.EventType.ERROR,t=>{d||(d=!0,Al(Rf,`RPC '${e}' stream ${r} transport errored:`,t),f.wo(new Ml(Ll.UNAVAILABLE,"The operation could not be completed")))}),p(c,bl.EventType.MESSAGE,t=>{var n;if(!d){const i=t.data[0];Pl(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){Cl(Rf,`RPC '${e}' stream ${r} received error:`,o);const t=o.status;let n=function(e){const t=Hh[e];if(void 0!==t)return Gh(t)}(t),i=o.message;void 0===n&&(n=Ll.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.wo(new Ml(n,i)),c.close()}else Cl(Rf,`RPC '${e}' stream ${r} received:`,i),f._o(i)}}),p(o,gl.STAT_EVENT,t=>{t.stat===yl.PROXY?Cl(Rf,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===yl.NOPROXY&&Cl(Rf,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{f.fo()},0),f}}function Of(){return"undefined"!=typeof document?document:null}function Lf(e){return new md(e,!0)}class Mf{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ii=e,this.timerId=t,this.Po=n,this.bo=r,this.Vo=i,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),n=Math.max(0,Date.now()-this.Co),r=Math.max(0,t-n);r>0&&Cl("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,r,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class Ff{constructor(e,t,n,r,i,s,o,a){this.ii=e,this.$o=n,this.Oo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new Mf(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,t){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==e?this.qo.reset():t&&t.code===Ll.RESOURCE_EXHAUSTED?(Nl(t.toString()),Nl("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):t&&t.code===Ll.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(t)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.Fo===t&&this.Zo(n,r)},t=>{e(()=>{const e=new Ml(Ll.UNKNOWN,"Fetching auth token failed: "+t.message);return this.tu(e)})})}Zo(e,t){const n=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{n(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(e=>{n(()=>this.tu(e))}),this.stream.onMessage(e=>{n(()=>this.onMessage(e))})}Go(){this.state=5,this.qo.No(async()=>{this.state=0,this.start()})}tu(e){return Cl("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Cl("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class jf extends Ff{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Rl()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Pl(void 0===t||"string"==typeof t),Au.fromBase64String(t||"")):(Pl(void 0===t||t instanceof Uint8Array),Au.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Ll.UNKNOWN:Gh(e.code);return new Ml(t,e.message||"")}(o);n=new ad(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=_d(e,r.document.name),s=wd(r.document.updateTime),o=r.document.createTime?wd(r.document.createTime):Xl.min(),a=new nc({mapValue:{fields:r.document.fields}}),l=ic.newFoundDocument(i,s,o,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new sd(u,c,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=_d(e,r.document),s=r.readTime?wd(r.readTime):Xl.min(),o=ic.newNoDocument(i,s),a=r.removedTargetIds||[];n=new sd([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=_d(e,r.document),s=r.removedTargetIds||[];n=new sd([],s,i,null)}else{if(!("filter"in t))return Rl();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new qh(r,i),o=e.targetId;n=new od(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Xl.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Xl.min():t.readTime?wd(t.readTime):Xl.min()}(e);return this.listener.nu(t,n)}su(e){const t={};t.database=Id(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Dc(r)?{documents:Dd(e,r)}:{query:Rd(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=vd(e,t.resumeToken);const r=gd(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Xl.min())>0){n.readTime=yd(e,t.snapshotVersion.toTimestamp());const r=gd(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Rl()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Wo(t)}iu(e){const t={};t.database=Id(this.serializer),t.removeTarget=e,this.Wo(t)}}class Uf extends Ff{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(Pl(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function(e,t){return e&&e.length>0?(Pl(void 0!==t),e.map(e=>function(e,t){let n=e.updateTime?wd(e.updateTime):wd(t);return n.isEqual(Xl.min())&&(n=wd(t)),new Th(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=wd(e.commitTime);return this.listener.cu(n,t)}return Pl(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Id(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Ad(this.serializer,e))};this.Wo(t)}}class Vf extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.lu=!1}fu(){if(this.lu)throw new Ml(Ll.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,n){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(r=>{let[i,s]=r;return this.connection.Io(e,t,n,i,s)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Ll.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Ml(Ll.UNKNOWN,e.toString())})}vo(e,t,n,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[s,o]=i;return this.connection.vo(e,t,n,s,o,r)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Ll.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Ml(Ll.UNKNOWN,e.toString())})}terminate(){this.lu=!0}}class zf{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Nl(t),this.mu=!1):Cl("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class Bf{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=i,this.Pu.Yr(e=>{n.enqueueAndForget(async()=>{Xf(this)&&(Cl("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Ol(e);t.vu.add(4),await qf(t),t.bu.set("Unknown"),t.vu.delete(4),await $f(t)}(this))})}),this.bu=new zf(n,r)}}async function $f(e){if(Xf(e))for(const t of e.Ru)await t(!0)}async function qf(e){for(const t of e.Ru)await t(!1)}function Hf(e,t){const n=Ol(e);n.Au.has(t.targetId)||(n.Au.set(t.targetId,t),Yf(n)?Qf(n):mp(n).Ko()&&Wf(n,t))}function Kf(e,t){const n=Ol(e),r=mp(n);n.Au.delete(t),r.Ko()&&Gf(n,t),0===n.Au.size&&(r.Ko()?r.jo():Xf(n)&&n.bu.set("Unknown"))}function Wf(e,t){if(e.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Xl.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}mp(e).su(t)}function Gf(e,t){e.Vu.qt(t),mp(e).iu(t)}function Qf(e){e.Vu=new ud({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),le:t=>e.Au.get(t)||null,ue:()=>e.datastore.serializer.databaseId}),mp(e).start(),e.bu.gu()}function Yf(e){return Xf(e)&&!mp(e).Uo()&&e.Au.size>0}function Xf(e){return 0===Ol(e).vu.size}function Jf(e){e.Vu=void 0}async function Zf(e){e.Au.forEach((t,n)=>{Wf(e,t)})}async function ep(e,t){Jf(e),Yf(e)?(e.bu.Iu(t),Qf(e)):e.bu.set("Unknown")}async function tp(e,t,n){if(e.bu.set("Online"),t instanceof ad&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Au.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Au.delete(r),e.Vu.removeTarget(r))}(e,t)}catch(n){Cl("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await np(e,n)}else if(t instanceof sd?e.Vu.Ht(t):t instanceof od?e.Vu.ne(t):e.Vu.Xt(t),!n.isEqual(Xl.min()))try{const t=await yf(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Vu.ce(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Au.get(r);i&&e.Au.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Au.get(t);if(!r)return;e.Au.set(t,r.withResumeToken(Au.EMPTY_BYTE_STRING,r.snapshotVersion)),Gf(e,t);const i=new $d(r.target,t,n,r.sequenceNumber);Wf(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Cl("RemoteStore","Failed to raise snapshot:",t),await np(e,t)}}async function np(e,t,n){if(!du(t))throw t;e.vu.add(1),await qf(e),e.bu.set("Offline"),n||(n=()=>yf(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Cl("RemoteStore","Retrying IndexedDB access"),await n(),e.vu.delete(1),await $f(e)})}function rp(e,t){return t().catch(n=>np(e,n,t))}async function ip(e){const t=Ol(e),n=gp(t);let r=t.Eu.length>0?t.Eu[t.Eu.length-1].batchId:-1;for(;sp(t);)try{const e=await bf(t.localStore,r);if(null===e){0===t.Eu.length&&n.jo();break}r=e.batchId,op(t,e)}catch(e){await np(t,e)}ap(t)&&lp(t)}function sp(e){return Xf(e)&&e.Eu.length<10}function op(e,t){e.Eu.push(t);const n=gp(e);n.Ko()&&n.ou&&n.uu(t.mutations)}function ap(e){return Xf(e)&&!gp(e).Uo()&&e.Eu.length>0}function lp(e){gp(e).start()}async function up(e){gp(e).hu()}async function cp(e){const t=gp(e);for(const n of e.Eu)t.uu(n.mutations)}async function hp(e,t,n){const r=e.Eu.shift(),i=Bh.from(r,t,n);await rp(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await ip(e)}async function dp(e,t){t&&gp(e).ou&&await async function(e,t){if(Wh(n=t.code)&&n!==Ll.ABORTED){const n=e.Eu.shift();gp(e).Qo(),await rp(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await ip(e)}var n}(e,t),ap(e)&&lp(e)}async function fp(e,t){const n=Ol(e);n.asyncQueue.verifyOperationInProgress(),Cl("RemoteStore","RemoteStore received new credentials");const r=Xf(n);n.vu.add(3),await qf(n),r&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.vu.delete(3),await $f(n)}async function pp(e,t){const n=Ol(e);t?(n.vu.delete(2),await $f(n)):t||(n.vu.add(2),await qf(n),n.bu.set("Unknown"))}function mp(e){return e.Su||(e.Su=function(e,t,n){const r=Ol(e);return r.fu(),new jf(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:Zf.bind(null,e),ao:ep.bind(null,e),nu:tp.bind(null,e)}),e.Ru.push(async t=>{t?(e.Su.Qo(),Yf(e)?Qf(e):e.bu.set("Unknown")):(await e.Su.stop(),Jf(e))})),e.Su}function gp(e){return e.Du||(e.Du=function(e,t,n){const r=Ol(e);return r.fu(),new Uf(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:up.bind(null,e),ao:dp.bind(null,e),au:cp.bind(null,e),cu:hp.bind(null,e)}),e.Ru.push(async t=>{t?(e.Du.Qo(),await ip(e)):(await e.Du.stop(),e.Eu.length>0&&(Cl("RemoteStore",`Stopping write stream with ${e.Eu.length} pending writes`),e.Eu=[]))})),e.Du}class yp{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Fl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new yp(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ml(Ll.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vp(e,t){if(Nl("AsyncQueue",`${t}: ${e}`),du(e))return new Ml(Ll.UNAVAILABLE,`${t}: ${e}`);throw e}class bp{constructor(e){this.comparator=e?(t,n)=>e(t,n)||nu.comparator(t.key,n.key):(e,t)=>nu.comparator(e.key,t.key),this.keyedMap=eh(),this.sortedSet=new ku(this.comparator)}static emptySet(e){return new bp(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof bp))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new bp;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class wp{constructor(){this.Cu=new ku(nu.comparator)}track(e){const t=e.doc.key,n=this.Cu.get(t);n?0!==e.type&&3===n.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==n.type?this.Cu=this.Cu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Cu=this.Cu.remove(t):1===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):Rl():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,n)=>{e.push(n)}),e}}class Ep{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new Ep(e,t,bp.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$c(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Sp{constructor(){this.Nu=void 0,this.listeners=[]}}class kp{constructor(){this.queries=new Yc(e=>qc(e),$c),this.onlineState="Unknown",this.ku=new Set}}async function _p(e,t){const n=Ol(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new Sp),i)try{s.Nu=await n.onListen(r)}catch(e){const n=vp(e,`Initialization of query '${Hc(t.query)}' failed`);return void t.onError(n)}n.queries.set(r,s),s.listeners.push(t),t.Mu(n.onlineState),s.Nu&&t.$u(s.Nu)&&Cp(n)}async function Tp(e,t){const n=Ol(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.listeners.indexOf(t);e>=0&&(s.listeners.splice(e,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function xp(e,t){const n=Ol(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.listeners)e.$u(i)&&(r=!0);t.Nu=i}}r&&Cp(n)}function Ip(e,t,n){const r=Ol(e),i=r.queries.get(t);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(t)}function Cp(e){e.ku.forEach(e=>{e.next()})}class Np{constructor(e,t,n){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=n||{}}$u(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Ep(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.Ku||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){if(e.docChanges.length>0)return!0;const t=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Uu(e){e=Ep.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class Ap{constructor(e){this.key=e}}class Dp{constructor(e){this.key=e}}class Rp{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=ah(),this.mutatedKeys=ah(),this.tc=Gc(e),this.ec=new bp(this.tc)}get nc(){return this.Yu}sc(e,t){const n=t?t.ic:new wp,r=t?t.ec:this.ec;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const u=r.get(e),c=Kc(this.query,t)?t:null,h=!!u&&this.mutatedKeys.has(u.key),d=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations);let f=!1;u&&c?u.data.isEqual(c.data)?h!==d&&(n.track({type:3,doc:c}),f=!0):this.rc(u,c)||(n.track({type:2,doc:c}),f=!0,(a&&this.tc(c,a)>0||l&&this.tc(c,l)<0)&&(o=!0)):!u&&c?(n.track({type:0,doc:c}),f=!0):u&&!c&&(n.track({type:1,doc:u}),f=!0,(a||l)&&(o=!0)),f&&(c?(s=s.add(c),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{ec:s,ic:n,zi:o,mutatedKeys:i}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const i=e.ic.xu();i.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Rl()}};return n(e)-n(t)}(e.type,t.type)||this.tc(e.doc,t.doc)),this.oc(n);const s=t?this.uc():[],o=0===this.Zu.size&&this.current?1:0,a=o!==this.Xu;return this.Xu=o,0!==i.length||a?{snapshot:new Ep(this.query,e.ec,r,i,e.mutatedKeys,0===o,a,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:s}:{cc:s}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new wp,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(e=>this.Yu=this.Yu.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Yu=this.Yu.delete(e)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=ah(),this.ec.forEach(e=>{this.ac(e.key)&&(this.Zu=this.Zu.add(e.key))});const t=[];return e.forEach(e=>{this.Zu.has(e)||t.push(new Dp(e))}),this.Zu.forEach(n=>{e.has(n)||t.push(new Ap(n))}),t}hc(e){this.Yu=e.ir,this.Zu=ah();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Ep.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class Pp{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Op{constructor(e){this.key=e,this.fc=!1}}class Lp{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.dc={},this.wc=new Yc(e=>qc(e),$c),this._c=new Map,this.mc=new Set,this.gc=new ku(nu.comparator),this.yc=new Map,this.Ic=new nf,this.Tc={},this.Ec=new Map,this.Ac=Yd.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}async function Mp(e,t){const n=em(e);let r,i;const s=n.wc.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.lc();else{const e=await wf(n.localStore,Vc(t)),s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await Fp(n,t,r,"current"===s,e.resumeToken),n.isPrimaryClient&&Hf(n.remoteStore,e)}return i}async function Fp(e,t,n,r,i){e.Rc=(t,n,r)=>async function(e,t,n,r){let i=t.view.sc(n);i.zi&&(i=await Sf(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.sc(n,i)}));const s=r&&r.targetChanges.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s);return Gp(e,t.targetId,o.cc),o.snapshot}(e,t,n,r);const s=await Sf(e.localStore,t,!0),o=new Rp(t,s.ir),a=o.sc(s.documents),l=id.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),u=o.applyChanges(a,e.isPrimaryClient,l);Gp(e,n,u.cc);const c=new Pp(t,n,o);return e.wc.set(t,c),e._c.has(n)?e._c.get(n).push(t):e._c.set(n,[t]),u.snapshot}async function jp(e,t){const n=Ol(e),r=n.wc.get(t),i=n._c.get(r.targetId);if(i.length>1)return n._c.set(r.targetId,i.filter(e=>!$c(e,t))),void n.wc.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Ef(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Kf(n.remoteStore,r.targetId),Kp(n,r.targetId)}).catch(cu)):(Kp(n,r.targetId),await Ef(n.localStore,r.targetId,!0))}async function Up(e,t){const n=Ol(e);try{const e=await function(e,t){const n=Ol(e),r=t.snapshotVersion;let i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.Zi.newChangeBuffer({trackRemovals:!0});i=n.Ji;const o=[];t.targetChanges.forEach((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.Bs.removeMatchingKeys(e,s.removedDocuments,a).next(()=>n.Bs.addMatchingKeys(e,s.addedDocuments,a)));let u=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?u=u.withResumeToken(Au.EMPTY_BYTE_STRING,Xl.min()).withLastLimboFreeSnapshotVersion(Xl.min()):s.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(s.resumeToken,r)),i=i.insert(a,u),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,u,s)&&o.push(n.Bs.updateTargetData(e,u))});let a=Jc(),l=ah();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(vf(e,s,t.documentUpdates).next(e=>{a=e.nr,l=e.sr})),!r.isEqual(Xl.min())){const t=n.Bs.getLastRemoteSnapshotVersion(e).next(t=>n.Bs.setTargetsMetadata(e,e.currentSequenceNumber,r));o.push(t)}return hu.waitFor(o).next(()=>s.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,a,l)).next(()=>a)}).then(e=>(n.Ji=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.yc.get(t);r&&(Pl(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.fc=!0:e.modifiedDocuments.size>0?Pl(r.fc):e.removedDocuments.size>0&&(Pl(r.fc),r.fc=!1))}),await Xp(n,e,t)}catch(e){await cu(e)}}function Vp(e,t,n){const r=Ol(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.wc.forEach((n,r)=>{const i=r.view.Mu(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=Ol(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.listeners)i.Mu(t)&&(r=!0)}),r&&Cp(n)}(r.eventManager,t),e.length&&r.dc.nu(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function zp(e,t,n){const r=Ol(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.yc.get(t),s=i&&i.key;if(s){let e=new ku(nu.comparator);e=e.insert(s,ic.newNoDocument(s,Xl.min()));const n=ah().add(s),i=new rd(Xl.min(),new Map,new ku(Gl),e,n);await Up(r,i),r.gc=r.gc.remove(s),r.yc.delete(t),Yp(r)}else await Ef(r.localStore,t,!1).then(()=>Kp(r,t,n)).catch(cu)}async function Bp(e,t){const n=Ol(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Ol(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.Zi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=hu.resolve();return s.forEach(e=>{o=o.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);Pl(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),o.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=ah();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);Hp(n,r,null),qp(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Xp(n,e)}catch(e){await cu(e)}}async function $p(e,t,n){const r=Ol(e);try{const e=await function(e,t){const n=Ol(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(Pl(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);Hp(r,t,n),qp(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Xp(r,e)}catch(n){await cu(n)}}function qp(e,t){(e.Ec.get(t)||[]).forEach(e=>{e.resolve()}),e.Ec.delete(t)}function Hp(e,t,n){const r=Ol(e);let i=r.Tc[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Tc[r.currentUser.toKey()]=i}}function Kp(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e._c.get(t))e.wc.delete(r),n&&e.dc.Pc(r,n);e._c.delete(t),e.isPrimaryClient&&e.Ic.Is(t).forEach(t=>{e.Ic.containsKey(t)||Wp(e,t)})}function Wp(e,t){e.mc.delete(t.path.canonicalString());const n=e.gc.get(t);null!==n&&(Kf(e.remoteStore,n),e.gc=e.gc.remove(t),e.yc.delete(n),Yp(e))}function Gp(e,t,n){for(const r of n)r instanceof Ap?(e.Ic.addReference(r.key,t),Qp(e,r)):r instanceof Dp?(Cl("SyncEngine","Document no longer in limbo: "+r.key),e.Ic.removeReference(r.key,t),e.Ic.containsKey(r.key)||Wp(e,r.key)):Rl()}function Qp(e,t){const n=t.key,r=n.path.canonicalString();e.gc.get(n)||e.mc.has(r)||(Cl("SyncEngine","New document in limbo: "+n),e.mc.add(r),Yp(e))}function Yp(e){for(;e.mc.size>0&&e.gc.size<e.maxConcurrentLimboResolutions;){const t=e.mc.values().next().value;e.mc.delete(t);const n=new nu(Zl.fromString(t)),r=e.Ac.next();e.yc.set(r,new Op(n)),e.gc=e.gc.insert(n,r),Hf(e.remoteStore,new $d(Vc(Oc(n.path)),r,"TargetPurposeLimboResolution",fu.ct))}}async function Xp(e,t,n){const r=Ol(e),i=[],s=[],o=[];r.wc.isEmpty()||(r.wc.forEach((e,a)=>{o.push(r.Rc(a,t,n).then(e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=df.Li(a.targetId,e);s.push(t)}}))}),await Promise.all(o),r.dc.nu(i),await async function(e,t){const n=Ol(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>hu.forEach(t,t=>hu.forEach(t.Fi,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>hu.forEach(t.Bi,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!du(e))throw e;Cl("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ji.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ji=n.Ji.insert(e,i)}}}(r.localStore,s))}async function Jp(e,t){const n=Ol(e);if(!n.currentUser.isEqual(t)){Cl("SyncEngine","User change. New user:",t.toKey());const e=await gf(n.localStore,t);n.currentUser=t,function(e){e.Ec.forEach(e=>{e.forEach(e=>{e.reject(new Ml(Ll.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.Ec.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Xp(n,e.er)}}function Zp(e,t){const n=Ol(e),r=n.yc.get(t);if(r&&r.fc)return ah().add(r.key);{let e=ah();const r=n._c.get(t);if(!r)return e;for(const t of r){const r=n.wc.get(t);e=e.unionWith(r.view.nc)}return e}}function em(e){const t=Ol(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Up.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Zp.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=zp.bind(null,t),t.dc.nu=xp.bind(null,t.eventManager),t.dc.Pc=Ip.bind(null,t.eventManager),t}function tm(e){const t=Ol(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Bp.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=$p.bind(null,t),t}class nm{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Lf(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return mf(this.persistence,new ff,e.initialUser,this.serializer)}createPersistence(e){return new uf(hf.zs,this.serializer)}createSharedClientState(e){return new Tf}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class rm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Vp(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Jp.bind(null,this.syncEngine),await pp(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new kp}createDatastore(e){const t=Lf(e.databaseInfo.databaseId),n=(r=e.databaseInfo,new Pf(r));var r;return function(e,t,n,r){return new Vf(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=e=>Vp(this.syncEngine,e,0),s=If.D()?new If:new xf,new Bf(t,n,r,i,s);var t,n,r,i,s}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new Lp(e,t,n,r,i,s);return o&&(a.vc=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=Ol(e);Cl("RemoteStore","RemoteStore shutting down."),t.vu.add(5),await qf(t),t.Pu.shutdown(),t.bu.set("Unknown")}(this.remoteStore)}}class im{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Nl("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class sm{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=_l.UNAUTHENTICATED,this.clientId=Wl.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,async e=>{Cl("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(Cl("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ml(Ll.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Fl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=vp(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function om(e,t){e.asyncQueue.verifyOperationInProgress(),Cl("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await gf(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function am(e,t){e.asyncQueue.verifyOperationInProgress();const n=await um(e);Cl("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener(e=>fp(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>fp(t.remoteStore,n)),e._onlineComponents=t}function lm(e){return"FirebaseError"===e.name?e.code===Ll.FAILED_PRECONDITION||e.code===Ll.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function um(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Cl("FirestoreClient","Using user provided OfflineComponentProvider");try{await om(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!lm(n))throw n;Al("Error using user provided cache. Falling back to memory cache: "+n),await om(e,new nm)}}else Cl("FirestoreClient","Using default OfflineComponentProvider"),await om(e,new nm);return e._offlineComponents}async function cm(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Cl("FirestoreClient","Using user provided OnlineComponentProvider"),await am(e,e._uninitializedComponentsProvider._online)):(Cl("FirestoreClient","Using default OnlineComponentProvider"),await am(e,new rm))),e._onlineComponents}function hm(e){return cm(e).then(e=>e.syncEngine)}async function dm(e){const t=await cm(e),n=t.eventManager;return n.onListen=Mp.bind(null,t.syncEngine),n.onUnlisten=jp.bind(null,t.syncEngine),n}function fm(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const pm=new Map;function mm(e,t,n){if(!n)throw new Ml(Ll.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function gm(e){if(!nu.isDocumentKey(e))throw new Ml(Ll.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function ym(e){if(nu.isDocumentKey(e))throw new Ml(Ll.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function vm(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":Rl()}function bm(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Ml(Ll.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=vm(e);throw new Ml(Ll.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}class wm{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Ml(Ll.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ml(Ll.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Ml(Ll.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=fm(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Ml(Ll.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new Ml(Ll.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new Ml(Ll.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}class Em{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wm({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ml(Ll.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ml(Ll.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wm(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Ul;switch(e.type){case"firstParty":return new $l(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Ml(Ll.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=pm.get(e);t&&(Cl("ComponentProvider","Removing Datastore"),pm.delete(e),t.terminate())}(this),Promise.resolve()}}function Sm(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=bm(e,Em))._getSettings(),o=`${t}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&Al("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=_l.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[l(JSON.stringify({alg:"none",type:"JWT"})),l(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Ml(Ll.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new _l(s)}e._authCredentials=new Vl(new jl(t,n))}}class km{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Tm(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new km(this.firestore,e,this._key)}}class _m{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new _m(this.firestore,e,this._query)}}class Tm extends _m{constructor(e,t,n){super(e,t,Oc(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new km(this.firestore,null,new nu(e))}withConverter(e){return new Tm(this.firestore,e,this._path)}}function xm(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=C(e),mm("collection","path",t),e instanceof Em){const n=Zl.fromString(t,...r);return ym(n),new Tm(e,null,n)}{if(!(e instanceof km||e instanceof Tm))throw new Ml(Ll.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Zl.fromString(t,...r));return ym(n),new Tm(e.firestore,null,n)}}function Im(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=C(e),1===arguments.length&&(t=Wl.A()),mm("doc","path",t),e instanceof Em){const n=Zl.fromString(t,...r);return gm(n),new km(e,null,new nu(n))}{if(!(e instanceof km||e instanceof Tm))throw new Ml(Ll.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Zl.fromString(t,...r));return gm(n),new km(e.firestore,e instanceof Tm?e.converter:null,new nu(n))}}class Cm{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new Mf(this,"async_queue_retry"),this.Xc=()=>{const e=Of();e&&Cl("AsyncQueue","Visibility state changed to "+e.visibilityState),this.qo.Mo()};const e=Of();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=Of();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Fl;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}async ea(){if(0!==this.Qc.length){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!du(e))throw e;Cl("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No(()=>this.ea())}}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(e=>{this.Wc=e,this.Hc=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Nl("INTERNAL UNHANDLED ERROR: ",t),e}).then(e=>(this.Hc=!1,e))));return this.Gc=t,t}enqueueAfterDelay(e,t,n){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const r=yp.createAndSchedule(this,e,t,n,e=>this.na(e));return this.zc.push(r),r}Zc(){this.Wc&&Rl()}verifyOperationInProgress(){}async sa(){let e;do{e=this.Gc,await e}while(e!==this.Gc)}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function Nm(e){return function(e){if("object"!=typeof e||null===e)return!1;const t=e;for(const n of["next","error","complete"])if(n in t&&"function"==typeof t[n])return!0;return!1}(e)}class Am extends Em{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Cm,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Rm(this),this._firestoreClient.terminate()}}function Dm(e){return e._firestoreClient||Rm(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Rm(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new ju(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,fm(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new sm(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}class Pm{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pm(Au.fromBase64String(e))}catch(e){throw new Ml(Ll.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Pm(Au.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Om{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Ml(Ll.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tu(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Lm{constructor(e){this._methodName=e}}class Mm{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ml(Ll.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ml(Ll.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Gl(this._lat,e._lat)||Gl(this._long,e._long)}}const Fm=/^__.*__$/;class jm{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Lh(e,this.data,this.fieldMask,t,this.fieldTransforms):new Oh(e,this.data,t,this.fieldTransforms)}}function Um(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Rl()}}class Vm{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.ua(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Vm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.fa(e),r}da(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.ua(),r}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return Jm(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(Um(this.ca)&&Fm.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class zm{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Lf(e)}ya(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Vm({ca:e,methodName:t,ga:n,path:tu.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Bm(e){const t=e._freezeSettings(),n=Lf(e._databaseId);return new zm(e._databaseId,!!t.ignoreUndefinedProperties,n)}function $m(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.ya(s.merge||s.mergeFields?2:0,t,n,i);Gm("Data must be an object, but it was:",o,r);const a=Km(r,o);let l,u;if(s.merge)l=new Cu(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Qm(t,r,n);if(!o.contains(i))throw new Ml(Ll.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);Zm(e,i)||e.push(i)}l=new Cu(e),u=o.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,u=o.fieldTransforms;return new jm(new nc(a),l,u)}function qm(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Hm(n,e.ya(r?4:3,t))}function Hm(e,t){if(Wm(e=C(e)))return Gm("Unsupported field value:",t,e),Km(e,t);if(e instanceof Lm)return function(e,t){if(!Um(t.ca))throw t._a(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t._a(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Hm(i,t.wa(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=C(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return dh(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Yl.fromDate(e);return{timestampValue:yd(t.serializer,n)}}if(e instanceof Yl){const n=new Yl(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:yd(t.serializer,n)}}if(e instanceof Mm)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Pm)return{bytesValue:vd(t.serializer,e._byteString)};if(e instanceof km){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t._a(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Ed(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a(`Unsupported field value: ${vm(e)}`)}(e,t)}function Km(e,t){const n={};return Su(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Eu(e,(e,r)=>{const i=Hm(r,t.ha(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function Wm(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Yl||e instanceof Mm||e instanceof Pm||e instanceof km||e instanceof Lm)}function Gm(e,t,n){if(!Wm(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=vm(n);throw"an object"===r?t._a(e+" a custom object"):t._a(e+" "+r)}}function Qm(e,t,n){if((t=C(t))instanceof Om)return t._internalPath;if("string"==typeof t)return Xm(e,t);throw Jm("Field path arguments must be of type string or ",e,!1,void 0,n)}const Ym=new RegExp("[~\\*/\\[\\]]");function Xm(e,t,n){if(t.search(Ym)>=0)throw Jm(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Om(...t.split("."))._internalPath}catch(r){throw Jm(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Jm(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Ml(Ll.INVALID_ARGUMENT,a+e+l)}function Zm(e,t){return e.some(e=>e.isEqual(t))}class eg{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new km(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new tg(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ng("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class tg extends eg{data(){return super.data()}}function ng(e,t){return"string"==typeof t?Xm(e,t):t instanceof Om?t._internalPath:t._delegate._internalPath}function rg(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Ml(Ll.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ig{}class sg extends ig{}function og(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof ig&&n.push(t),n=n.concat(i),function(e){const t=e.filter(e=>e instanceof lg).length,n=e.filter(e=>e instanceof ag).length;if(t>1||t>0&&n>0)throw new Ml(Ll.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class ag extends sg{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new ag(e,t,n)}_apply(e){const t=this._parse(e);return hg(e._query,t),new _m(e.firestore,e.converter,zc(e._query,t))}_parse(e){const t=Bm(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Ml(Ll.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){cg(o,s);const t=[];for(const n of o)t.push(ug(r,e,n));a={arrayValue:{values:t}}}else a=ug(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||cg(o,s),a=qm(n,"where",o,"in"===s||"not-in"===s);return hc.create(i,s,a)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class lg extends ig{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new lg(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:dc.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)hg(n,i),n=zc(n,i)}(e._query,t),new _m(e.firestore,e.converter,zc(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function ug(e,t,n){if("string"==typeof(n=C(n))){if(""===n)throw new Ml(Ll.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!jc(t)&&-1!==n.indexOf("/"))throw new Ml(Ll.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Zl.fromString(n));if(!nu.isDocumentKey(r))throw new Ml(Ll.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Gu(e,new nu(r))}if(n instanceof km)return Gu(e,n._key);throw new Ml(Ll.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vm(n)}.`)}function cg(e,t){if(!Array.isArray(e)||0===e.length)throw new Ml(Ll.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function hg(e,t){if(t.isInequality()){const n=Fc(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new Ml(Ll.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${r.toString()}'`);const i=Mc(e);null!==i&&dg(e,r,i)}const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Ml(Ll.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Ml(Ll.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}function dg(e,t,n){if(!n.isEqual(t))throw new Ml(Ll.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class fg{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(zu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pu(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ou(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Rl()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Eu(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertGeoPoint(e){return new Mm(Pu(e.latitude),Pu(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Mu(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Fu(e));default:return null}}convertTimestamp(e){const t=Ru(e);return new Yl(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Zl.fromString(e);Pl(Bd(n));const r=new Uu(n.get(1),n.get(3)),i=new nu(n.popFirst(5));return r.isEqual(t)||Nl(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function pg(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class mg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class gg extends eg{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new yg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(ng("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class yg extends gg{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class vg{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new mg(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new yg(this._firestore,this._userDataWriter,n.key,n,new mg(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ml(Ll.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new yg(e._firestore,e._userDataWriter,n.doc.key,n.doc,new mg(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new yg(e._firestore,e._userDataWriter,t.doc.key,t.doc,new mg(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:bg(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function bg(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Rl()}}class wg extends fg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pm(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new km(this.firestore,null,t)}}function Eg(e,t,n){e=bm(e,km);const r=bm(e.firestore,Am),i=pg(e.converter,t,n);return _g(r,[$m(Bm(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,xh.none())])}function Sg(e,t){const n=bm(e.firestore,Am),r=Im(e),i=pg(e.converter,t);return _g(n,[$m(Bm(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,xh.exists(!1))]).then(()=>r)}function kg(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,o;e=C(e);let a={includeMetadataChanges:!1},l=0;"object"!=typeof n[l]||Nm(n[l])||(a=n[l],l++);const u={includeMetadataChanges:a.includeMetadataChanges};if(Nm(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[l+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let c,h,d;if(e instanceof km)h=bm(e.firestore,Am),d=Oc(e._key.path),c={next:t=>{n[l]&&n[l](Tg(h,e,t))},error:n[l+1],complete:n[l+2]};else{const t=bm(e,_m);h=bm(t.firestore,Am),d=t._query;const r=new wg(h);c={next:e=>{n[l]&&n[l](new vg(h,r,t,e))},error:n[l+1],complete:n[l+2]},rg(e._query)}return function(e,t,n,r){const i=new im(r),s=new Np(t,i,n);return e.asyncQueue.enqueueAndForget(async()=>_p(await dm(e),s)),()=>{i.Dc(),e.asyncQueue.enqueueAndForget(async()=>Tp(await dm(e),s))}}(Dm(h),d,u,c)}function _g(e,t){return function(e,t){const n=new Fl;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=tm(e);try{const e=await function(e,t){const n=Ol(e),r=Yl.now(),i=t.reduce((e,t)=>e.add(t.key),ah());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let a=Jc(),l=ah();return n.Zi.getEntries(e,i).next(e=>{a=e,a.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,a)).next(i=>{s=i;const o=[];for(const e of t){const t=Rh(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Lh(e.key,t,rc(t.value.mapValue),xh.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)}).next(t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:o.batchId,changes:th(s)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Tc[e.currentUser.toKey()];r||(r=new ku(Gl)),r=r.insert(t,n),e.Tc[e.currentUser.toKey()]=r}(r,e.batchId,n),await Xp(r,e.changes),await ip(r.remoteStore)}catch(e){const t=vp(e,"Failed to persist write");n.reject(t)}}(await hm(e),t,n)),n.promise}(Dm(e),t)}function Tg(e,t,n){const r=n.docs.get(t._key),i=new wg(e);return new gg(e,i,t._key,r,new mg(n.hasPendingWrites,n.fromCache),t.converter)}!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Tl=e}(Ue),Le(new N("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new Am(new zl(e.getProvider("auth-internal")),new Hl(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Ml(Ll.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Uu(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),Be(kl,"3.13.0",e),Be(kl,"3.13.0","esm2017")}();const xg=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},Ig=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim()},Cg=e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var Ng={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Ag=(0,r.forwardRef)((e,t)=>{let{color:n="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:a="",children:l,iconNode:u,...c}=e;return(0,r.createElement)("svg",{ref:t,...Ng,width:i,height:i,stroke:n,strokeWidth:o?24*Number(s)/Number(i):s,className:Ig("lucide",a),...!l&&!Cg(c)&&{"aria-hidden":"true"},...c},[...u.map(e=>{let[t,n]=e;return(0,r.createElement)(t,n)}),...Array.isArray(l)?l:[l]])}),Dg=(e,t)=>{const n=(0,r.forwardRef)((n,i)=>{let{className:s,...o}=n;return(0,r.createElement)(Ag,{ref:i,iconNode:t,className:Ig(`lucide-${a=xg(e),a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,s),...o});var a});return n.displayName=xg(e),n},Rg=Dg("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),Pg=Dg("flask-conical",[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]]),Og=Dg("glass-water",[["path",{d:"M5.116 4.104A1 1 0 0 1 6.11 3h11.78a1 1 0 0 1 .994 1.105L17.19 20.21A2 2 0 0 1 15.2 22H8.8a2 2 0 0 1-2-1.79z",key:"p55z4y"}],["path",{d:"M6 12a5 5 0 0 1 6 0 5 5 0 0 0 6 0",key:"mjntcy"}]]),Lg=Dg("list",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]),Mg=Dg("archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]),Fg=Dg("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]),jg=Dg("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),Ug=Dg("mic-off",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),Vg=Dg("mic",[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]]),zg=Dg("file-down",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]),Bg=Dg("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),$g=Dg("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),qg=Dg("notebook-pen",[["path",{d:"M13.4 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7.4",key:"re6nr2"}],["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["path",{d:"M21.378 5.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"pqwjuv"}]]),Hg=Dg("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Kg=Dg("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);var Wg=n(579);const Gg="bg-[#E0D8D0] rounded-2xl shadow-xl p-6 mb-8 w-full max-w-4xl",Qg="bg-[#C8C2BA] text-[#4E3629] p-3 rounded-xl w-full focus:outline-none focus:ring-2 focus:ring-[#8A2A2B] placeholder-[#4E3629]",Yg="bg-[#4E3629] hover:bg-[#8A2A2B] text-[#F4EFEA] font-bold py-3 px-6 rounded-xl shadow-lg transition-all duration-200 ease-in-out transform hover:scale-105",Xg="p-4 flex-1 text-center rounded-xl transition-all duration-200",Jg="bg-[#8A2A2B] text-[#F4EFEA] shadow-lg",Zg="bg-[#E0D8D0] text-[#4E3629] hover:bg-[#C8C2BA]",ey="bg-[#4E3629] hover:bg-[#8A2A2B] text-[#F4EFEA] font-bold p-3 rounded-full shadow-lg transition-all duration-200 ease-in-out transform hover:scale-110 flex items-center justify-center",ty="animate-spin text-[#F4EFEA]",ny="bg-[#C8C2BA] text-left text-[#4E3629] font-semibold",ry="py-3 px-4 text-sm",iy="px-4 py-2 mx-1 rounded-full bg-[#C8C2BA] hover:bg-[#8A2A2B] hover:text-[#F4EFEA] text-[#4E3629]",sy={apiKey:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_API_KEY||"",authDomain:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_AUTH_DOMAIN||"",projectId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_PROJECT_ID||"",storageBucket:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_STORAGE_BUCKET||"",messagingSenderId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_MESSAGING_SENDER_ID||"",appId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_APP_ID||""},oy=Ve(sy),ay=function(e,t){const n="string"==typeof e?e:t||"(default)",r=Me("object"==typeof e?e:ze(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=(e=>{const t=d(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})("firestore");e&&Sm(r,...e)}return r}(oy),ly=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ze();const t=Me(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Me(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(E(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;st(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Qr,persistence:[lr,Hn,Wn]}),r=p("authTokenSyncURL");if(r){const e=(i=r,async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Zr)return;const r=null===t||void 0===t?void 0:t.token;ei!==r&&(ei=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,n){C(e).beforeAuthStateChanged(t,n)}(n,e,()=>e(n.currentUser)),function(e,t,n,r){C(e).onIdTokenChanged(t,n,r)}(n,t=>e(t))}var i;const s=d("auth");return s&&mn(n,`http://${s}`),n}(oy);function uy(){const[e,t]=(0,r.useState)(null),[n,i]=(0,r.useState)(null),[s,o]=(0,r.useState)("dashboard"),[a,l]=(0,r.useState)([]),[u,c]=(0,r.useState)([]),[h,d]=(0,r.useState)([]),[f,p]=(0,r.useState)([]),[m,g]=(0,r.useState)([]),[y,v]=(0,r.useState)(!1),[b,w]=(0,r.useState)(""),E=sy.projectId,[S,k]=(0,r.useState)(1),[_,T]=(0,r.useState)(!1),[x,I]=(0,r.useState)(!1),[N,A]=(0,r.useState)(!1),[D,R]=(0,r.useState)(!1),[P,O]=(0,r.useState)({date:(new Date).toISOString().slice(0,16),recipeName:"",finalProduct:"",ethanolAmount:"",waterIntoStill:"",abvOfCharge:"",headsCollectionStart:"",heartsCollectionStart:"",heartsCollectionStop:"",tailsDuration:"",distillateAmount:"",distillateABV:"",powerLevel:"",distillationStart:"",notes:"",lowerPlateOn:!1,upperPlateOn:!1,dephlegmatorOn:!1}),[L,M]=(0,r.useState)({date:(new Date).toISOString().slice(0,10),bottlingStartTime:"",product:"",bottledAmount:"",boxesUsed:"",lotNumber:"",notes:"",bottlingMaterialDefinition:""}),[F,j]=(0,r.useState)([]),[U,V]=(0,r.useState)({name:"",materials:[{name:"",quantity:""}]}),[z,B]=(0,r.useState)({name:"",type:"ingredient",quantity:"",unit:"",lowStockThreshold:"",leadTimeDays:""}),[$,q]=(0,r.useState)({name:"",product:"",ingredients:[{name:"",quantity:"",unit:""}]}),[H,K]=(0,r.useState)(""),W="birgir@thoran.is";(0,r.useEffect)(()=>{const e=function(e,t,n,r){return C(e).onAuthStateChanged(t,n,r)}(ly,e=>{t(e),i(!0),K("")});return()=>e()},[]),(0,r.useEffect)(()=>{if(e&&n){console.log("Setting up Firestore listeners for user:",e.uid);const t=e.uid,n=kg(og(xm(ay,`artifacts/${E}/users/${t}/inventory`)),e=>{const t=e.docs.map(e=>({id:e.id,...e.data()}));c(t)}),r=kg(og(xm(ay,`artifacts/${E}/users/${t}/recipes`)),e=>{const t=e.docs.map(e=>({id:e.id,...e.data()}));l(t)}),i=kg(og(xm(ay,`artifacts/${E}/users/${t}/bottlingMaterialDefinitions`)),e=>{const t=e.docs.map(e=>({id:e.id,...e.data()}));j(t)}),s=kg(og(xm(ay,`artifacts/${E}/users/${t}/distillationLogs`)),e=>{const t=e.docs.map(e=>({...e.data(),id:e.id,type:"distillation"}));d(t)}),o=kg(og(xm(ay,`artifacts/${E}/users/${t}/bottlingLogs`)),e=>{const t=e.docs.map(e=>({...e.data(),id:e.id,type:"bottling"}));p(t)});return()=>{console.log("Tearing down Firestore listeners for user:",e.uid),n(),r(),i(),s(),o()}}n&&!e&&(c([]),l([]),d([]),p([]),g([]),j([]))},[e,n,E]),(0,r.useEffect)(()=>{const e=[...h,...f];e.sort((e,t)=>new Date(t.date)-new Date(e.date)),g(e)},[h,f]);const G=e=>{w(e),v(!0)},Q=async e=>{I(!0);let t=[];const n=`\n      You are a helpful assistant for a distillery log app. Parse the following dictation and extract the relevant information into a JSON object.\n      The fields to extract are:\n      - distillationStart (string, format HH:MM)\n      - headsCollectionStart (string, format HH:MM)\n      - heartsCollectionStart (string, format HH:MM)\n      - heartsCollectionStop (string, format HH:MM)\n      - powerLevel (string, one of '1', '1.5', '2', '2.5', '3', '3.5')\n      - ethanolAmount (number)\n      - waterIntoStill (number)\n      - abvOfCharge (number)\n      - tailsDuration (number)\n      - distillateAmount (number)\n      - distillateABV (number)\n      - notes (string)\n      - lowerPlateOn (boolean)\n      - upperPlateOn (boolean)\n      - dephlegmatorOn (boolean)\n      \n      Interpret phrases like "lower plate is on", "upper plate active", "dephlegmator off", "turn on the lower plate" to set the boolean values.\n      If a field is not mentioned, it should be set to null.\n      Here is the user's dictation:\n      "${e}"\n    `;t.push({role:"user",parts:[{text:n}]});const r={contents:t,generationConfig:{responseMimeType:"application/json",responseSchema:{type:"OBJECT",properties:{distillationStart:{type:"STRING"},headsCollectionStart:{type:"STRING"},heartsCollectionStart:{type:"STRING"},heartsCollectionStop:{type:"STRING"},powerLevel:{type:"STRING"},ethanolAmount:{type:"NUMBER"},waterIntoStill:{type:"NUMBER"},abvOfCharge:{type:"NUMBER"},tailsDuration:{type:"NUMBER"},distillateAmount:{type:"NUMBER"},distillateABV:{type:"NUMBER"},notes:{type:"STRING"},lowerPlateOn:{type:"BOOLEAN"},upperPlateOn:{type:"BOOLEAN"},dephlegmatorOn:{type:"BOOLEAN"}}}}};let i=null,s=0;let o=1e3;for(;s<3;){try{var a,l,u,c,h;const e=await fetch("https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),t=await e.json(),n=null===t||void 0===t||null===(a=t.candidates)||void 0===a||null===(l=a[0])||void 0===l||null===(u=l.content)||void 0===u||null===(c=u.parts)||void 0===c||null===(h=c[0])||void 0===h?void 0:h.text;if(n){i=JSON.parse(n);break}}catch(d){console.error("Error fetching from API, retrying...",d)}s++,await new Promise(e=>setTimeout(e,o)),o*=2}I(!1),i?(O(e=>{const t={...e};for(const n in i)null!==i[n]&&void 0!==i[n]&&(t[n]=i[n]);return t}),G("Form fields updated successfully from your dictation!")):G("Could not understand the dictation. Please try again or fill the form manually.")},Y=async e=>{R(!0);let t=[];const n=`\n      You are a helpful assistant for a distillery log app. Parse the following dictation and extract the relevant information into a JSON object.\n      The fields to extract are:\n      - bottlingStartTime (string, format HH:MM)\n      - product (string, e.g. "Grapefruit base")\n      - bottledAmount (number)\n      - boxesUsed (number)\n      - lotNumber (string)\n      - notes (string)\n      \n      If a field is not mentioned, it should be set to null.\n      If "bottled amount" is mentioned, calculate "boxesUsed" as "bottledAmount" / 6.\n      Here is the user's dictation:\n      "${e}"\n    `;t.push({role:"user",parts:[{text:n}]});const r={contents:t,generationConfig:{responseMimeType:"application/json",responseSchema:{type:"OBJECT",properties:{bottlingStartTime:{type:"STRING"},product:{type:"STRING"},bottledAmount:{type:"NUMBER"},boxesUsed:{type:"NUMBER"},lotNumber:{type:"STRING"},notes:{type:"STRING"}}}}};let i=null,s=0;let o=1e3;for(;s<3;){try{var a,l,u,c,h;const e=await fetch("https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),t=await e.json(),n=null===t||void 0===t||null===(a=t.candidates)||void 0===a||null===(l=a[0])||void 0===l||null===(u=l.content)||void 0===u||null===(c=u.parts)||void 0===c||null===(h=c[0])||void 0===h?void 0:h.text;if(n){i=JSON.parse(n);break}}catch(d){console.error("Error fetching from API, retrying...",d)}s++,await new Promise(e=>setTimeout(e,o)),o*=2}R(!1),i?(M(e=>{const t={...e};for(const n in i)null!==i[n]&&void 0!==i[n]&&(t[n]=i[n]);return t}),G("Bottling log fields updated successfully from your dictation!")):G("Could not understand the dictation. Please try again or fill the form manually.")};return(0,Wg.jsxs)("div",{className:"bg-[#F4EFEA] text-[#4E3629] min-h-screen p-8 font-sans transition-all duration-300 flex flex-col items-center",children:[(0,Wg.jsx)("header",{className:"w-full max-w-4xl mb-8",children:(0,Wg.jsxs)("nav",{className:"flex bg-[#E0D8D0] rounded-2xl p-2 shadow-xl",children:[(0,Wg.jsxs)("button",{onClick:()=>o("dashboard"),className:`${Xg} ${e&&"dashboard"===s?Jg:Zg}`,children:[(0,Wg.jsx)(Rg,{size:20,className:"inline mr-2 "+(e&&"dashboard"===s?"text-[#F4EFEA]":"text-[#8A2A2B]")}),"Dashboard"]}),(0,Wg.jsxs)("button",{onClick:()=>o("distillation"),className:`${Xg} ${e&&"distillation"===s?Jg:Zg}`,children:[(0,Wg.jsx)(Pg,{size:20,className:"inline mr-2 "+(e&&"distillation"===s?"text-[#F4EFEA]":"text-[#8A2A2B]")}),"Distillation"]}),(0,Wg.jsxs)("button",{onClick:()=>o("bottling"),className:`${Xg} ${e&&"bottling"===s?Jg:Zg}`,children:[(0,Wg.jsx)(Og,{size:20,className:"inline mr-2 "+(e&&"bottling"===s?"text-[#F4EFEA]":"text-[#8A2A2B]")}),"Bottling"]}),(0,Wg.jsxs)("button",{onClick:()=>o("logs"),className:`${Xg} ${e&&"logs"===s?Jg:Zg}`,children:[(0,Wg.jsx)(Lg,{size:20,className:"inline mr-2 "+(e&&"logs"===s?"text-[#F4EFEA]":"text-[#8A2A2B]")}),"Logs"]}),(0,Wg.jsxs)("button",{onClick:()=>o("inventory"),className:`${Xg} ${e&&"inventory"===s?Jg:Zg}`,children:[(0,Wg.jsx)(Mg,{size:20,className:"inline mr-2 "+(e&&"inventory"===s?"text-[#F4EFEA]":"text-[#8A2A2B]")}),"Inventory"]}),e&&(0,Wg.jsxs)("button",{onClick:async()=>{try{await zn(ly),G("Logged out successfully."),o("dashboard")}catch(e){console.error("Logout Error:",e),G(`Logout failed: ${e.message}`)}},className:`${Xg} bg-red-600 hover:bg-red-700 text-white`,children:[(0,Wg.jsx)(Fg,{size:20,className:"inline mr-2"})," Logout"]})]})}),(0,Wg.jsx)("main",{className:"w-full max-w-4xl",children:n&&e?(0,Wg.jsxs)(Wg.Fragment,{children:["dashboard"===s&&(0,Wg.jsxs)(Wg.Fragment,{children:[(0,Wg.jsxs)("div",{className:`${Gg} text-center`,children:[(0,Wg.jsx)("h1",{className:"text-4xl font-extrabold mb-4 text-[#8A2A2B]",children:"Distillery Dashboard"}),(0,Wg.jsx)("p",{className:"text-lg text-[#4E3629] mb-6",children:"Track your production logs and inventory in real-time."}),(0,Wg.jsxs)("div",{className:"flex justify-center items-center",children:[(0,Wg.jsxs)("div",{className:"p-4 bg-[#8A2A2B] rounded-xl m-2 shadow-lg",children:[(0,Wg.jsx)("p",{className:"text-xl font-semibold text-[#F4EFEA]",children:h.length}),(0,Wg.jsx)("p",{className:"text-sm text-[#F4EFEA]",children:"Distillation Logs"})]}),(0,Wg.jsxs)("div",{className:"p-4 bg-[#8A2A2B] rounded-xl m-2 shadow-lg",children:[(0,Wg.jsx)("p",{className:"text-xl font-semibold text-[#F4EFEA]",children:f.length}),(0,Wg.jsx)("p",{className:"text-sm text-[#F4EFEA]",children:"Bottling Logs"})]}),(0,Wg.jsxs)("div",{className:"p-4 bg-[#8A2A2B] rounded-xl m-2 shadow-lg",children:[(0,Wg.jsx)("p",{className:"text-xl font-semibold text-[#F4EFEA]",children:u.length}),(0,Wg.jsx)("p",{className:"text-sm text-[#F4EFEA]",children:"Inventory Items"})]})]})]}),(0,Wg.jsxs)("div",{className:Gg,children:[(0,Wg.jsxs)("h2",{className:"text-2xl font-bold mb-4 flex items-center",children:[(0,Wg.jsx)(Mg,{size:24,className:"mr-2 text-[#8A2A2B]"})," Inventory Overview"]}),u.filter(e=>e.quantity<=e.lowStockThreshold).length>0?(0,Wg.jsxs)(Wg.Fragment,{children:[(0,Wg.jsxs)("div",{className:"bg-red-700 text-white p-4 rounded-xl mb-4",children:[(0,Wg.jsx)("p",{className:"font-bold",children:"Urgent: Low Stock!"}),(0,Wg.jsx)("p",{children:"The following items are running low. Re-order to avoid production halts."})]}),u.filter(e=>e.quantity<=e.lowStockThreshold).map(e=>(0,Wg.jsxs)("div",{className:"flex justify-between items-center bg-[#C8C2BA] p-3 rounded-xl mb-2",children:[(0,Wg.jsx)("span",{className:"font-bold",children:e.name}),(0,Wg.jsxs)("span",{children:[(0,Wg.jsx)("span",{className:"text-red-400 font-semibold",children:e.quantity})," / ",e.lowStockThreshold," ",e.unit]})]},e.id))]}):(0,Wg.jsx)("div",{className:"bg-green-700 text-white p-4 rounded-xl text-center",children:"All inventory levels are looking good!"})]})]}),"distillation"===s&&(0,Wg.jsxs)("div",{className:Gg,children:[(0,Wg.jsxs)("h2",{className:"text-2xl font-bold mb-6 flex items-center justify-between text-[#8A2A2B]",children:[(0,Wg.jsxs)("span",{className:"flex items-center",children:[(0,Wg.jsx)(Pg,{size:24,className:"mr-2 text-[#8A2A2B]"})," New Distillation Log"]}),(0,Wg.jsx)("button",{type:"button",onClick:()=>{if(!("webkitSpeechRecognition"in window))return void G("Speech recognition is not supported in this browser. Please use Chrome.");const e=new window.webkitSpeechRecognition;e.continuous=!1,e.lang="en-US",e.interimResults=!1,e.maxAlternatives=1,e.onstart=()=>{T(!0),G("Listening for your command...")},e.onresult=e=>{const t=e.results[0][0].transcript;G("Transcribed text: "+t),Q(t)},e.onerror=e=>{T(!1),console.error("Speech recognition error:",e.error),G("Error with speech recognition. Please try again.")},e.onend=()=>{T(!1)},e.start()},className:`${ey} ${_?"bg-red-600":"bg-[#4E3629]"}`,disabled:D?(0,Wg.jsx)(jg,{size:24,className:ty}):N?(0,Wg.jsx)(Ug,{size:24}):(0,Wg.jsx)(Vg,{size:24}),children:D?(0,Wg.jsx)(jg,{size:24,className:ty}):N?(0,Wg.jsx)(Ug,{size:24}):(0,Wg.jsx)(Vg,{size:24})})]}),(0,Wg.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),e)try{const t=e.uid;await Sg(xm(ay,`artifacts/${E}/users/${t}/distillationLogs`),{...P,timestamp:new Date}),G("Distillation log submitted successfully!");const n=a.find(e=>e.name===P.recipeName);if(n)for(const e of n.ingredients){const n=u.find(t=>t.name===e.name);if(n){const r=(n.quantity||0)-(e.quantity||0);await Eg(Im(ay,`artifacts/${E}/users/${t}/inventory`,n.id),{...n,quantity:r>0?r:0})}}O({date:(new Date).toISOString().slice(0,16),recipeName:"",finalProduct:"",ethanolAmount:"",waterIntoStill:"",abvOfCharge:"",headsCollectionStart:"",heartsCollectionStart:"",heartsCollectionStop:"",tailsDuration:"",distillateAmount:"",distillateABV:"",powerLevel:"",distillationStart:"",notes:"",lowerPlateOn:!1,upperPlateOn:!1,dephlegmatorOn:!1})}catch(t){console.error("Error adding distillation log or updating inventory: ",t),G("Error submitting distillation log. Please try again.")}},className:"space-y-4",children:[(0,Wg.jsxs)("div",{children:[(0,Wg.jsx)("label",{className:"block text-[#4E3629] mb-2",children:"Time of Distillation"}),(0,Wg.jsx)("input",{type:"datetime-local",value:P.date,onChange:e=>O({...P,date:e.target.value}),required:!0,className:Qg})]}),(0,Wg.jsxs)("div",{children:[(0,Wg.jsx)("label",{className:"block text-[#4E3629] mb-2",children:"Recipe Used"}),(0,Wg.jsxs)("select",{value:P.recipeName,onChange:e=>O({...P,recipeName:e.target.value}),required:!0,className:Qg,children:[(0,Wg.jsx)("option",{value:"",children:"Select a Recipe"}),a.map(e=>(0,Wg.jsx)("option",{value:e.name,children:e.name},e.id))]})]}),(0,Wg.jsxs)("div",{children:[(0,Wg.jsx)("label",{className:"block text-[#4E3629] mb-2",children:"Distillation Start (HH:MM)"}),(0,Wg.jsx)("input",{type:"time",value:P.distillationStart,onChange:e=>O({...P,distillationStart:e.target.value}),required:!0,className:`${Qg} text-[#4E3629]`})]}),(0,Wg.jsxs)("div",{children:[(0,Wg.jsx)("label",{className:"block text-[#4E3629] mb-2",children:"Power Level"}),(0,Wg.jsxs)("select",{value:P.powerLevel,onChange:e=>O({...P,powerLevel:e.target.value}),required:!0,className:Qg,children:[(0,Wg.jsx)("option",{value:"",children:"Select Power Level"}),(0,Wg.jsx)("option",{value:"1",children:"1"}),(0,Wg.jsx)("option",{value:"1.5",children:"1.5"}),(0,Wg.jsx)("option",{value:"2",children:"2"}),(0,Wg.jsx)("option",{value:"2.5",children:"2.5"}),(0,Wg.jsx)("option",{value:"3",children:"3"}),(0,Wg.jsx)("option",{value:"3.5",children:"3.5"})]})]}),(0,Wg.jsxs)("div",{className:"space-y-2",children:[(0,Wg.jsx)("label",{className:"block text-[#4E3629]",children:"Plate & Dephlegmator Controls"}),(0,Wg.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Wg.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Wg.jsx)("span",{className:"text-[#4E3629]",children:"Lower Plate On/Off"}),(0,Wg.jsx)("button",{type:"button",onClick:()=>O({...P,lowerPlateOn:!P.lowerPlateOn}),className:"relative inline-flex flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-[#E0D8D0] focus:ring-[#8A2A2B] "+(P.lowerPlateOn?"bg-[#8A2A2B]":"bg-[#C8C2BA]"),children:(0,Wg.jsx)("span",{className:"pointer-events-none inline-block h-5 w-5 rounded-full bg-[#F4EFEA] shadow transform ring-0 transition ease-in-out duration-200 "+(P.lowerPlateOn?"translate-x-5":"translate-x-0")})})]}),(0,Wg.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Wg.jsx)("span",{className:"text-[#4E3629]",children:"Upper Plate On/Off"}),(0,Wg.jsx)("button",{type:"button",onClick:()=>O({...P,upperPlateOn:!P.upperPlateOn}),className:"relative inline-flex flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-[#E0D8D0] focus:ring-[#8A2A2B] "+(P.upperPlateOn?"bg-[#8A2A2B]":"bg-[#C8C2BA]"),children:(0,Wg.jsx)("span",{className:"pointer-events-none inline-block h-5 w-5 rounded-full bg-[#F4EFEA] shadow transform ring-0 transition ease-in-out duration-200 "+(P.upperPlateOn?"translate-x-5":"translate-x-0")})})]}),(0,Wg.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Wg.jsx)("span",{className:"text-[#4E3629]",children:"Dephlegmator On/Off"}),(0,Wg.jsx)("button",{type:"button",onClick:()=>O({...P,dephlegmatorOn:!P.dephlegmatorOn}),className:"relative inline-flex flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-[#E0D8D0] focus:ring-[#8A2A2B] "+(P.dephlegmatorOn?"bg-[#8A2A2B]":"bg-[#C8C2BA]"),children:(0,Wg.jsx)("span",{className:"pointer-events-none inline-block h-5 w-5 rounded-full bg-[#F4EFEA] shadow transform ring-0 transition ease-in-out duration-200 "+(P.dephlegmatorOn?"translate-x-5":"translate-x-0")})})]})]})]}),(0,Wg.jsxs)("div",{children:[(0,Wg.jsx)("label",{className:"block text-[#4E3629] mb-2",children:"Ethanol Into Still (L)"}),(0,Wg.jsx)("input",{type:"number",step:"0.01",value:P.ethanolAmount,onChange:e=>O({...P,ethanolAmount:e.target.value}),required:!0,className:Qg})]}),(0,Wg.jsxs)("div",{children:[(0,Wg.jsx)("label",{className:"block text-[#4E3629] mb-2",children:"Water Into Still (L)"}),(0,Wg.jsx)("input",{type:"number",step:"0.01",value:P.waterIntoStill,onChange:e=>O({...P,waterIntoStill:e.target.value}),required:!0,className:Qg})]}),(0,Wg.jsxs)("div",{children:[(0,Wg.jsx)("label",{className:"block text-[#4E3629] mb-2",children:"ABV of Charge (%)"}),(0,Wg.jsx)("input",{type:"number",step:"0.01",value:P.abvOfCharge,onChange:e=>O({...P,abvOfCharge:e.target.value}),required:!0,className:Qg})]}),(0,Wg.jsxs)("div",{children:[(0,Wg.jsx)("label",{className:"block text-[#4E3629] mb-2",children:"Heads Collection Start (HH:MM)"}),(0,Wg.jsx)("input",{type:"time",value:P.headsCollectionStart,onChange:e=>O({...P,headsCollectionStart:e.target.value}),required:!0,className:`${Qg} text-[#4E3629]`})]}),(0,Wg.jsxs)("div",{children:[(0,Wg.jsx)("label",{className:"block text-[#4E3629] mb-2",children:"Hearts Collection Start (HH:MM)"}),(0,Wg.jsx)("input",{type:"time",value:P.heartsCollectionStart,onChange:e=>O({...P,heartsCollectionStart:e.target.value}),required:!0,className:`${Qg} text-[#4E3629]`})]}),(0,Wg.jsxs)("div",{children:[(0,Wg.jsx)("label",{className:"block text-[#4E3629] mb-2",children:"Hearts Collection Stop (HH:MM)"}),(0,Wg.jsx)("input",{type:"time",value:P.heartsCollectionStop,onChange:e=>O({...P,heartsCollectionStop:e.target.value}),required:!0,className:`${Qg} text-[#4E3629]`})]}),(0,Wg.jsxs)("div",{children:[(0,Wg.jsx)("label",{className:"block text-[#4E3629] mb-2",children:"Tails Collection Duration (minutes)"}),(0,Wg.jsx)("input",{type:"number",value:P.tailsDuration,onChange:e=>O({...P,tailsDuration:e.target.value}),required:!0,className:Qg})]}),(0,Wg.jsxs)("div",{children:[(0,Wg.jsx)("label",{className:"block text-[#4E3629] mb-2",children:"Distillate Collected (L)"}),(0,Wg.jsx)("input",{type:"number",step:"0.01",value:P.distillateAmount,onChange:e=>O({...P,distillateAmount:e.target.value}),required:!0,className:Qg})]}),(0,Wg.jsxs)("div",{children:[(0,Wg.jsx)("label",{className:"block text-[#4E3629] mb-2",children:"Distillate ABV (%)"}),(0,Wg.jsx)("input",{type:"number",step:"0.01",value:P.distillateABV,onChange:e=>O({...P,distillateABV:e.target.value}),required:!0,className:Qg})]}),(0,Wg.jsxs)("div",{children:[(0,Wg.jsx)("label",{className:"block text-[#4E3629] mb-2",children:"Notes"}),(0,Wg.jsx)("textarea",{value:P.notes,onChange:e=>O({...P,notes:e.target.value}),className:`${Qg} h-32 resize-y`})]}),(0,Wg.jsx)("button",{type:"submit",className:Yg,children:"Submit Distillation Log"})]})]}),"logs"===s&&(0,Wg.jsxs)("div",{className:Gg,children:[(0,Wg.jsxs)(Wg.Fragment,{children:[" ",(0,Wg.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Wg.jsxs)("h2",{className:"text-2xl font-bold mb-4 flex items-center text-[#8A2A2B]",children:[(0,Wg.jsx)(Lg,{size:24,className:"mr-2 text-[#8A2A2B]"})," Production Log History"]}),(0,Wg.jsxs)("button",{onClick:()=>{const e=document.getElementById("logs-table");e?(window.html2pdf(e,{margin:1,filename:"production_logs.pdf",image:{type:"jpeg",quality:.98},html2canvas:{scale:2},jsPDF:{unit:"in",format:"letter",orientation:"landscape"}}),G("Generating PDF...")):G("Log table not found. Please navigate to the Logs tab first.")},className:`${Yg} flex items-center`,children:[(0,Wg.jsx)(zg,{size:20,className:"mr-2 text-[#F4EFEA]"})," Export to PDF"]})]}),(0,Wg.jsxs)("div",{className:"overflow-x-auto",id:"logs-table",children:[(0,Wg.jsx)("h1",{className:"text-2xl font-bold mb-4 text-[#8A2A2B]",children:"Production Log History"}),(0,Wg.jsxs)("table",{className:"min-w-full bg-[#E0D8D0] rounded-xl overflow-hidden",children:[(0,Wg.jsx)("thead",{className:ny,children:(0,Wg.jsxs)("tr",{className:"bg-[#C8C2BA] text-left text-[#4E3629]",children:[(0,Wg.jsx)("th",{className:`${ry} whitespace-nowrap`,children:"Type"}),(0,Wg.jsx)("th",{className:`${ry} whitespace-nowrap`,children:"Date"}),(0,Wg.jsx)("th",{className:`${ry} whitespace-nowrap`,children:"Start Time"}),(0,Wg.jsx)("th",{className:`${ry} whitespace-nowrap`,children:"Product / Recipe"}),(0,Wg.jsx)("th",{className:`${ry} whitespace-nowrap`,children:"Amount"}),(0,Wg.jsx)("th",{className:`${ry} whitespace-nowrap`,children:"ABV / Lot No."}),(0,Wg.jsx)("th",{className:`${ry} whitespace-nowrap`,children:"Lower Plate"}),(0,Wg.jsx)("th",{className:`${ry} whitespace-nowrap`,children:"Upper Plate"}),(0,Wg.jsx)("th",{className:`${ry} whitespace-nowrap`,children:"Dephlegmator"}),(0,Wg.jsx)("th",{className:`${ry} whitespace-nowrap`,children:"Notes"})]})}),(0,Wg.jsx)("tbody",{children:(()=>{Math.ceil(m.length/10);const e=10*(S-1),t=e+10;return m.slice(e,t).map(e=>(0,Wg.jsxs)("tr",{className:"border-t border-[#B5AE9F] hover:bg-[#C8C2BA] transition-colors",children:[(0,Wg.jsx)("td",{className:ry,children:(0,Wg.jsx)("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${e.type,"bg-[#8A2A2B]"} text-[#F4EFEA]`,children:e.type.charAt(0).toUpperCase()+e.type.slice(1)})}),(0,Wg.jsx)("td",{className:ry,children:new Date(e.date).toLocaleDateString()}),(0,Wg.jsx)("td",{className:ry,children:"distillation"===e.type?e.distillationStart:e.bottlingStartTime}),(0,Wg.jsx)("td",{className:ry,children:"distillation"===e.type?e.recipeName:e.product}),(0,Wg.jsx)("td",{className:ry,children:"distillation"===e.type?`${e.distillateAmount} L`:`${e.bottledAmount} units`}),(0,Wg.jsx)("td",{className:ry,children:"distillation"===e.type?`${e.distillateABV}%`:e.lotNumber}),(0,Wg.jsx)("td",{className:ry,children:"distillation"===e.type?e.lowerPlateOn?"On":"Off":"-"}),(0,Wg.jsx)("td",{className:ry,children:"distillation"===e.type?e.upperPlateOn?"On":"Off":"-"}),(0,Wg.jsx)("td",{className:ry,children:"distillation"===e.type?e.dephlegmatorOn?"On":"Off":"-"}),(0,Wg.jsx)("td",{className:ry,children:e.notes})]},e.id))})()})]})]}),(()=>{const e=Math.ceil(m.length/10),t=[];for(let n=1;n<=e;n++)t.push((0,Wg.jsx)("button",{onClick:()=>k(n),className:`${iy} ${S===n?"bg-[#8A2A2B] text-[#F4EFEA]":""}`,children:n},n));return(0,Wg.jsxs)("div",{className:"flex justify-center items-center mt-4",children:[(0,Wg.jsx)("button",{onClick:()=>k(S-1),disabled:1===S,className:`${iy} ${1===S?"opacity-50 cursor-not-allowed":""}`,children:(0,Wg.jsx)(Bg,{size:16})}),t,(0,Wg.jsx)("button",{onClick:()=>k(S+1),disabled:S===e,className:`${iy} ${S===e?"opacity-50 cursor-not-allowed":""}`,children:(0,Wg.jsx)($g,{size:16})})]})})()]})," "]}),"bottling"===s&&(0,Wg.jsxs)("div",{className:Gg,children:[(0,Wg.jsxs)("h2",{className:"text-2xl font-bold mb-6 flex items-center justify-between text-[#8A2A2B]",children:[(0,Wg.jsxs)("span",{className:"flex items-center",children:[(0,Wg.jsx)(Og,{size:24,className:"mr-2 text-[#8A2A2B]"})," New Bottling Log"]}),(0,Wg.jsx)("button",{type:"button",onClick:()=>{if(!("webkitSpeechRecognition"in window))return void G("Speech recognition is not supported in this browser. Please use Chrome.");const e=new window.webkitSpeechRecognition;e.continuous=!1,e.lang="en-US",e.interimResults=!1,e.maxAlternatives=1,e.onstart=()=>{A(!0),G("Listening for your bottling log...")},e.onresult=e=>{const t=e.results[0][0].transcript;G("Transcribed text: "+t),Y(t)},e.onerror=e=>{A(!1),console.error("Speech recognition error:",e.error),G("Error with speech recognition. Please try again.")},e.onend=()=>{A(!1)},e.start()},className:`${ey} ${N?"bg-red-600":"bg-[#4E3629]"}`,disabled:D?(0,Wg.jsx)(jg,{size:24,className:ty}):N?(0,Wg.jsx)(Ug,{size:24}):(0,Wg.jsx)(Vg,{size:24}),children:D?(0,Wg.jsx)(jg,{size:24,className:ty}):N?(0,Wg.jsx)(Ug,{size:24}):(0,Wg.jsx)(Vg,{size:24})})]}),(0,Wg.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),e)try{const t=e.uid,n={...L,bottledAmount:L.bottledAmount,boxesUsed:Math.floor((L.bottledAmount||0)/6),timestamp:new Date};await Sg(xm(ay,`artifacts/${E}/users/${t}/bottlingLogs`),n),G("Bottling log submitted successfully!");const r=F.find(e=>e.name===n.product);if(r)for(const e of r.materials){const r=u.find(t=>t.name===e.name&&"bottling_material"===t.type);if(r){const i=(r.quantity||0)-e.quantity*n.bottledAmount;await Eg(Im(ay,`artifacts/${E}/users/${t}/inventory`,r.id),{...r,quantity:i>0?i:0})}}M({date:(new Date).toISOString().slice(0,10),bottlingStartTime:"",product:"",bottledAmount:"",boxesUsed:"",lotNumber:"",notes:""})}catch(t){console.error("Error adding bottling log or updating inventory: ",t),G("Error submitting bottling log. Please try again.")}},className:"space-y-4",children:[(0,Wg.jsxs)("div",{children:[(0,Wg.jsx)("label",{className:"block text-[#4E3629] mb-2",children:"Date of Bottling"}),(0,Wg.jsx)("input",{type:"date",value:L.date,onChange:e=>M({...L,date:e.target.value}),required:!0,className:Qg})]}),(0,Wg.jsxs)("div",{children:[(0,Wg.jsx)("label",{className:"block text-[#4E3629] mb-2",children:"Bottling Start Time (HH:MM)"}),(0,Wg.jsx)("input",{type:"time",value:L.bottlingStartTime,onChange:e=>M({...L,bottlingStartTime:e.target.value}),required:!0,className:`${Qg} text-[#4E3629]`})]}),(0,Wg.jsxs)("div",{children:[(0,Wg.jsx)("label",{className:"block text-[#4E3629] mb-2",children:"Product Bottled"}),(0,Wg.jsxs)("select",{value:L.product,onChange:e=>M({...L,product:e.target.value}),required:!0,className:Qg,children:[(0,Wg.jsx)("option",{value:"",children:"Select a Product"}),a.map(e=>(0,Wg.jsx)("option",{value:e.product,children:e.product},e.id))]})]}),(0,Wg.jsxs)("div",{children:[(0,Wg.jsx)("label",{className:"block text-[#4E3629] mb-2",children:"Amount Bottled (units)"}),(0,Wg.jsx)("input",{type:"number",value:L.bottledAmount,onChange:e=>M({...L,bottledAmount:parseInt(e.target.value,10)||""}),className:Qg})]}),(0,Wg.jsxs)("div",{children:[(0,Wg.jsx)("label",{className:"block text-[#4E3629] mb-2",children:"Boxes Filled (read-only)"}),(0,Wg.jsx)("input",{type:"number",readOnly:!0,value:Math.floor((L.bottledAmount||0)/6),className:Qg})]}),(0,Wg.jsxs)("div",{children:[(0,Wg.jsx)("label",{className:"block text-[#4E3629] mb-2",children:"Lot Number"}),(0,Wg.jsx)("input",{type:"text",value:L.lotNumber,onChange:e=>M({...L,lotNumber:e.target.value}),required:!0,className:Qg})]}),(0,Wg.jsxs)("div",{children:[(0,Wg.jsx)("label",{className:"block text-[#4E3629] mb-2",children:"Notes"}),(0,Wg.jsx)("textarea",{value:L.notes,onChange:e=>M({...L,notes:e.target.value}),className:`${Qg} h-32 resize-y`})]}),(0,Wg.jsx)("button",{type:"submit",className:Yg,children:"Submit Bottling Log"})]})]}),"inventory"===s&&(0,Wg.jsxs)("div",{className:Gg,children:[(0,Wg.jsxs)("h2",{className:"text-2xl font-bold mb-6 flex items-center text-[#8A2A2B]",children:[(0,Wg.jsx)(qg,{size:24,className:"mr-2 text-[#8A2A2B]"})," Inventory Management"]}),(0,Wg.jsxs)("div",{className:"overflow-x-auto",children:[(0,Wg.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Current Inventory"}),(0,Wg.jsxs)("table",{className:"min-w-full bg-[#E0D8D0] rounded-xl overflow-hidden",children:[(0,Wg.jsx)("thead",{className:ny,children:(0,Wg.jsxs)("tr",{className:"bg-[#C8C2BA] text-left text-[#4E3629]",children:[(0,Wg.jsx)("th",{className:"py-3 px-4",children:"Item Name"}),(0,Wg.jsx)("th",{className:"py-3 px-4",children:"Type"}),(0,Wg.jsx)("th",{className:"py-3 px-4",children:"Quantity"}),(0,Wg.jsx)("th",{className:"py-3 px-4",children:"Low Stock"}),(0,Wg.jsx)("th",{className:"py-3 px-4",children:"Lead Time (days)"}),(0,Wg.jsx)("th",{className:"py-3 px-4",children:"Actions"})]})}),(0,Wg.jsx)("tbody",{children:u.filter(e=>!e.deleted).map(t=>(0,Wg.jsxs)("tr",{className:"border-t border-[#B5AE9F] hover:bg-[#C8C2BA] transition-colors",children:[(0,Wg.jsx)("td",{className:"py-3 px-4",children:t.name}),(0,Wg.jsx)("td",{className:"py-3 px-4",children:t.type}),(0,Wg.jsxs)("td",{className:"py-3 px-4",children:[t.quantity," ",t.unit]}),(0,Wg.jsxs)("td",{className:"py-3 px-4",children:[t.lowStockThreshold," ",t.unit]}),(0,Wg.jsx)("td",{className:"py-3 px-4",children:t.leadTimeDays}),(0,Wg.jsx)("td",{className:"py-3 px-4",children:(0,Wg.jsx)("button",{onClick:()=>(async t=>{if(e)try{const n=e.uid;await Eg(Im(ay,`artifacts/${E}/users/${n}/inventory`,t),{deleted:!0},{merge:!0}),G("Inventory item removed successfully!")}catch(n){console.error("Error removing inventory item: ",n),G("Error removing inventory item. Please try again.")}})(t.id),className:"text-[#8A2A2B] hover:text-red-600"})})]},t.id))})]})]}),(0,Wg.jsxs)("div",{className:"overflow-x-auto mt-8",children:[(0,Wg.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Current Recipes"}),(0,Wg.jsxs)("table",{className:"min-w-full bg-[#E0D8D0] rounded-xl overflow-hidden",children:[(0,Wg.jsx)("thead",{className:ny,children:(0,Wg.jsxs)("tr",{className:"bg-[#C8C2BA] text-left text-[#4E3629]",children:[(0,Wg.jsx)("th",{className:"py-3 px-4",children:"Recipe Name"}),(0,Wg.jsx)("th",{className:"py-3 px-4",children:"Final Product"}),(0,Wg.jsx)("th",{className:"py-3 px-4",children:"Ingredients"})]})}),(0,Wg.jsx)("tbody",{children:a.map(e=>(0,Wg.jsxs)("tr",{className:"border-t border-[#B5AE9F] hover:bg-[#C8C2BA] transition-colors",children:[(0,Wg.jsx)("td",{className:"py-3 px-4",children:e.name}),(0,Wg.jsx)("td",{className:"py-3 px-4",children:e.product}),(0,Wg.jsx)("td",{className:"py-3 px-4",children:e.ingredients.map((e,t)=>(0,Wg.jsxs)("span",{className:"block",children:[e.quantity," ",e.unit," of ",e.name]},t))})]},e.id))})]})]}),(0,Wg.jsxs)("div",{className:"mb-8 p-6 bg-[#C8C2BA] rounded-2xl mt-8",children:[(0,Wg.jsxs)("h3",{className:"text-xl font-bold mb-4 flex items-center text-[#8A2A2B]",children:[(0,Wg.jsx)(Hg,{size:20,className:"mr-2"})," Add/Update Item"]}),(0,Wg.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),e)try{const t=e.uid;await Sg(xm(ay,`artifacts/${E}/users/${t}/inventory`),{...z,quantity:parseFloat(z.quantity),lowStockThreshold:parseFloat(z.lowStockThreshold),leadTimeDays:parseInt(z.leadTimeDays,10)}),G("Inventory item added successfully!"),B({name:"",type:"ingredient",quantity:"",unit:"",lowStockThreshold:"",leadTimeDays:""})}catch(t){console.error("Error adding inventory item: ",t),G("Error adding inventory item. Please try again.")}},className:"space-y-4",children:[(0,Wg.jsx)("input",{type:"text",placeholder:"Item Name (e.g., Grain, Bottles, Labels)",value:z.name,onChange:e=>B({...z,name:e.target.value}),required:!0,className:Qg}),(0,Wg.jsxs)("div",{className:"flex space-x-4",children:[(0,Wg.jsxs)("select",{value:z.type,onChange:e=>B({...z,type:e.target.value}),className:`${Qg} flex-1`,children:[(0,Wg.jsx)("option",{value:"ingredient",children:"Ingredient"}),(0,Wg.jsx)("option",{value:"bottling_material",children:"Bottling Material"})]}),(0,Wg.jsx)("input",{type:"text",placeholder:"Unit (e.g., kg, pieces, rolls)",value:z.unit,onChange:e=>B({...z,unit:e.target.value}),required:!0,className:`${Qg} flex-1`})]}),(0,Wg.jsxs)("div",{className:"flex space-x-4",children:[(0,Wg.jsx)("input",{type:"number",placeholder:"Current Quantity",value:z.quantity,onChange:e=>B({...z,quantity:e.target.value}),required:!0,className:`${Qg} flex-1`}),(0,Wg.jsx)("input",{type:"number",placeholder:"Low Stock Threshold",value:z.lowStockThreshold,onChange:e=>B({...z,lowStockThreshold:e.target.value}),required:!0,className:`${Qg} flex-1`}),(0,Wg.jsx)("input",{type:"number",placeholder:"Lead Time (days)",value:z.leadTimeDays,onChange:e=>B({...z,leadTimeDays:e.target.value}),required:!0,className:`${Qg} flex-1`})]}),(0,Wg.jsx)("button",{type:"submit",className:Yg,children:"Add/Update Inventory Item"})]})]}),(0,Wg.jsxs)("div",{className:"mb-8 p-6 bg-[#C8C2BA] rounded-2xl",children:[(0,Wg.jsxs)("h3",{className:"text-xl font-bold mb-4 flex items-center text-[#8A2A2B]",children:[(0,Wg.jsx)(Hg,{size:20,className:"mr-2"})," Add New Recipe"]}),(0,Wg.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),e)try{const t=e.uid;await Sg(xm(ay,`artifacts/${E}/users/${t}/recipes`),$),G("Recipe added successfully!"),q({name:"",product:"",ingredients:[{name:"",quantity:"",unit:""}]})}catch(t){console.error("Error adding recipe: ",t),G("Error adding recipe. Please try again.")}},className:"space-y-4",children:[(0,Wg.jsx)("input",{type:"text",placeholder:"Recipe Name",value:$.name,onChange:e=>q({...$,name:e.target.value}),required:!0,className:Qg}),(0,Wg.jsx)("input",{type:"text",placeholder:"Final Product",value:$.product,onChange:e=>q({...$,product:e.target.value}),required:!0,className:Qg}),(0,Wg.jsx)("h4",{className:"text-lg font-bold mt-4 text-[#4E3629]",children:"Ingredients:"}),$.ingredients.map((e,t)=>(0,Wg.jsxs)("div",{className:"flex space-x-2 items-center",children:[(0,Wg.jsx)("input",{type:"text",placeholder:"Ingredient Name",value:e.name,onChange:e=>{const n=[...$.ingredients];n[t].name=e.target.value,q({...$,ingredients:n})},required:!0,className:Qg}),(0,Wg.jsx)("input",{type:"number",step:"0.01",placeholder:"Quantity",value:e.quantity,onChange:e=>{const n=[...$.ingredients];n[t].quantity=parseFloat(e.target.value),q({...$,ingredients:n})},required:!0,className:`${Qg} w-28`}),(0,Wg.jsxs)("select",{value:e.unit,onChange:e=>{const n=[...$.ingredients];n[t].unit=e.target.value,q({...$,ingredients:n})},required:!0,className:`${Qg} w-28`,children:[(0,Wg.jsx)("option",{value:"",children:"Unit"}),(0,Wg.jsx)("option",{value:"L",children:"L"}),(0,Wg.jsx)("option",{value:"gr",children:"gr"})]}),(0,Wg.jsx)("button",{type:"button",onClick:()=>{const e=[...$.ingredients];e.splice(t,1),q({...$,ingredients:e})},children:(0,Wg.jsx)(Kg,{size:20,className:"text-[#8A2A2B] hover:text-red-600"})})]},t)),(0,Wg.jsxs)("div",{className:"flex flex-col space-y-4 items-start",children:[(0,Wg.jsx)("button",{type:"button",onClick:()=>q(e=>({...e,ingredients:[...e.ingredients,{name:"",quantity:"",unit:""}]})),className:"text-[#8A2A2B] hover:text-[#6D2121]",children:"+ Add Another Ingredient"}),(0,Wg.jsx)("button",{type:"submit",className:Yg,children:"Add Recipe"})]})]})]}),(0,Wg.jsxs)("div",{className:"mb-8 p-6 bg-[#C8C2BA] rounded-2xl",children:[(0,Wg.jsxs)("h3",{className:"text-xl font-bold mb-4 flex items-center text-[#8A2A2B]",children:[(0,Wg.jsx)(Hg,{size:20,className:"mr-2"})," Define Bottling Materials"]}),(0,Wg.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),e)try{const t=e.uid;await Eg(Im(ay,`artifacts/${E}/users/${t}/bottlingMaterialDefinitions`,U.name),{materials:U.materials.map(e=>({...e,quantity:parseFloat(e.quantity)}))}),G(`Bottling material definition "${U.name}" saved successfully!`),V({name:"",materials:[{name:"",quantity:""}]})}catch(t){console.error("Error adding bottling material definition: ",t),G("Error saving bottling materials. Please try again.")}},className:"space-y-4",children:[(0,Wg.jsx)("input",{type:"text",placeholder:"Definition Name (e.g., Standard Bottle Pack)",value:U.name,onChange:e=>V({...U,name:e.target.value}),required:!0,className:Qg}),(0,Wg.jsx)("h4",{className:"text-lg font-bold mt-4 text-[#4E3629]",children:"Materials per Bottle:"}),U.materials.map((e,t)=>(0,Wg.jsxs)("div",{className:"flex space-x-2 items-center",children:[(0,Wg.jsx)("input",{type:"text",placeholder:"Material Name (e.g., Bottles, Labels)",value:e.name,onChange:e=>{const n=[...U.materials];n[t].name=e.target.value,V({...U,materials:n})},required:!0,className:Qg}),(0,Wg.jsx)("input",{type:"number",placeholder:"Quantity",value:e.quantity,onChange:e=>{const n=[...U.materials];n[t].quantity=e.target.value,V({...U,materials:n})},required:!0,className:`${Qg} w-28`}),(0,Wg.jsx)("button",{type:"button",onClick:()=>{const e=[...U.materials];e.splice(t,1),V({...U,materials:e})},children:(0,Wg.jsx)(Kg,{size:20,className:"text-[#8A2A2B] hover:text-red-600"})})]},t)),(0,Wg.jsxs)("div",{className:"flex flex-col space-y-4 items-start",children:[(0,Wg.jsx)("button",{type:"button",onClick:()=>V(e=>({...e,materials:[...e.materials,{name:"",quantity:""}]})),className:"text-[#8A2A2B] hover:text-[#6D2121]",children:"+ Add Another Material"}),(0,Wg.jsx)("button",{type:"submit",className:Yg,children:"Save Material Definition"})]})]})]})]})]}):(0,Wg.jsxs)("div",{className:`${Gg} text-center`,children:[(0,Wg.jsx)("h2",{className:"text-2xl font-bold mb-6 text-[#8A2A2B]",children:"Login to Distillery App"}),(0,Wg.jsx)("button",{onClick:async()=>{K("");try{const e=new Dn,t=await async function(e,t,n){const r=fn(e);lt(e,t,Cn);const i=dr(r,n);return new br(r,"signInViaPopup",t,i).executeNotNull()}(ly,e);if(W&&t.user.email!==W)return await zn(ly),K("Access denied. This app is restricted to a specific user."),void G("Access denied. This app is restricted to a specific user.");G(`Welcome, ${t.user.displayName||t.user.email}!`)}catch(e){console.error("Google Sign-In Error:",e),K(e.message),G(`Google Sign-In failed: ${e.message}`)}},className:`${Yg} flex items-center justify-center w-full`,children:"Sign in with Google"}),H&&(0,Wg.jsx)("p",{className:"text-red-500 text-sm mt-4",children:H})]})}),y&&(0,Wg.jsx)("div",{className:"fixed inset-0 bg-[#4E3629] bg-opacity-75 flex items-center justify-center p-4",children:(0,Wg.jsxs)("div",{className:"bg-[#E0D8D0] p-6 rounded-2xl shadow-2xl max-w-sm w-full text-center",children:[(0,Wg.jsx)("h3",{className:"text-2xl font-bold mb-4 text-[#4E3629]",children:"Notification"}),(0,Wg.jsx)("p",{className:"text-lg text-[#4E3629] mb-6",children:b}),(0,Wg.jsx)("button",{type:"button",onClick:()=>v(!1),className:Yg,children:"Close"})]})})]})}const cy=document.getElementById("root");i.createRoot(cy).render((0,Wg.jsx)(r.StrictMode,{children:(0,Wg.jsx)(uy,{})}))})();
//# sourceMappingURL=main.2392833e.js.map