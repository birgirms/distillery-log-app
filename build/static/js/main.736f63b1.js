/*! For license information please see main.736f63b1.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},153:(e,t,n)=>{var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,s={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:c,props:s,_owner:a.current}}t.Fragment=s,t.jsx=u,t.jsxs=u},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=b.prototype=new v;w.constructor=b,m(w,y.prototype),w.isPureReactComponent=!0;var E=Array.isArray,S=Object.prototype.hasOwnProperty,_={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)S.call(t,i)&&!k.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:_.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var x=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function N(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===s?"."+C(l,0):s,E(o)?(i="",null!=e&&(i=e.replace(x,"$&/")+"/"),N(o,t,i,"",function(e){return e})):null!=o&&(I(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(x,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",E(e))for(var u=0;u<e.length;u++){var c=s+C(a=e[u],u);l+=N(a,t,i,c,o)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(a=e.next()).done;)l+=N(a=a.value,t,i,c=s+C(a,u++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",function(e){return t.call(n,e,i++)}),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},P={transition:null},O={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:P,ReactCurrentOwner:_};function L(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:A,forEach:function(e,t,n){A(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return A(e,function(){t++}),t},toArray:function(e){return A(e,function(e){return e})||[]},only:function(e){if(!I(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=b,t.StrictMode=s,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.act=L,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=_.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)S.call(t,u)&&!k.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=L,t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],u=a+1,c=e[u];if(0>s(l,n))u<i&&0>s(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[a]=n,r=a);else{if(!(u<i&&0>s(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],c=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function E(e){if(g=!1,w(e),!m)if(null!==r(u))m=!0,P(S);else{var t=r(c);null!==t&&O(E,t.startTime-e)}}function S(e,n){m=!1,g&&(g=!1,v(I),I=-1),p=!0;var s=f;try{for(w(n),d=r(u);null!==d&&(!(d.expirationTime>n)||e&&!N());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(u)&&i(u),w(n)}else i(u);d=r(u)}if(null!==d)var l=!0;else{var h=r(c);null!==h&&O(E,h.startTime-n),l=!1}return l}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,k=!1,T=null,I=-1,x=5,C=-1;function N(){return!(t.unstable_now()-C<x)}function A(){if(null!==T){var e=t.unstable_now();C=e;var n=!0;try{n=T(!0,e)}finally{n?_():(k=!1,T=null)}}else k=!1}if("function"===typeof b)_=function(){b(A)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,D=R.port2;R.port1.onmessage=A,_=function(){D.postMessage(null)}}else _=function(){y(A,0)};function P(e){T=e,k||(k=!0,_())}function O(e,n){I=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,P(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(c,e),null===r(u)&&e===r(c)&&(g?(v(I),I=-1):g=!0,O(E,s-o))):(e.sortIndex=a,n(u,e),m||p||(m=!0,P(S))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},579:(e,t,n)=>{e.exports=n(153)},730:(e,t,n)=>{var r=n(43),i=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,E=Symbol.for("react.element"),S=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),x=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function j(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(si){var r=si}Reflect.construct(e,[],t)}else{try{t.call()}catch(si){r=si}e.call(t.prototype)}else{try{throw Error()}catch(si){r=si}e()}}catch(si){if(si&&r&&"string"===typeof si.stack){for(var i=si.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?j(e):""}function z(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case S:return"Portal";case T:return"Profiler";case k:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case x:return(e.displayName||"Context")+".Consumer";case I:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function $(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(Sl){return e.body}}function Q(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){X(e,t);var n=q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&G(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:q(n)}}function se(e,t){var n=q(t.value),r=q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,ce,he=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ce(e,t)})}:ce);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function Ee(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,_e=null,ke=null;function Te(e){if(e=_i(e)){if("function"!==typeof Se)throw Error(s(280));var t=e.stateNode;t&&(t=Ti(t),Se(e.stateNode,e.type,t))}}function Ie(e){_e?ke?ke.push(e):ke=[e]:_e=e}function xe(){if(_e){var e=_e,t=ke;if(ke=_e=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var Ae=!1;function Re(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ce(e,t,n)}finally{Ae=!1,(null!==_e||null!==ke)&&(Ne(),xe())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var r=Ti(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Pe=!1;if(c)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ce){Pe=!1}function Le(e,t,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Me=!1,Fe=null,je=!1,Ue=null,Ve={onError:function(e){Me=!0,Fe=e}};function ze(e,t,n,r,i,s,o,a,l){Me=!1,Fe=null,Le.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function $e(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function qe(e){if(Be(e)!==e)throw Error(s(188))}function He(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return qe(i),e;if(o===r)return qe(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e),null!==e?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var We=i.unstable_scheduleCallback,Ge=i.unstable_cancelCallback,Qe=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Xe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ut=64,ct=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=ht(a):0!==(s&=o)&&(r=ht(s))}else 0!==(o=n&~i)?r=ht(o):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ut;return 0===(4194240&(ut<<=1))&&(ut=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var Et,St,_t,kt,Tt,It=!1,xt=[],Ct=null,Nt=null,At=null,Rt=new Map,Dt=new Map,Pt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Mt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=_i(t))&&St(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=Si(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=$e(n)))return e.blockedOn=t,void Tt(e.priority,function(){_t(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function jt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=_i(n))&&St(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Ut(e,t,n){jt(e)&&n.delete(t)}function Vt(){It=!1,null!==Ct&&jt(Ct)&&(Ct=null),null!==Nt&&jt(Nt)&&(Nt=null),null!==At&&jt(At)&&(At=null),Rt.forEach(Ut),Dt.forEach(Ut)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,It||(It=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function Bt(e){function t(t){return zt(t,e)}if(0<xt.length){zt(xt[0],e);for(var n=1;n<xt.length;n++){var r=xt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&zt(Ct,e),null!==Nt&&zt(Nt,e),null!==At&&zt(At,e),Rt.forEach(t),Dt.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Pt.shift()}var $t=w.ReactCurrentBatchConfig,qt=!0;function Ht(e,t,n,r){var i=bt,s=$t.transition;$t.transition=null;try{bt=1,Wt(e,t,n,r)}finally{bt=i,$t.transition=s}}function Kt(e,t,n,r){var i=bt,s=$t.transition;$t.transition=null;try{bt=4,Wt(e,t,n,r)}finally{bt=i,$t.transition=s}}function Wt(e,t,n,r){if(qt){var i=Qt(e,t,n,r);if(null===i)qr(e,t,r,Gt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return At=Mt(At,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Rt.set(s,Mt(Rt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Dt.set(s,Mt(Dt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var s=_i(i);if(null!==s&&Et(s),null===(s=Qt(e,t,n,r))&&qr(e,t,r,Gt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else qr(e,t,r,null,n)}}var Gt=null;function Qt(e,t,n,r){if(Gt=null,null!==(e=Si(e=Ee(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=$e(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=sn(un),hn=F({},un,{view:0,detail:0}),dn=sn(hn),fn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(fn),mn=sn(F({},fn,{dataTransfer:0})),gn=sn(F({},hn,{relatedTarget:0})),yn=sn(F({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=F({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=sn(vn),wn=sn(F({},un,{data:0})),En={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function Tn(){return kn}var In=F({},hn,{key:function(e){if(e.key){var t=En[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),xn=sn(In),Cn=sn(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=sn(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),An=sn(F({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=F({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=sn(Rn),Pn=[9,13,27,32],On=c&&"CompositionEvent"in window,Ln=null;c&&"documentMode"in document&&(Ln=document.documentMode);var Mn=c&&"TextEvent"in window&&!Ln,Fn=c&&(!On||Ln&&8<Ln&&11>=Ln),jn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var $n={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!$n[e.type]:"textarea"===t}function Hn(e,t,n,r){Ie(r),0<(t=Kr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Wn=null;function Gn(e){jr(e,0)}function Qn(e){if(W(ki(e)))return e}function Yn(e,t){if("change"===e)return t}var Xn=!1;if(c){var Jn;if(c){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Wn=Kn=null)}function nr(e){if("value"===e.propertyName&&Qn(Wn)){var t=[];Hn(t,Wn,e,Ee(e)),Re(Gn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Wn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Wn)}function sr(e,t){if("click"===e)return Qn(t)}function or(e,t){if("input"===e||"change"===e)return Qn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=G((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=cr(n,s);var o=cr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=c&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,br=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==G(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Kr(yr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function Er(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sr={animationend:Er("Animation","AnimationEnd"),animationiteration:Er("Animation","AnimationIteration"),animationstart:Er("Animation","AnimationStart"),transitionend:Er("Transition","TransitionEnd")},_r={},kr={};function Tr(e){if(_r[e])return _r[e];if(!Sr[e])return e;var t,n=Sr[e];for(t in n)if(n.hasOwnProperty(t)&&t in kr)return _r[e]=n[t];return e}c&&(kr=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);var Ir=Tr("animationend"),xr=Tr("animationiteration"),Cr=Tr("animationstart"),Nr=Tr("transitionend"),Ar=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){Ar.set(e,t),l(t,[e])}for(var Pr=0;Pr<Rr.length;Pr++){var Or=Rr[Pr];Dr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Dr(Ir,"onAnimationEnd"),Dr(xr,"onAnimationIteration"),Dr(Cr,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(Nr,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,l,u){if(ze.apply(this,arguments),Me){if(!Me)throw Error(s(198));var c=Fe;Me=!1,Fe=null,je||(je=!0,Ue=c)}}(r,t,void 0,e),e.currentTarget=null}function jr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,a,u),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,a,u),s=l}}}if(je)throw e=Ue,je=!1,Ue=null,e}function Ur(e,t){var n=t[bi];void 0===n&&(n=t[bi]=new Set);var r=e+"__bubble";n.has(r)||($r(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),$r(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,o.forEach(function(t){"selectionchange"!==t&&(Mr.has(t)||Vr(t,!1,e),Vr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Vr("selectionchange",!1,t))}}function $r(e,t,n,r){switch(Yt(t)){case 1:var i=Ht;break;case 4:i=Kt;break;default:i=Wt}n=i.bind(null,t,n,e),i=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function qr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=Si(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}Re(function(){var r=s,i=Ee(n),o=[];e:{var a=Ar.get(e);if(void 0!==a){var l=cn,u=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=xn;break;case"focusin":u="focus",l=gn;break;case"focusout":u="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Nn;break;case Ir:case xr:case Cr:l=yn;break;case Nr:l=An;break;case"scroll":l=dn;break;case"wheel":l=Dn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var c=0!==(4&t),h=!c&&"scroll"===e,d=c?null!==a?a+"Capture":null:a;c=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=De(p,d))&&c.push(Hr(p,m,f)))),h)break;p=p.return}0<c.length&&(a=new l(a,u,null,n,i),o.push({event:a,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===we||!(u=n.relatedTarget||n.fromElement)||!Si(u)&&!u[yi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?Si(u):null)&&(u!==(h=Be(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=pn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=Cn,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:ki(l),f=null==u?a:ki(u),(a=new c(m,p+"leave",l,n,i)).target=h,a.relatedTarget=f,m=null,Si(i)===r&&((c=new c(d,p+"enter",u,n,i)).target=f,c.relatedTarget=h,m=c),h=m,l&&u)e:{for(d=u,p=0,f=c=l;f;f=Wr(f))p++;for(f=0,m=d;m;m=Wr(m))f++;for(;0<p-f;)c=Wr(c),p--;for(;0<f-p;)d=Wr(d),f--;for(;p--;){if(c===d||null!==d&&c===d.alternate)break e;c=Wr(c),d=Wr(d)}c=null}else c=null;null!==l&&Gr(o,a,l,c,!1),null!==u&&null!==h&&Gr(o,h,u,c,!0)}if("select"===(l=(a=r?ki(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Yn;else if(qn(a))if(Xn)g=or;else{g=ir;var y=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=sr);switch(g&&(g=g(e,r))?Hn(o,g,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=r?ki(r):window,e){case"focusin":(qn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,wr(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":wr(o,n,i)}var v;if(On)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Bn?Vn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Fn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Bn&&(v=en()):(Jt="value"in(Xt=i)?Xt.value:Xt.textContent,Bn=!0)),0<(y=Kr(r,b)).length&&(b=new wn(b,e,null,n,i),o.push({event:b,listeners:y}),v?b.data=v:null!==(v=zn(n))&&(b.data=v))),(v=Mn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Un=!0,jn);case"textInput":return(e=t.data)===jn&&Un?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!On&&Vn(e,t)?(e=en(),Zt=Jt=Xt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=v))}jr(o,t)})}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=De(e,n))&&r.unshift(Hr(e,s,i)),null!=(s=De(e,t))&&r.push(Hr(e,s,i))),e=e.return}return r}function Wr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==u&&(a=u,i?null!=(l=De(n,s))&&o.unshift(Hr(n,l,a)):i||null!=(l=De(n,s))&&o.push(Hr(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Qr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Qr,"\n").replace(Yr,"")}function Jr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ni=null;function ri(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ii="function"===typeof setTimeout?setTimeout:void 0,oi="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,li="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ii;function ui(e){setTimeout(function(){throw e})}function ci(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function hi(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function di(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),mi="__reactFiber$"+fi,gi="__reactProps$"+fi,yi="__reactContainer$"+fi,bi="__reactEvents$"+fi,wi="__reactListeners$"+fi,Ei="__reactHandles$"+fi;function Si(e){var t=e[mi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[yi]||n[mi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=di(e);null!==e;){if(n=e[mi])return n;e=di(e)}return t}n=(e=n).parentNode}return null}function _i(e){return!(e=e[mi]||e[yi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ki(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function Ti(e){return e[gi]||null}var Ii=[],xi=-1;function Ci(e){return{current:e}}function Ni(e){0>xi||(e.current=Ii[xi],Ii[xi]=null,xi--)}function Ai(e,t){xi++,Ii[xi]=e.current,e.current=t}var Ri={},Di=Ci(Ri),Pi=Ci(!1),Oi=Ri;function Li(e,t){var n=e.type.contextTypes;if(!n)return Ri;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Mi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Fi(){Ni(Pi),Ni(Di)}function ji(e,t,n){if(Di.current!==Ri)throw Error(s(168));Ai(Di,t),Ai(Pi,n)}function Ui(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,$(e)||"Unknown",i));return F({},n,r)}function Vi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ri,Oi=Di.current,Ai(Di,e),Ai(Pi,Pi.current),!0}function zi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Ui(e,t,Oi),r.__reactInternalMemoizedMergedChildContext=e,Ni(Pi),Ni(Di),Ai(Di,e)):Ni(Pi),Ai(Pi,n)}var Bi=null,$i=!1,qi=!1;function Hi(e){null===Bi?Bi=[e]:Bi.push(e)}function Ki(){if(!qi&&null!==Bi){qi=!0;var e=0,t=bt;try{var n=Bi;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Bi=null,$i=!1}catch(i){throw null!==Bi&&(Bi=Bi.slice(e+1)),We(Ze,Ki),i}finally{bt=t,qi=!1}}return null}var Wi=[],Gi=0,Qi=null,Yi=0,Xi=[],Ji=0,Zi=null,es=1,ts="";function ns(e,t){Wi[Gi++]=Yi,Wi[Gi++]=Qi,Qi=e,Yi=t}function rs(e,t,n){Xi[Ji++]=es,Xi[Ji++]=ts,Xi[Ji++]=Zi,Zi=e;var r=es;e=ts;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,es=1<<32-ot(t)+i|n<<i|r,ts=s+e}else es=1<<s|n<<i|r,ts=e}function is(e){null!==e.return&&(ns(e,1),rs(e,1,0))}function ss(e){for(;e===Qi;)Qi=Wi[--Gi],Wi[Gi]=null,Yi=Wi[--Gi],Wi[Gi]=null;for(;e===Zi;)Zi=Xi[--Ji],Xi[Ji]=null,ts=Xi[--Ji],Xi[Ji]=null,es=Xi[--Ji],Xi[Ji]=null}var os=null,as=null,ls=!1,us=null;function cs(e,t){var n=Fu(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function hs(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,os=e,as=hi(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,os=e,as=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Zi?{id:es,overflow:ts}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Fu(18,null,null,0)).stateNode=t,n.return=e,e.child=n,os=e,as=null,!0);default:return!1}}function ds(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function fs(e){if(ls){var t=as;if(t){var n=t;if(!hs(e,t)){if(ds(e))throw Error(s(418));t=hi(n.nextSibling);var r=os;t&&hs(e,t)?cs(r,n):(e.flags=-4097&e.flags|2,ls=!1,os=e)}}else{if(ds(e))throw Error(s(418));e.flags=-4097&e.flags|2,ls=!1,os=e}}}function ps(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;os=e}function ms(e){if(e!==os)return!1;if(!ls)return ps(e),ls=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ri(e.type,e.memoizedProps)),t&&(t=as)){if(ds(e))throw gs(),Error(s(418));for(;t;)cs(e,t),t=hi(t.nextSibling)}if(ps(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){as=hi(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}as=null}}else as=os?hi(e.stateNode.nextSibling):null;return!0}function gs(){for(var e=as;e;)e=hi(e.nextSibling)}function ys(){as=os=null,ls=!1}function vs(e){null===us?us=[e]:us.push(e)}var bs=w.ReactCurrentBatchConfig;function ws(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Es(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ss(e){return(0,e._init)(e._payload)}function _s(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Uu(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=$u(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){var s=n.type;return s===_?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===D&&Ss(s)===t.type)?((r=i(t,n.props)).ref=ws(e,t,n),r.return=e,r):((r=Vu(n.type,n.key,n.props,null,e.mode,r)).ref=ws(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=qu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=zu(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=$u(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case E:return(n=Vu(t.type,t.key,t.props,null,e.mode,n)).ref=ws(e,null,t),n.return=e,n;case S:return(t=qu(t,e.mode,n)).return=e,t;case D:return d(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=zu(t,e.mode,n,null)).return=e,t;Es(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case E:return n.key===i?u(e,t,n,r):null;case S:return n.key===i?c(e,t,n,r):null;case D:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);Es(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case E:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case S:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case D:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);Es(t,r)}return null}function m(i,s,a,l){for(var u=null,c=null,h=s,m=s=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=f(i,h,a[m],l);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),s=o(y,s,m),null===c?u=y:c.sibling=y,c=y,h=g}if(m===a.length)return n(i,h),ls&&ns(i,m),u;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],l))&&(s=o(h,s,m),null===c?u=h:c.sibling=h,c=h);return ls&&ns(i,m),u}for(h=r(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),s=o(g,s,m),null===c?u=g:c.sibling=g,c=g);return e&&h.forEach(function(e){return t(i,e)}),ls&&ns(i,m),u}function g(i,a,l,u){var c=L(l);if("function"!==typeof c)throw Error(s(150));if(null==(l=c.call(l)))throw Error(s(151));for(var h=c=null,m=a,g=a=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=f(i,m,v.value,u);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(i,m),a=o(b,a,g),null===h?c=b:h.sibling=b,h=b,m=y}if(v.done)return n(i,m),ls&&ns(i,g),c;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=d(i,v.value,u))&&(a=o(v,a,g),null===h?c=v:h.sibling=v,h=v);return ls&&ns(i,g),c}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,u))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=o(v,a,g),null===h?c=v:h.sibling=v,h=v);return e&&m.forEach(function(e){return t(i,e)}),ls&&ns(i,g),c}return function e(r,s,o,l){if("object"===typeof o&&null!==o&&o.type===_&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case E:e:{for(var u=o.key,c=s;null!==c;){if(c.key===u){if((u=o.type)===_){if(7===c.tag){n(r,c.sibling),(s=i(c,o.props.children)).return=r,r=s;break e}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===D&&Ss(u)===c.type){n(r,c.sibling),(s=i(c,o.props)).ref=ws(r,c,o),s.return=r,r=s;break e}n(r,c);break}t(r,c),c=c.sibling}o.type===_?((s=zu(o.props.children,r.mode,l,o.key)).return=r,r=s):((l=Vu(o.type,o.key,o.props,null,r.mode,l)).ref=ws(r,s,o),l.return=r,r=l)}return a(r);case S:e:{for(c=o.key;null!==s;){if(s.key===c){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=qu(o,r.mode,l)).return=r,r=s}return a(r);case D:return e(r,s,(c=o._init)(o._payload),l)}if(te(o))return m(r,s,o,l);if(L(o))return g(r,s,o,l);Es(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=$u(o,r.mode,l)).return=r,r=s),a(r)):n(r,s)}}var ks=_s(!0),Ts=_s(!1),Is=Ci(null),xs=null,Cs=null,Ns=null;function As(){Ns=Cs=xs=null}function Rs(e){var t=Is.current;Ni(Is),e._currentValue=t}function Ds(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ps(e,t){xs=e,Ns=Cs=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ka=!0),e.firstContext=null)}function Os(e){var t=e._currentValue;if(Ns!==e)if(e={context:e,memoizedValue:t,next:null},null===Cs){if(null===xs)throw Error(s(308));Cs=e,xs.dependencies={lanes:0,firstContext:e}}else Cs=Cs.next=e;return t}var Ls=null;function Ms(e){null===Ls?Ls=[e]:Ls.push(e)}function Fs(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ms(t)):(n.next=i.next,i.next=n),t.interleaved=n,js(e,r)}function js(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Us=!1;function Vs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Bs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function $s(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function qs(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Ol)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,js(e,n)}return null===(i=r.interleaved)?(t.next=t,Ms(r)):(t.next=i.next,i.next=t),r.interleaved=t,js(e,n)}function Hs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Ks(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ws(e,t,n,r){var i=e.updateQueue;Us=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,u=l.next;l.next=null,null===o?s=u:o.next=u,o=l;var c=e.alternate;null!==c&&((a=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===a?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(null!==s){var h=i.baseState;for(o=0,c=u=l=null,a=s;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==c&&(c=c.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(f,h,d):p)||void 0===d)break e;h=F({},h,d);break e;case 2:Us=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===c?(u=c=f,l=h):c=c.next=f,o|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===c&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Bl|=o,e.lanes=o,e.memoizedState=h}}function Gs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Qs={},Ys=Ci(Qs),Xs=Ci(Qs),Js=Ci(Qs);function Zs(e){if(e===Qs)throw Error(s(174));return e}function eo(e,t){switch(Ai(Js,t),Ai(Xs,e),Ai(Ys,Qs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ni(Ys),Ai(Ys,t)}function to(){Ni(Ys),Ni(Xs),Ni(Js)}function no(e){Zs(Js.current);var t=Zs(Ys.current),n=le(t,e.type);t!==n&&(Ai(Xs,e),Ai(Ys,n))}function ro(e){Xs.current===e&&(Ni(Ys),Ni(Xs))}var io=Ci(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var oo=[];function ao(){for(var e=0;e<oo.length;e++)oo[e]._workInProgressVersionPrimary=null;oo.length=0}var lo=w.ReactCurrentDispatcher,uo=w.ReactCurrentBatchConfig,co=0,ho=null,fo=null,po=null,mo=!1,go=!1,yo=0,vo=0;function bo(){throw Error(s(321))}function wo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function Eo(e,t,n,r,i,o){if(co=o,ho=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,lo.current=null===e||null===e.memoizedState?ia:sa,e=n(r,i),go){o=0;do{if(go=!1,yo=0,25<=o)throw Error(s(301));o+=1,po=fo=null,t.updateQueue=null,lo.current=oa,e=n(r,i)}while(go)}if(lo.current=ra,t=null!==fo&&null!==fo.next,co=0,po=fo=ho=null,mo=!1,t)throw Error(s(300));return e}function So(){var e=0!==yo;return yo=0,e}function _o(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===po?ho.memoizedState=po=e:po=po.next=e,po}function ko(){if(null===fo){var e=ho.alternate;e=null!==e?e.memoizedState:null}else e=fo.next;var t=null===po?ho.memoizedState:po.next;if(null!==t)po=t,fo=e;else{if(null===e)throw Error(s(310));e={memoizedState:(fo=e).memoizedState,baseState:fo.baseState,baseQueue:fo.baseQueue,queue:fo.queue,next:null},null===po?ho.memoizedState=po=e:po=po.next=e}return po}function To(e,t){return"function"===typeof t?t(e):t}function Io(e){var t=ko(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=fo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=a=null,u=null,c=o;do{var h=c.lane;if((co&h)===h)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=d,a=r):u=u.next=d,ho.lanes|=h,Bl|=h}c=c.next}while(null!==c&&c!==o);null===u?a=r:u.next=l,ar(r,t.memoizedState)||(ka=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=u,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,ho.lanes|=o,Bl|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function xo(e){var t=ko(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(ka=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Co(){}function No(e,t){var n=ho,r=ko(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,ka=!0),r=r.queue,zo(Do.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==po&&1&po.memoizedState.tag){if(n.flags|=2048,Mo(9,Ro.bind(null,n,r,i,t),void 0,null),null===Ll)throw Error(s(349));0!==(30&co)||Ao(n,t,i)}return i}function Ao(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ho.updateQueue)?(t={lastEffect:null,stores:null},ho.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ro(e,t,n,r){t.value=n,t.getSnapshot=r,Po(t)&&Oo(e)}function Do(e,t,n){return n(function(){Po(t)&&Oo(e)})}function Po(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Oo(e){var t=js(e,1);null!==t&&lu(t,e,1,-1)}function Lo(e){var t=_o();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:To,lastRenderedState:e},t.queue=e,e=e.dispatch=Zo.bind(null,ho,e),[t.memoizedState,e]}function Mo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ho.updateQueue)?(t={lastEffect:null,stores:null},ho.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Fo(){return ko().memoizedState}function jo(e,t,n,r){var i=_o();ho.flags|=e,i.memoizedState=Mo(1|t,n,void 0,void 0===r?null:r)}function Uo(e,t,n,r){var i=ko();r=void 0===r?null:r;var s=void 0;if(null!==fo){var o=fo.memoizedState;if(s=o.destroy,null!==r&&wo(r,o.deps))return void(i.memoizedState=Mo(t,n,s,r))}ho.flags|=e,i.memoizedState=Mo(1|t,n,s,r)}function Vo(e,t){return jo(8390656,8,e,t)}function zo(e,t){return Uo(2048,8,e,t)}function Bo(e,t){return Uo(4,2,e,t)}function $o(e,t){return Uo(4,4,e,t)}function qo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ho(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Uo(4,4,qo.bind(null,t,e),n)}function Ko(){}function Wo(e,t){var n=ko();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&wo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Go(e,t){var n=ko();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&wo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Qo(e,t,n){return 0===(21&co)?(e.baseState&&(e.baseState=!1,ka=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),ho.lanes|=n,Bl|=n,e.baseState=!0),t)}function Yo(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=uo.transition;uo.transition={};try{e(!1),t()}finally{bt=n,uo.transition=r}}function Xo(){return ko().memoizedState}function Jo(e,t,n){var r=au(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ea(e))ta(t,n);else if(null!==(n=Fs(e,t,n,r))){lu(n,e,r,ou()),na(n,t,r)}}function Zo(e,t,n){var r=au(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ea(e))ta(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var l=t.interleaved;return null===l?(i.next=i,Ms(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(si){}null!==(n=Fs(e,t,i,r))&&(lu(n,e,r,i=ou()),na(n,t,r))}}function ea(e){var t=e.alternate;return e===ho||null!==t&&t===ho}function ta(e,t){go=mo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function na(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var ra={readContext:Os,useCallback:bo,useContext:bo,useEffect:bo,useImperativeHandle:bo,useInsertionEffect:bo,useLayoutEffect:bo,useMemo:bo,useReducer:bo,useRef:bo,useState:bo,useDebugValue:bo,useDeferredValue:bo,useTransition:bo,useMutableSource:bo,useSyncExternalStore:bo,useId:bo,unstable_isNewReconciler:!1},ia={readContext:Os,useCallback:function(e,t){return _o().memoizedState=[e,void 0===t?null:t],e},useContext:Os,useEffect:Vo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,jo(4194308,4,qo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return jo(4194308,4,e,t)},useInsertionEffect:function(e,t){return jo(4,2,e,t)},useMemo:function(e,t){var n=_o();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=_o();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Jo.bind(null,ho,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},_o().memoizedState=e},useState:Lo,useDebugValue:Ko,useDeferredValue:function(e){return _o().memoizedState=e},useTransition:function(){var e=Lo(!1),t=e[0];return e=Yo.bind(null,e[1]),_o().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ho,i=_o();if(ls){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Ll)throw Error(s(349));0!==(30&co)||Ao(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Vo(Do.bind(null,r,o,e),[e]),r.flags|=2048,Mo(9,Ro.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=_o(),t=Ll.identifierPrefix;if(ls){var n=ts;t=":"+t+"R"+(n=(es&~(1<<32-ot(es)-1)).toString(32)+n),0<(n=yo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=vo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},sa={readContext:Os,useCallback:Wo,useContext:Os,useEffect:zo,useImperativeHandle:Ho,useInsertionEffect:Bo,useLayoutEffect:$o,useMemo:Go,useReducer:Io,useRef:Fo,useState:function(){return Io(To)},useDebugValue:Ko,useDeferredValue:function(e){return Qo(ko(),fo.memoizedState,e)},useTransition:function(){return[Io(To)[0],ko().memoizedState]},useMutableSource:Co,useSyncExternalStore:No,useId:Xo,unstable_isNewReconciler:!1},oa={readContext:Os,useCallback:Wo,useContext:Os,useEffect:zo,useImperativeHandle:Ho,useInsertionEffect:Bo,useLayoutEffect:$o,useMemo:Go,useReducer:xo,useRef:Fo,useState:function(){return xo(To)},useDebugValue:Ko,useDeferredValue:function(e){var t=ko();return null===fo?t.memoizedState=e:Qo(t,fo.memoizedState,e)},useTransition:function(){return[xo(To)[0],ko().memoizedState]},useMutableSource:Co,useSyncExternalStore:No,useId:Xo,unstable_isNewReconciler:!1};function aa(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function la(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ua={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ou(),i=au(e),s=$s(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=qs(e,s,i))&&(lu(t,e,i,r),Hs(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ou(),i=au(e),s=$s(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=qs(e,s,i))&&(lu(t,e,i,r),Hs(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ou(),r=au(e),i=$s(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=qs(e,i,r))&&(lu(t,e,r,n),Hs(t,e,r))}};function ca(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function ha(e,t,n){var r=!1,i=Ri,s=t.contextType;return"object"===typeof s&&null!==s?s=Os(s):(i=Mi(t)?Oi:Di.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Li(e,i):Ri),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ua,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function da(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ua.enqueueReplaceState(t,t.state,null)}function fa(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Vs(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Os(s):(s=Mi(t)?Oi:Di.current,i.context=Li(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(la(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ua.enqueueReplaceState(i,i.state,null),Ws(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function pa(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ma(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ga(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ya="function"===typeof WeakMap?WeakMap:Map;function va(e,t,n){(n=$s(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Yl||(Yl=!0,Xl=r),ga(0,t)},n}function ba(e,t,n){(n=$s(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ga(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){ga(0,t),"function"!==typeof r&&(null===Jl?Jl=new Set([this]):Jl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function wa(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ya;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ru.bind(null,e,t,n),t.then(e,e))}function Ea(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function Sa(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=$s(-1,1)).tag=2,qs(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var _a=w.ReactCurrentOwner,ka=!1;function Ta(e,t,n,r){t.child=null===e?Ts(t,null,n,r):ks(t,e.child,n,r)}function Ia(e,t,n,r,i){n=n.render;var s=t.ref;return Ps(t,i),r=Eo(e,t,n,r,s,i),n=So(),null===e||ka?(ls&&n&&is(t),t.flags|=1,Ta(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Qa(e,t,i))}function xa(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||ju(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Vu(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ca(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return Qa(e,t,i)}return t.flags|=1,(e=Uu(s,r)).ref=t.ref,e.return=t,t.child=e}function Ca(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(ka=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Qa(e,t,i);0!==(131072&e.flags)&&(ka=!0)}}return Ra(e,t,n,r,i)}function Na(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ai(Ul,jl),jl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ai(Ul,jl),jl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ai(Ul,jl),jl|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ai(Ul,jl),jl|=r;return Ta(e,t,i,n),t.child}function Aa(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ra(e,t,n,r,i){var s=Mi(n)?Oi:Di.current;return s=Li(t,s),Ps(t,i),n=Eo(e,t,n,r,s,i),r=So(),null===e||ka?(ls&&r&&is(t),t.flags|=1,Ta(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Qa(e,t,i))}function Da(e,t,n,r,i){if(Mi(n)){var s=!0;Vi(t)}else s=!1;if(Ps(t,i),null===t.stateNode)Ga(e,t),ha(t,n,r),fa(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,u=n.contextType;"object"===typeof u&&null!==u?u=Os(u):u=Li(t,u=Mi(n)?Oi:Di.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==u)&&da(t,o,r,u),Us=!1;var d=t.memoizedState;o.state=d,Ws(t,r,o,i),l=t.memoizedState,a!==r||d!==l||Pi.current||Us?("function"===typeof c&&(la(t,n,c,r),l=t.memoizedState),(a=Us||ca(t,n,a,r,d,l,u))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Bs(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:aa(t.type,a),o.props=u,h=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Os(l):l=Li(t,l=Mi(n)?Oi:Di.current);var f=n.getDerivedStateFromProps;(c="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==l)&&da(t,o,r,l),Us=!1,d=t.memoizedState,o.state=d,Ws(t,r,o,i);var p=t.memoizedState;a!==h||d!==p||Pi.current||Us?("function"===typeof f&&(la(t,n,f,r),p=t.memoizedState),(u=Us||ca(t,n,u,r,d,p,l)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=u):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Pa(e,t,n,r,s,i)}function Pa(e,t,n,r,i,s){Aa(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&zi(t,n,!1),Qa(e,t,s);r=t.stateNode,_a.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=ks(t,e.child,null,s),t.child=ks(t,null,a,s)):Ta(e,t,a,s),t.memoizedState=r.state,i&&zi(t,n,!0),t.child}function Oa(e){var t=e.stateNode;t.pendingContext?ji(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ji(0,t.context,!1),eo(e,t.containerInfo)}function La(e,t,n,r,i){return ys(),vs(i),t.flags|=256,Ta(e,t,n,r),t.child}var Ma,Fa,ja,Ua,Va={dehydrated:null,treeContext:null,retryLane:0};function za(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ba(e,t,n){var r,i=t.pendingProps,o=io.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ai(io,1&o),null===e)return fs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Bu(l,i,0,null),e=zu(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=za(n),t.memoizedState=Va,e):$a(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,qa(e,t,a,r=ma(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Bu({mode:"visible",children:r.children},i,0,null),(o=zu(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&ks(t,e.child,null,a),t.child.memoizedState=za(a),t.memoizedState=Va,o);if(0===(1&t.mode))return qa(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,qa(e,t,a,r=ma(o=Error(s(419)),r,void 0))}if(l=0!==(a&e.childLanes),ka||l){if(null!==(r=Ll)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,js(e,i),lu(r,e,i,-1))}return Eu(),qa(e,t,a,r=ma(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Pu.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,as=hi(i.nextSibling),os=t,ls=!0,us=null,null!==e&&(Xi[Ji++]=es,Xi[Ji++]=ts,Xi[Ji++]=Zi,es=e.id,ts=e.overflow,Zi=t),t=$a(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(a){a=i.fallback,l=t.mode,r=(o=e.child).sibling;var u={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=u,t.deletions=null):(i=Uu(o,u)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Uu(r,a):(a=zu(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?za(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Va,i}return e=(a=e.child).sibling,i=Uu(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function $a(e,t){return(t=Bu({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function qa(e,t,n,r){return null!==r&&vs(r),ks(t,e.child,null,n),(e=$a(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ha(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ds(e.return,t,n)}function Ka(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Wa(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Ta(e,t,r.children,n),0!==(2&(r=io.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ha(e,n,t);else if(19===e.tag)Ha(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ai(io,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ka(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ka(t,!0,n,null,s);break;case"together":Ka(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ga(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Qa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Bl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Uu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Uu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ya(e,t){if(!ls)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Xa(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ja(e,t,n){var r=t.pendingProps;switch(ss(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xa(t),null;case 1:case 17:return Mi(t.type)&&Fi(),Xa(t),null;case 3:return r=t.stateNode,to(),Ni(Pi),Ni(Di),ao(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ms(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==us&&(du(us),us=null))),Fa(e,t),Xa(t),null;case 5:ro(t);var i=Zs(Js.current);if(n=t.type,null!==e&&null!=t.stateNode)ja(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Xa(t),null}if(e=Zs(Ys.current),ms(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[mi]=t,r[gi]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":Y(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var l in ve(n,o),i=null,o)if(o.hasOwnProperty(l)){var u=o[l];"children"===l?"string"===typeof u?r.textContent!==u&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,u,e),i=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,u,e),i=["children",""+u]):a.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&Ur("scroll",r)}switch(n){case"input":K(r),Z(r,o,!0);break;case"textarea":K(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[mi]=t,e[gi]=r,Ma(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":Y(e,r),i=Q(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ve(n,i),u=i)if(u.hasOwnProperty(o)){var c=u[o];"style"===o?ge(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&he(e,c):"children"===o?"string"===typeof c?("textarea"!==n||""!==c)&&de(e,c):"number"===typeof c&&de(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=c&&"onScroll"===o&&Ur("scroll",e):null!=c&&b(e,o,c,l))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Xa(t),null;case 6:if(e&&null!=t.stateNode)Ua(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Zs(Js.current),Zs(Ys.current),ms(t)){if(r=t.stateNode,n=t.memoizedProps,r[mi]=t,(o=r.nodeValue!==n)&&null!==(e=os))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[mi]=t,t.stateNode=r}return Xa(t),null;case 13:if(Ni(io),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ls&&null!==as&&0!==(1&t.mode)&&0===(128&t.flags))gs(),ys(),t.flags|=98560,o=!1;else if(o=ms(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[mi]=t}else ys(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Xa(t),o=!1}else null!==us&&(du(us),us=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&io.current)?0===Vl&&(Vl=3):Eu())),null!==t.updateQueue&&(t.flags|=4),Xa(t),null);case 4:return to(),Fa(e,t),null===e&&Br(t.stateNode.containerInfo),Xa(t),null;case 10:return Rs(t.type._context),Xa(t),null;case 19:if(Ni(io),null===(o=t.memoizedState))return Xa(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Ya(o,!1);else{if(0!==Vl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=so(e))){for(t.flags|=128,Ya(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ai(io,1&io.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>Gl&&(t.flags|=128,r=!0,Ya(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ya(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!ls)return Xa(t),null}else 2*Xe()-o.renderingStartTime>Gl&&1073741824!==n&&(t.flags|=128,r=!0,Ya(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=io.current,Ai(io,r?1&n|2:1&n),t):(Xa(t),null);case 22:case 23:return yu(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&jl)&&(Xa(t),6&t.subtreeFlags&&(t.flags|=8192)):Xa(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Za(e,t){switch(ss(t),t.tag){case 1:return Mi(t.type)&&Fi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return to(),Ni(Pi),Ni(Di),ao(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return ro(t),null;case 13:if(Ni(io),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ys()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ni(io),null;case 4:return to(),null;case 10:return Rs(t.type._context),null;case 22:case 23:return yu(),null;default:return null}}Ma=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Fa=function(){},ja=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Zs(Ys.current);var s,o=null;switch(n){case"input":i=Q(e,i),r=Q(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(c in ve(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var l=i[c];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(a.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var u=r[c];if(l=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(s in l)!l.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&l[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(o||(o=[]),o.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(o=o||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(o=o||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(a.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&Ur("scroll",e),o||l===u||(o=[])):(o=o||[]).push(c,u))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},Ua=function(e,t,n,r){n!==r&&(t.flags|=4)};var el=!1,tl=!1,nl="function"===typeof WeakSet?WeakSet:Set,rl=null;function il(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Au(e,t,r)}else n.current=null}function sl(e,t,n){try{n()}catch(r){Au(e,t,r)}}var ol=!1;function al(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&sl(t,n,s)}i=i.next}while(i!==r)}}function ll(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ul(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function cl(e){var t=e.alternate;null!==t&&(e.alternate=null,cl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[mi],delete t[gi],delete t[bi],delete t[wi],delete t[Ei])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function hl(e){return 5===e.tag||3===e.tag||4===e.tag}function dl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||hl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function fl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(fl(e,t,n),e=e.sibling;null!==e;)fl(e,t,n),e=e.sibling}function pl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(pl(e,t,n),e=e.sibling;null!==e;)pl(e,t,n),e=e.sibling}var ml=null,gl=!1;function yl(e,t,n){for(n=n.child;null!==n;)vl(e,t,n),n=n.sibling}function vl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:tl||il(n,t);case 6:var r=ml,i=gl;ml=null,yl(e,t,n),gl=i,null!==(ml=r)&&(gl?(e=ml,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ml.removeChild(n.stateNode));break;case 18:null!==ml&&(gl?(e=ml,n=n.stateNode,8===e.nodeType?ci(e.parentNode,n):1===e.nodeType&&ci(e,n),Bt(e)):ci(ml,n.stateNode));break;case 4:r=ml,i=gl,ml=n.stateNode.containerInfo,gl=!0,yl(e,t,n),ml=r,gl=i;break;case 0:case 11:case 14:case 15:if(!tl&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&sl(n,t,o),i=i.next}while(i!==r)}yl(e,t,n);break;case 1:if(!tl&&(il(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Au(n,t,a)}yl(e,t,n);break;case 21:yl(e,t,n);break;case 22:1&n.mode?(tl=(r=tl)||null!==n.memoizedState,yl(e,t,n),tl=r):yl(e,t,n);break;default:yl(e,t,n)}}function bl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new nl),t.forEach(function(t){var r=Ou.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function wl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:ml=l.stateNode,gl=!1;break e;case 3:case 4:ml=l.stateNode.containerInfo,gl=!0;break e}l=l.return}if(null===ml)throw Error(s(160));vl(o,a,i),ml=null,gl=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(si){Au(i,t,si)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)El(t,e),t=t.sibling}function El(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(wl(t,e),_l(e),4&r){try{al(3,e,e.return),ll(3,e)}catch(g){Au(e,e.return,g)}try{al(5,e,e.return)}catch(g){Au(e,e.return,g)}}break;case 1:wl(t,e),_l(e),512&r&&null!==n&&il(n,n.return);break;case 5:if(wl(t,e),_l(e),512&r&&null!==n&&il(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(g){Au(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===l&&"radio"===o.type&&null!=o.name&&X(i,o),be(l,a);var c=be(l,o);for(a=0;a<u.length;a+=2){var h=u[a],d=u[a+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):b(i,h,d,c)}switch(l){case"input":J(i,o);break;case"textarea":se(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[gi]=o}catch(g){Au(e,e.return,g)}}break;case 6:if(wl(t,e),_l(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){Au(e,e.return,g)}}break;case 3:if(wl(t,e),_l(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(g){Au(e,e.return,g)}break;case 4:default:wl(t,e),_l(e);break;case 13:wl(t,e),_l(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Wl=Xe())),4&r&&bl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(tl=(c=tl)||h,wl(t,e),tl=c):wl(t,e),_l(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!h&&0!==(1&e.mode))for(rl=e,h=e.child;null!==h;){for(d=rl=h;null!==rl;){switch(p=(f=rl).child,f.tag){case 0:case 11:case 14:case 15:al(4,f,f.return);break;case 1:il(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Au(r,n,g)}}break;case 5:il(f,f.return);break;case 22:if(null!==f.memoizedState){xl(d);continue}}null!==p?(p.return=f,rl=p):xl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,c?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,a=void 0!==(u=d.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=me("display",a))}catch(g){Au(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(g){Au(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:wl(t,e),_l(e),4&r&&bl(e);case 21:}}function _l(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(hl(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),pl(e,dl(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;fl(e,dl(e),o);break;default:throw Error(s(161))}}catch(ti){Au(e,e.return,ti)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function kl(e,t,n){rl=e,Tl(e,t,n)}function Tl(e,t,n){for(var r=0!==(1&e.mode);null!==rl;){var i=rl,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||el;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||tl;a=el;var u=tl;if(el=o,(tl=l)&&!u)for(rl=i;null!==rl;)l=(o=rl).child,22===o.tag&&null!==o.memoizedState?Cl(i):null!==l?(l.return=o,rl=l):Cl(i);for(;null!==s;)rl=s,Tl(s,t,n),s=s.sibling;rl=i,el=a,tl=u}Il(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,rl=s):Il(e)}}function Il(e){for(;null!==rl;){var t=rl;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:tl||ll(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!tl)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:aa(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Gs(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Gs(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Bt(d)}}}break;default:throw Error(s(163))}tl||512&t.flags&&ul(t)}catch(pi){Au(t,t.return,pi)}}if(t===e){rl=null;break}if(null!==(n=t.sibling)){n.return=t.return,rl=n;break}rl=t.return}}function xl(e){for(;null!==rl;){var t=rl;if(t===e){rl=null;break}var n=t.sibling;if(null!==n){n.return=t.return,rl=n;break}rl=t.return}}function Cl(e){for(;null!==rl;){var t=rl;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ll(4,t)}catch(ti){Au(t,n,ti)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(ti){Au(t,i,ti)}}var s=t.return;try{ul(t)}catch(ti){Au(t,s,ti)}break;case 5:var o=t.return;try{ul(t)}catch(ti){Au(t,o,ti)}}}catch(ti){Au(t,t.return,ti)}if(t===e){rl=null;break}var a=t.sibling;if(null!==a){a.return=t.return,rl=a;break}rl=t.return}}var Nl,Al=Math.ceil,Rl=w.ReactCurrentDispatcher,Dl=w.ReactCurrentOwner,Pl=w.ReactCurrentBatchConfig,Ol=0,Ll=null,Ml=null,Fl=0,jl=0,Ul=Ci(0),Vl=0,zl=null,Bl=0,$l=0,ql=0,Hl=null,Kl=null,Wl=0,Gl=1/0,Ql=null,Yl=!1,Xl=null,Jl=null,Zl=!1,eu=null,tu=0,nu=0,ru=null,iu=-1,su=0;function ou(){return 0!==(6&Ol)?Xe():-1!==iu?iu:iu=Xe()}function au(e){return 0===(1&e.mode)?1:0!==(2&Ol)&&0!==Fl?Fl&-Fl:null!==bs.transition?(0===su&&(su=mt()),su):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function lu(e,t,n,r){if(50<nu)throw nu=0,ru=null,Error(s(185));yt(e,n,r),0!==(2&Ol)&&e===Ll||(e===Ll&&(0===(2&Ol)&&($l|=n),4===Vl&&fu(e,Fl)),uu(e,r),1===n&&0===Ol&&0===(1&t.mode)&&(Gl=Xe()+500,$i&&Ki()))}function uu(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=ft(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=dt(e,e===Ll?Fl:0);if(0===r)null!==n&&Ge(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ge(n),1===t)0===e.tag?function(e){$i=!0,Hi(e)}(pu.bind(null,e)):Hi(pu.bind(null,e)),li(function(){0===(6&Ol)&&Ki()}),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Lu(n,cu.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function cu(e,t){if(iu=-1,su=0,0!==(6&Ol))throw Error(s(327));var n=e.callbackNode;if(Cu()&&e.callbackNode!==n)return null;var r=dt(e,e===Ll?Fl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=Su(e,r);else{t=r;var i=Ol;Ol|=2;var o=wu();for(Ll===e&&Fl===t||(Ql=null,Gl=Xe()+500,vu(e,t));;)try{ku();break}catch(l){bu(e,l)}As(),Rl.current=o,Ol=i,null!==Ml?t=0:(Ll=null,Fl=0,t=Vl)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=hu(e,i))),1===t)throw n=zl,vu(e,0),fu(e,r),uu(e,Xe()),n;if(6===t)fu(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=Su(e,r))&&(0!==(o=pt(e))&&(r=o,t=hu(e,o))),1===t))throw n=zl,vu(e,0),fu(e,r),uu(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:xu(e,Kl,Ql);break;case 3:if(fu(e,r),(130023424&r)===r&&10<(t=Wl+500-Xe())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ou(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ii(xu.bind(null,e,Kl,Ql),t);break}xu(e,Kl,Ql);break;case 4:if(fu(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Al(r/1960))-r)){e.timeoutHandle=ii(xu.bind(null,e,Kl,Ql),r);break}xu(e,Kl,Ql);break;default:throw Error(s(329))}}}return uu(e,Xe()),e.callbackNode===n?cu.bind(null,e):null}function hu(e,t){var n=Hl;return e.current.memoizedState.isDehydrated&&(vu(e,t).flags|=256),2!==(e=Su(e,t))&&(t=Kl,Kl=n,null!==t&&du(t)),e}function du(e){null===Kl?Kl=e:Kl.push.apply(Kl,e)}function fu(e,t){for(t&=~ql,t&=~$l,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function pu(e){if(0!==(6&Ol))throw Error(s(327));Cu();var t=dt(e,0);if(0===(1&t))return uu(e,Xe()),null;var n=Su(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=hu(e,r))}if(1===n)throw n=zl,vu(e,0),fu(e,t),uu(e,Xe()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xu(e,Kl,Ql),uu(e,Xe()),null}function mu(e,t){var n=Ol;Ol|=1;try{return e(t)}finally{0===(Ol=n)&&(Gl=Xe()+500,$i&&Ki())}}function gu(e){null!==eu&&0===eu.tag&&0===(6&Ol)&&Cu();var t=Ol;Ol|=1;var n=Pl.transition,r=bt;try{if(Pl.transition=null,bt=1,e)return e()}finally{bt=r,Pl.transition=n,0===(6&(Ol=t))&&Ki()}}function yu(){jl=Ul.current,Ni(Ul)}function vu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,oi(n)),null!==Ml)for(n=Ml.return;null!==n;){var r=n;switch(ss(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Fi();break;case 3:to(),Ni(Pi),Ni(Di),ao();break;case 5:ro(r);break;case 4:to();break;case 13:case 19:Ni(io);break;case 10:Rs(r.type._context);break;case 22:case 23:yu()}n=n.return}if(Ll=e,Ml=e=Uu(e.current,null),Fl=jl=t,Vl=0,zl=null,ql=$l=Bl=0,Kl=Hl=null,null!==Ls){for(t=0;t<Ls.length;t++)if(null!==(r=(n=Ls[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}Ls=null}return e}function bu(e,t){for(;;){var n=Ml;try{if(As(),lo.current=ra,mo){for(var r=ho.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}mo=!1}if(co=0,po=fo=ho=null,go=!1,yo=0,Dl.current=null,null===n||null===n.return){Vl=1,zl=t,Ml=null;break}e:{var o=e,a=n.return,l=n,u=t;if(t=Fl,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=Ea(a);if(null!==p){p.flags&=-257,Sa(p,a,l,0,t),1&p.mode&&wa(o,c,t),u=c;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(u),t.updateQueue=g}else m.add(u);break e}if(0===(1&t)){wa(o,c,t),Eu();break e}u=Error(s(426))}else if(ls&&1&l.mode){var y=Ea(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),Sa(y,a,l,0,t),vs(pa(u,l));break e}}o=u=pa(u,l),4!==Vl&&(Vl=2),null===Hl?Hl=[o]:Hl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ks(o,va(0,u,t));break e;case 1:l=u;var v=o.type,b=o.stateNode;if(0===(128&o.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Jl||!Jl.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t,Ks(o,ba(o,l,t));break e}}o=o.return}while(null!==o)}Iu(n)}catch(vi){t=vi,Ml===n&&null!==n&&(Ml=n=n.return);continue}break}}function wu(){var e=Rl.current;return Rl.current=ra,null===e?ra:e}function Eu(){0!==Vl&&3!==Vl&&2!==Vl||(Vl=4),null===Ll||0===(268435455&Bl)&&0===(268435455&$l)||fu(Ll,Fl)}function Su(e,t){var n=Ol;Ol|=2;var r=wu();for(Ll===e&&Fl===t||(Ql=null,vu(e,t));;)try{_u();break}catch(i){bu(e,i)}if(As(),Ol=n,Rl.current=r,null!==Ml)throw Error(s(261));return Ll=null,Fl=0,Vl}function _u(){for(;null!==Ml;)Tu(Ml)}function ku(){for(;null!==Ml&&!Qe();)Tu(Ml)}function Tu(e){var t=Nl(e.alternate,e,jl);e.memoizedProps=e.pendingProps,null===t?Iu(e):Ml=t,Dl.current=null}function Iu(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ja(n,t,jl)))return void(Ml=n)}else{if(null!==(n=Za(n,t)))return n.flags&=32767,void(Ml=n);if(null===e)return Vl=6,void(Ml=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ml=t);Ml=t=e}while(null!==t);0===Vl&&(Vl=5)}function xu(e,t,n){var r=bt,i=Pl.transition;try{Pl.transition=null,bt=1,function(e,t,n,r){do{Cu()}while(null!==eu);if(0!==(6&Ol))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Ll&&(Ml=Ll=null,Fl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Zl||(Zl=!0,Lu(tt,function(){return Cu(),null})),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Pl.transition,Pl.transition=null;var a=bt;bt=1;var l=Ol;Ol|=4,Dl.current=null,function(e,t){if(ei=qt,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(zs){n=null;break e}var a=0,l=-1,u=-1,c=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==o||0!==r&&3!==d.nodeType||(u=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++c===i&&(l=a),f===o&&++h===r&&(u=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ni={focusedElem:e,selectionRange:n},qt=!1,rl=t;null!==rl;)if(e=(t=rl).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,rl=e;else for(;null!==rl;){t=rl;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:aa(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(s(163))}}catch(zs){Au(t,t.return,zs)}if(null!==(e=t.sibling)){e.return=t.return,rl=e;break}rl=t.return}m=ol,ol=!1}(e,n),El(n,e),pr(ni),qt=!!ei,ni=ei=null,e.current=n,kl(n,e,i),Ye(),Ol=l,bt=a,Pl.transition=o}else e.current=n;if(Zl&&(Zl=!1,eu=e,tu=i),o=e.pendingLanes,0===o&&(Jl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),uu(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Yl)throw Yl=!1,e=Xl,Xl=null,e;0!==(1&tu)&&0!==e.tag&&Cu(),o=e.pendingLanes,0!==(1&o)?e===ru?nu++:(nu=0,ru=e):nu=0,Ki()}(e,t,n,r)}finally{Pl.transition=i,bt=r}return null}function Cu(){if(null!==eu){var e=wt(tu),t=Pl.transition,n=bt;try{if(Pl.transition=null,bt=16>e?16:e,null===eu)var r=!1;else{if(e=eu,eu=null,tu=0,0!==(6&Ol))throw Error(s(331));var i=Ol;for(Ol|=4,rl=e.current;null!==rl;){var o=rl,a=o.child;if(0!==(16&rl.flags)){var l=o.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(rl=c;null!==rl;){var h=rl;switch(h.tag){case 0:case 11:case 15:al(8,h,o)}var d=h.child;if(null!==d)d.return=h,rl=d;else for(;null!==rl;){var f=(h=rl).sibling,p=h.return;if(cl(h),h===c){rl=null;break}if(null!==f){f.return=p,rl=f;break}rl=p}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}rl=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,rl=a;else e:for(;null!==rl;){if(0!==(2048&(o=rl).flags))switch(o.tag){case 0:case 11:case 15:al(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,rl=v;break e}rl=o.return}}var b=e.current;for(rl=b;null!==rl;){var w=(a=rl).child;if(0!==(2064&a.subtreeFlags)&&null!==w)w.return=a,rl=w;else e:for(a=b;null!==rl;){if(0!==(2048&(l=rl).flags))try{switch(l.tag){case 0:case 11:case 15:ll(9,l)}}catch(vi){Au(l,l.return,vi)}if(l===a){rl=null;break e}var E=l.sibling;if(null!==E){E.return=l.return,rl=E;break e}rl=l.return}}if(Ol=i,Ki(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(vi){}r=!0}return r}finally{bt=n,Pl.transition=t}}return!1}function Nu(e,t,n){e=qs(e,t=va(0,t=pa(n,t),1),1),t=ou(),null!==e&&(yt(e,1,t),uu(e,t))}function Au(e,t,n){if(3===e.tag)Nu(e,e,n);else for(;null!==t;){if(3===t.tag){Nu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Jl||!Jl.has(r))){t=qs(t,e=ba(t,e=pa(n,e),1),1),e=ou(),null!==t&&(yt(t,1,e),uu(t,e));break}}t=t.return}}function Ru(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ou(),e.pingedLanes|=e.suspendedLanes&n,Ll===e&&(Fl&n)===n&&(4===Vl||3===Vl&&(130023424&Fl)===Fl&&500>Xe()-Wl?vu(e,0):ql|=n),uu(e,t)}function Du(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=ou();null!==(e=js(e,t))&&(yt(e,t,n),uu(e,n))}function Pu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Du(e,n)}function Ou(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Du(e,n)}function Lu(e,t){return We(e,t)}function Mu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fu(e,t,n,r){return new Mu(e,t,n,r)}function ju(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Uu(e,t){var n=e.alternate;return null===n?((n=Fu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Vu(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)ju(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case _:return zu(n.children,i,o,t);case k:a=8,i|=8;break;case T:return(e=Fu(12,n,t,2|i)).elementType=T,e.lanes=o,e;case N:return(e=Fu(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=Fu(19,n,t,i)).elementType=A,e.lanes=o,e;case P:return Bu(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case I:a=10;break e;case x:a=9;break e;case C:a=11;break e;case R:a=14;break e;case D:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Fu(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function zu(e,t,n,r){return(e=Fu(7,e,r,t)).lanes=n,e}function Bu(e,t,n,r){return(e=Fu(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function $u(e,t,n){return(e=Fu(6,e,null,t)).lanes=n,e}function qu(e,t,n){return(t=Fu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Hu(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Ku(e,t,n,r,i,s,o,a,l){return e=new Hu(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Fu(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Vs(s),e}function Wu(e){if(!e)return Ri;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Mi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Mi(n))return Ui(e,n,t)}return t}function Gu(e,t,n,r,i,s,o,a,l){return(e=Ku(n,r,!0,e,0,s,0,a,l)).context=Wu(null),n=e.current,(s=$s(r=ou(),i=au(n))).callback=void 0!==t&&null!==t?t:null,qs(n,s,i),e.current.lanes=i,yt(e,i,r),uu(e,r),e}function Qu(e,t,n,r){var i=t.current,s=ou(),o=au(i);return n=Wu(n),null===t.context?t.context=n:t.pendingContext=n,(t=$s(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=qs(i,t,o))&&(lu(e,i,o,s),Hs(e,i,o)),o}function Yu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Xu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Ju(e,t){Xu(e,t),(e=e.alternate)&&Xu(e,t)}Nl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Pi.current)ka=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ka=!1,function(e,t,n){switch(t.tag){case 3:Oa(t),ys();break;case 5:no(t);break;case 1:Mi(t.type)&&Vi(t);break;case 4:eo(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ai(Is,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ai(io,1&io.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ba(e,t,n):(Ai(io,1&io.current),null!==(e=Qa(e,t,n))?e.sibling:null);Ai(io,1&io.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Wa(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ai(io,io.current),r)break;return null;case 22:case 23:return t.lanes=0,Na(e,t,n)}return Qa(e,t,n)}(e,t,n);ka=0!==(131072&e.flags)}else ka=!1,ls&&0!==(1048576&t.flags)&&rs(t,Yi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ga(e,t),e=t.pendingProps;var i=Li(t,Di.current);Ps(t,n),i=Eo(null,t,r,e,i,n);var o=So();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Mi(r)?(o=!0,Vi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Vs(t),i.updater=ua,t.stateNode=i,i._reactInternals=t,fa(t,r,e,n),t=Pa(null,t,r,!0,o,n)):(t.tag=0,ls&&o&&is(t),Ta(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ga(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return ju(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===R)return 14}return 2}(r),e=aa(r,e),i){case 0:t=Ra(null,t,r,e,n);break e;case 1:t=Da(null,t,r,e,n);break e;case 11:t=Ia(null,t,r,e,n);break e;case 14:t=xa(null,t,r,aa(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ra(e,t,r,i=t.elementType===r?i:aa(r,i),n);case 1:return r=t.type,i=t.pendingProps,Da(e,t,r,i=t.elementType===r?i:aa(r,i),n);case 3:e:{if(Oa(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,Bs(e,t),Ws(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=La(e,t,r,n,i=pa(Error(s(423)),t));break e}if(r!==i){t=La(e,t,r,n,i=pa(Error(s(424)),t));break e}for(as=hi(t.stateNode.containerInfo.firstChild),os=t,ls=!0,us=null,n=Ts(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ys(),r===i){t=Qa(e,t,n);break e}Ta(e,t,r,n)}t=t.child}return t;case 5:return no(t),null===e&&fs(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ri(r,i)?a=null:null!==o&&ri(r,o)&&(t.flags|=32),Aa(e,t),Ta(e,t,a,n),t.child;case 6:return null===e&&fs(t),null;case 13:return Ba(e,t,n);case 4:return eo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ks(t,null,r,n):Ta(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ia(e,t,r,i=t.elementType===r?i:aa(r,i),n);case 7:return Ta(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ta(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,Ai(Is,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!Pi.current){t=Qa(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===o.tag){(u=$s(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}o.lanes|=n,null!==(u=o.alternate)&&(u.lanes|=n),Ds(o.return,n,t),l.lanes|=n;break}u=u.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Ds(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}Ta(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ps(t,n),r=r(i=Os(i)),t.flags|=1,Ta(e,t,r,n),t.child;case 14:return i=aa(r=t.type,t.pendingProps),xa(e,t,r,i=aa(r.type,i),n);case 15:return Ca(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:aa(r,i),Ga(e,t),t.tag=1,Mi(r)?(e=!0,Vi(t)):e=!1,Ps(t,n),ha(t,r,i),fa(t,r,i,n),Pa(null,t,r,!0,e,n);case 19:return Wa(e,t,n);case 22:return Na(e,t,n)}throw Error(s(156,t.tag))};var Zu="function"===typeof reportError?reportError:function(e){console.error(e)};function ec(e){this._internalRoot=e}function tc(e){this._internalRoot=e}function nc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function rc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function ic(){}function sc(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=Yu(o);a.call(e)}}Qu(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Yu(o);s.call(e)}}var o=Gu(t,r,e,0,null,!1,0,"",ic);return e._reactRootContainer=o,e[yi]=o.current,Br(8===e.nodeType?e.parentNode:e),gu(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Yu(l);a.call(e)}}var l=Ku(e,0,!1,null,0,!1,0,"",ic);return e._reactRootContainer=l,e[yi]=l.current,Br(8===e.nodeType?e.parentNode:e),gu(function(){Qu(t,l,n,r)}),l}(n,t,e,i,r);return Yu(o)}tc.prototype.render=ec.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Qu(e,t,null,null)},tc.prototype.unmount=ec.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;gu(function(){Qu(null,e,null,null)}),t[yi]=null}},tc.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Ft(e)}},Et=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(vt(t,1|n),uu(t,Xe()),0===(6&Ol)&&(Gl=Xe()+500,Ki()))}break;case 13:gu(function(){var t=js(e,1);if(null!==t){var n=ou();lu(t,e,1,n)}}),Ju(e,1)}},St=function(e){if(13===e.tag){var t=js(e,134217728);if(null!==t)lu(t,e,134217728,ou());Ju(e,134217728)}},_t=function(e){if(13===e.tag){var t=au(e),n=js(e,t);if(null!==n)lu(n,e,t,ou());Ju(e,t)}},kt=function(){return bt},Tt=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},Se=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Ti(r);if(!i)throw Error(s(90));W(r),J(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=mu,Ne=gu;var oc={usingClientEntryPoint:!1,Events:[_i,ki,Ti,Ie,xe,mu]},ac={findFiberByHostInstance:Si,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lc={bundleType:ac.bundleType,version:ac.version,rendererPackageName:ac.rendererPackageName,rendererConfig:ac.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:ac.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var uc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uc.isDisabled&&uc.supportsFiber)try{it=uc.inject(lc),st=uc}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!nc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!nc(e))throw Error(s(299));var n=!1,r="",i=Zu;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Ku(e,1,!1,null,0,n,0,r,i),e[yi]=t.current,Br(8===e.nodeType?e.parentNode:e),new ec(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return gu(e)},t.hydrate=function(e,t,n){if(!rc(t))throw Error(s(200));return sc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!nc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Zu;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Gu(t,null,e,1,null!=n?n:null,i,0,o,a),e[yi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new tc(t)},t.render=function(e,t,n){if(!rc(t))throw Error(s(200));return sc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!rc(e))throw Error(s(40));return!!e._reactRootContainer&&(gu(function(){sc(null,null,e,!1,function(){e._reactRootContainer=null,e[yi]=null})}),!0)},t.unstable_batchedUpdates=mu,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!rc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return sc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}();var r=n(43),i=n(391);const s=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},o={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,u=t>>2,c=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),r.push(n[u],n[c],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(s(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const l=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==l)throw new a;const u=t<<2|s>>4;if(r.push(u),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==l){const e=o<<6&192|l;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class a extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const l=function(e){return function(e){const t=s(e);return o.encodeByteArray(t,!0)}(e).replace(/\./g,"")},u=function(e){try{return o.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};const c=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,h=()=>{try{return c()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&u(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},d=e=>{var t,n;return null===(n=null===(t=h())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},f=()=>{var e;return null===(e=h())||void 0===e?void 0:e.config},p=e=>{var t;return null===(t=h())||void 0===t?void 0:t[`_${e}`]};class m{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function g(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function y(){try{return"object"===typeof indexedDB}catch(e){return!1}}class v extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,v.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,b.prototype.create)}}class b{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${e}`,r=this.errors[e],i=r?function(e,t){return e.replace(w,(e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`})}(r,t):"Error",s=`${this.serviceName}: ${i} (${n}).`;return new v(n,s,t)}}const w=/\{\$([^}]+)}/g;function E(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(S(n)&&S(s)){if(!E(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function S(e){return null!==e&&"object"===typeof e}function _(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function k(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function T(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class I{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=x),void 0===r.error&&(r.error=x),void 0===r.complete&&(r.complete=x);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function x(){}function C(e){return e&&e._delegate?e._delegate:e}class N{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const A="[DEFAULT]";class R{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new m;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:A})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===A?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A;return this.component?this.component.multipleInstances?e:A:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class D{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new R(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const P=[];var O;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(O||(O={}));const L={debug:O.DEBUG,verbose:O.VERBOSE,info:O.INFO,warn:O.WARN,error:O.ERROR,silent:O.SILENT},M=O.INFO,F={[O.DEBUG]:"log",[O.VERBOSE]:"log",[O.INFO]:"info",[O.WARN]:"warn",[O.ERROR]:"error"},j=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=F[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r](`[${n}]  ${e.name}:`,...s)};class U{constructor(e){this.name=e,this._logLevel=M,this._logHandler=j,this._userLogHandler=null,P.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in O))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?L[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,O.DEBUG,...t),this._logHandler(this,O.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,O.VERBOSE,...t),this._logHandler(this,O.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,O.INFO,...t),this._logHandler(this,O.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,O.WARN,...t),this._logHandler(this,O.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,O.ERROR,...t),this._logHandler(this,O.ERROR,...t)}}let V,z;const B=new WeakMap,$=new WeakMap,q=new WeakMap,H=new WeakMap,K=new WeakMap;let W={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return $.get(e);if("objectStoreNames"===t)return e.objectStoreNames||q.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Y(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function G(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(z||(z=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(X(this),n),Y(B.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Y(e.apply(X(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(X(this),t,...r);return q.set(s,t.sort?t.sort():[t]),Y(s)}}function Q(e){return"function"===typeof e?G(e):(e instanceof IDBTransaction&&function(e){if($.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});$.set(e,t)}(e),t=e,(V||(V=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,W):e);var t}function Y(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(Y(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&B.set(t,e)}).catch(()=>{}),K.set(t,e),t}(e);if(H.has(e))return H.get(e);const t=Q(e);return t!==e&&(H.set(e,t),K.set(t,e)),t}const X=e=>K.get(e);const J=["get","getKey","getAll","getAllKeys","count"],Z=["put","add","delete","clear"],ee=new Map;function te(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(ee.get(t))return ee.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Z.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!J.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return ee.set(t,s),s}W=(e=>({...e,get:(t,n,r)=>te(t,n)||e.get(t,n,r),has:(t,n)=>!!te(t,n)||e.has(t,n)}))(W);class ne{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const re="@firebase/app",ie="0.9.13",se=new U("@firebase/app"),oe="@firebase/app-compat",ae="@firebase/analytics-compat",le="@firebase/analytics",ue="@firebase/app-check-compat",ce="@firebase/app-check",he="@firebase/auth",de="@firebase/auth-compat",fe="@firebase/database",pe="@firebase/database-compat",me="@firebase/functions",ge="@firebase/functions-compat",ye="@firebase/installations",ve="@firebase/installations-compat",be="@firebase/messaging",we="@firebase/messaging-compat",Ee="@firebase/performance",Se="@firebase/performance-compat",_e="@firebase/remote-config",ke="@firebase/remote-config-compat",Te="@firebase/storage",Ie="@firebase/storage-compat",xe="@firebase/firestore",Ce="@firebase/firestore-compat",Ne="firebase",Ae="[DEFAULT]",Re={[re]:"fire-core",[oe]:"fire-core-compat",[le]:"fire-analytics",[ae]:"fire-analytics-compat",[ce]:"fire-app-check",[ue]:"fire-app-check-compat",[he]:"fire-auth",[de]:"fire-auth-compat",[fe]:"fire-rtdb",[pe]:"fire-rtdb-compat",[me]:"fire-fn",[ge]:"fire-fn-compat",[ye]:"fire-iid",[ve]:"fire-iid-compat",[be]:"fire-fcm",[we]:"fire-fcm-compat",[Ee]:"fire-perf",[Se]:"fire-perf-compat",[_e]:"fire-rc",[ke]:"fire-rc-compat",[Te]:"fire-gcs",[Ie]:"fire-gcs-compat",[xe]:"fire-fst",[Ce]:"fire-fst-compat","fire-js":"fire-js",[Ne]:"fire-js-all"},De=new Map,Pe=new Map;function Oe(e,t){try{e.container.addComponent(t)}catch(n){se.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Le(e){const t=e.name;if(Pe.has(t))return se.debug(`There were multiple attempts to register component ${t}.`),!1;Pe.set(t,e);for(const n of De.values())Oe(n,e);return!0}function Me(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const Fe=new b("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class je{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new N("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fe.create("app-deleted",{appName:this._name})}}const Ue="9.23.0";function Ve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Ae,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Fe.create("bad-app-name",{appName:String(i)});if(n||(n=f()),!n)throw Fe.create("no-options");const s=De.get(i);if(s){if(E(n,s.options)&&E(r,s.config))return s;throw Fe.create("duplicate-app",{appName:i})}const o=new D(i);for(const l of Pe.values())o.addComponent(l);const a=new je(n,r,o);return De.set(i,a),a}function ze(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae;const t=De.get(e);if(!t&&e===Ae&&f())return Ve();if(!t)throw Fe.create("no-app",{appName:e});return t}function Be(e,t,n){var r;let i=null!==(r=Re[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=[`Unable to register library "${i}" with version "${t}":`];return s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void se.warn(e.join(" "))}Le(new N(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}const $e="firebase-heartbeat-store";let qe=null;function He(){return qe||(qe=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=Y(o);return r&&o.addEventListener("upgradeneeded",e=>{r(Y(o.result),e.oldVersion,e.newVersion,Y(o.transaction),e)}),n&&o.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore($e)}}).catch(e=>{throw Fe.create("idb-open",{originalErrorMessage:e.message})})),qe}async function Ke(e,t){try{const n=(await He()).transaction($e,"readwrite"),r=n.objectStore($e);await r.put(t,We(e)),await n.done}catch(n){if(n instanceof v)se.warn(n.message);else{const e=Fe.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});se.warn(e.message)}}}function We(e){return`${e.name}!${e.options.appId}`}class Ge{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Ye(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=Qe();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some(e=>e.date===t))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=Qe(),{heartbeatsToSend:t,unsentEntries:n}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),Xe(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Xe(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=l(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function Qe(){return(new Date).toISOString().substring(0,10)}class Ye{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!y()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=await He();return await t.transaction($e).objectStore($e).get(We(e))}catch(t){if(t instanceof v)se.warn(t.message);else{const e=Fe.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});se.warn(e.message)}}}(this.app);return e||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Ke(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Ke(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Xe(e){return l(JSON.stringify({version:2,heartbeats:e})).length}var Je;Je="",Le(new N("platform-logger",e=>new ne(e),"PRIVATE")),Le(new N("heartbeat",e=>new Ge(e),"PRIVATE")),Be(re,ie,Je),Be(re,ie,"esm2017"),Be("fire-js","");Be("firebase","9.23.0","app");function Ze(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function et(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const tt=et,nt=new b("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),rt=new U("@firebase/auth");function it(e){if(rt.logLevel<=O.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];rt.error(`Auth (${Ue}): ${e}`,...n)}}function st(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw lt(e,...n)}function ot(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return lt(e,...n)}function at(e,t,n){const r=Object.assign(Object.assign({},tt()),{[t]:n});return new b("auth","Firebase",r).create(t,{appName:e.name})}function lt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return nt.create(e,...n)}function ut(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw lt(t,...r)}}function ct(e){const t="INTERNAL ASSERTION FAILED: "+e;throw it(t),new Error(t)}function ht(e,t){e||ct(t)}function dt(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function ft(){return"http:"===pt()||"https:"===pt()}function pt(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function mt(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(ft()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class gt{constructor(e,t){this.shortDelay=e,this.longDelay=t,ht(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(g())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return mt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function yt(e,t){ht(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class vt{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void ct("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void ct("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void ct("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const bt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},wt=new gt(3e4,6e4);function Et(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function St(e,t,n,r){return _t(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=_(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),vt.fetch()(Tt(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))})}async function _t(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},bt),t);try{const t=new It(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw xt(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw xt(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw xt(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw xt(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw at(e,a,o);st(e,a)}}catch(i){if(i instanceof v)throw i;st(e,"network-request-failed",{message:String(i)})}}async function kt(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await St(e,t,n,r,i);return"mfaPendingCredential"in s&&st(e,"multi-factor-auth-required",{_serverResponse:s}),s}function Tt(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?yt(e.config,i):`${e.config.apiScheme}://${i}`}class It{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(ot(this.auth,"network-request-failed")),wt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function xt(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=ot(e,t,r);return i.customData._tokenResponse=n,i}function Ct(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function Nt(e){return 1e3*Number(e)}function At(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return it("JWT malformed, contained fewer than 3 sections"),null;try{const e=u(n);return e?JSON.parse(e):(it("Failed to decode base64 JWT payload"),null)}catch(i){return it("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}async function Rt(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof v&&function(e){let{code:t}=e;return"auth/user-disabled"===t||"auth/user-token-expired"===t}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class Dt{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===(null===e||void 0===e?void 0:e.code)&&this.schedule(!0))}this.schedule()}}class Pt{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ct(this.lastLoginAt),this.creationTime=Ct(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Ot(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Rt(e,async function(e,t){return St(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));ut(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map(e=>{var{providerId:t}=e,n=Ze(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}):[];const a=(l=e.providerData,u=o,[...l.filter(e=>!u.some(t=>t.providerId===e.providerId)),...u]);var l,u;const c=e.isAnonymous,h=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),d=!!c&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Pt(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}class Lt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ut(e.idToken,"internal-error"),ut("undefined"!==typeof e.idToken,"internal-error"),ut("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){const t=At(e);return ut(t,"internal-error"),ut("undefined"!==typeof t.exp,"internal-error"),ut("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return ut(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await _t(e,{},async()=>{const n=_({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=Tt(e,r,"/v1/token",`key=${i}`),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",vt.fetch()(s,{method:"POST",headers:o,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Lt;return n&&(ut("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(ut("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(ut("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Lt,this.toJSON())}_performRefresh(){return ct("not implemented")}}function Mt(e,t){ut("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Ft{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=Ze(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Dt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Pt(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Rt(this,this.stsTokenManager.getToken(this.auth,e));return ut(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=C(e),r=await n.getIdToken(t),i=At(r);ut(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Ct(Nt(i.auth_time)),issuedAtTime:Ct(Nt(i.iat)),expirationTime:Ct(Nt(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=C(e);await Ot(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(ut(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ft(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ut(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Ot(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Rt(this,async function(e,t){return St(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,u;const c=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:v,emailVerified:b,isAnonymous:w,providerData:E,stsTokenManager:S}=t;ut(v&&S,e,"internal-error");const _=Lt.fromJSON(this.name,S);ut("string"===typeof v,e,"internal-error"),Mt(c,e.name),Mt(h,e.name),ut("boolean"===typeof b,e,"internal-error"),ut("boolean"===typeof w,e,"internal-error"),Mt(d,e.name),Mt(f,e.name),Mt(p,e.name),Mt(m,e.name),Mt(g,e.name),Mt(y,e.name);const k=new Ft({uid:v,auth:e,email:h,emailVerified:b,displayName:c,isAnonymous:w,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:_,createdAt:g,lastLoginAt:y});return E&&Array.isArray(E)&&(k.providerData=E.map(e=>Object.assign({},e))),m&&(k._redirectEventId=m),k}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Lt;r.updateFromServerResponse(t);const i=new Ft({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Ot(i),i}}const jt=new Map;function Ut(e){ht(e instanceof Function,"Expected a class definition");let t=jt.get(e);return t?(ht(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,jt.set(e,t),t)}class Vt{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Vt.type="NONE";const zt=Vt;function Bt(e,t,n){return`firebase:${e}:${t}:${n}`}class $t{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Bt(this.userKey,r.apiKey,i),this.fullPersistenceKey=Bt("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ft._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new $t(Ut(zt),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||Ut(zt);const s=Bt(n,e.config.apiKey,e.name);let o=null;for(const u of t)try{const t=await u._get(s);if(t){const n=Ft._fromJSON(e,t);u!==i&&(o=n),i=u;break}}catch(l){}const a=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(s)}catch(l){}})),new $t(i,e,n)):new $t(i,e,n)}}function qt(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Gt(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Ht(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Yt(t))return"Blackberry";if(Xt(t))return"Webos";if(Kt(t))return"Safari";if((t.includes("chrome/")||Wt(t))&&!t.includes("edge/"))return"Chrome";if(Qt(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Ht(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g();return/firefox\//i.test(e)}function Kt(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:g()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Wt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g();return/crios\//i.test(e)}function Gt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g();return/iemobile/i.test(e)}function Qt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g();return/android/i.test(e)}function Yt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g();return/blackberry/i.test(e)}function Xt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g();return/webos/i.test(e)}function Jt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Zt(){return function(){const e=g();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function en(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g();return Jt(e)||Qt(e)||Xt(e)||Yt(e)||/windows phone/i.test(e)||Gt(e)}function tn(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=qt(g());break;case"Worker":t=`${qt(g())}-${e}`;break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ue}/${r}`}async function nn(e,t){return St(e,"GET","/v2/recaptchaConfig",Et(e,t))}function rn(e){return void 0!==e&&void 0!==e.enterprise}class sn{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(e=>"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState)}}function on(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=ot("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})}function an(e){return`__${e}${Math.floor(1e6*Math.random())}`}class ln{constructor(e){this.type="recaptcha-enterprise",this.auth=dn(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;rn(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n("NO_RECAPTCHA")})}):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{nn(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new sn(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&rn(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));on("https://www.google.com/recaptcha/enterprise.js?render="+i).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function un(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new ln(e);let s;try{s=await i.verify(n)}catch(a){s=await i.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}class cn{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(i){r(i)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class hn{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new fn(this),this.idTokenSubscription=new fn(this),this.beforeStateQueue=new cn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=nt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ut(t)),this._initializationPromise=this.queue(async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await $t.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ut(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Ot(e)}catch(t){if("auth/network-request-failed"!==(null===t||void 0===t?void 0:t.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?C(e):null;return t&&ut(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&ut(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Ut(e))})}async initializeRecaptchaConfig(){const e=await nn(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),t=new sn(e);if(null==this.tenantId?this._agentRecaptchaConfig=t:this._tenantRecaptchaConfigs[this.tenantId]=t,t.emailPasswordEnabled){new ln(this).verify()}}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new b("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ut(e)||this._popupRedirectResolver;ut(t,this,"argument-error"),this.redirectPersistenceManager=await $t.create(this,[Ut(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return ut(s,this,"internal-error"),s.then(()=>i(this.currentUser)),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ut(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=tn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(rt.logLevel<=O.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];rt.warn(`Auth (${Ue}): ${e}`,...n)}}(`Error while retrieving App Check token: ${t.error}`),null===t||void 0===t?void 0:t.token}}function dn(e){return C(e)}class fn{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new I(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return ut(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function pn(e,t,n){const r=dn(e);ut(r._canInitEmulator,r,"emulator-config-failed"),ut(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=mn(t),{host:o,port:a}=function(e){const t=mn(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:gn(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:gn(t)}}}(t),l=null===a?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function mn(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function gn(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class yn{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ct("not implemented")}_getIdTokenResponse(e){return ct("not implemented")}_linkToIdToken(e,t){return ct("not implemented")}_getReauthenticationResolver(e){return ct("not implemented")}}async function vn(e,t){return St(e,"POST","/v1/accounts:update",t)}async function bn(e,t){return kt(e,"POST","/v1/accounts:signInWithPassword",Et(e,t))}class wn extends yn{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new wn(e,t,"password")}static _fromEmailAndCode(e,t){return new wn(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){var t;switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(null===(t=e._getRecaptchaConfig())||void 0===t?void 0:t.emailPasswordEnabled){const t=await un(e,n,"signInWithPassword");return bn(e,t)}return bn(e,n).catch(async t=>{if("auth/missing-recaptcha-token"===t.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const t=await un(e,n,"signInWithPassword");return bn(e,t)}return Promise.reject(t)});case"emailLink":return async function(e,t){return kt(e,"POST","/v1/accounts:signInWithEmailLink",Et(e,t))}(e,{email:this._email,oobCode:this._password});default:st(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return vn(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return kt(e,"POST","/v1/accounts:signInWithEmailLink",Et(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:st(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function En(e,t){return kt(e,"POST","/v1/accounts:signInWithIdp",Et(e,t))}class Sn extends yn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Sn(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):st("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=Ze(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new Sn(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return En(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,En(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,En(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=_(t)}return e}}const _n={USER_NOT_FOUND:"user-not-found"};class kn extends yn{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new kn({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new kn({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return kt(e,"POST","/v1/accounts:signInWithPhoneNumber",Et(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await kt(e,"POST","/v1/accounts:signInWithPhoneNumber",Et(e,t));if(n.temporaryProof)throw xt(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return kt(e,"POST","/v1/accounts:signInWithPhoneNumber",Et(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),_n)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new kn({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Tn{constructor(e){var t,n,r,i,s,o;const a=k(T(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,u=null!==(n=a.oobCode)&&void 0!==n?n:null,c=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);ut(l&&u&&c,"argument-error"),this.apiKey=l,this.operation=c,this.code=u,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=k(T(e)).link,n=t?k(T(t)).deep_link_id:null,r=k(T(e)).deep_link_id;return(r?k(T(r)).link:null)||r||n||t||e}(e);try{return new Tn(t)}catch(n){return null}}}class In{constructor(){this.providerId=In.PROVIDER_ID}static credential(e,t){return wn._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Tn.parseLink(t);return ut(n,"argument-error"),wn._fromEmailAndCode(e,n.code,n.tenantId)}}In.PROVIDER_ID="password",In.EMAIL_PASSWORD_SIGN_IN_METHOD="password",In.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class xn{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Cn extends xn{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Nn extends Cn{constructor(){super("facebook.com")}static credential(e){return Sn._fromParams({providerId:Nn.PROVIDER_ID,signInMethod:Nn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Nn.credentialFromTaggedObject(e)}static credentialFromError(e){return Nn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Nn.credential(t.oauthAccessToken)}catch(n){return null}}}Nn.FACEBOOK_SIGN_IN_METHOD="facebook.com",Nn.PROVIDER_ID="facebook.com";class An extends Cn{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Sn._fromParams({providerId:An.PROVIDER_ID,signInMethod:An.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return An.credentialFromTaggedObject(e)}static credentialFromError(e){return An.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return An.credential(n,r)}catch(i){return null}}}An.GOOGLE_SIGN_IN_METHOD="google.com",An.PROVIDER_ID="google.com";class Rn extends Cn{constructor(){super("github.com")}static credential(e){return Sn._fromParams({providerId:Rn.PROVIDER_ID,signInMethod:Rn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Rn.credentialFromTaggedObject(e)}static credentialFromError(e){return Rn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Rn.credential(t.oauthAccessToken)}catch(n){return null}}}Rn.GITHUB_SIGN_IN_METHOD="github.com",Rn.PROVIDER_ID="github.com";class Dn extends Cn{constructor(){super("twitter.com")}static credential(e,t){return Sn._fromParams({providerId:Dn.PROVIDER_ID,signInMethod:Dn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Dn.credentialFromTaggedObject(e)}static credentialFromError(e){return Dn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Dn.credential(n,r)}catch(i){return null}}}async function Pn(e,t){return kt(e,"POST","/v1/accounts:signUp",Et(e,t))}Dn.TWITTER_SIGN_IN_METHOD="twitter.com",Dn.PROVIDER_ID="twitter.com";class On{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await Ft._fromIdTokenResponse(e,n,r),s=Ln(n);return new On({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Ln(n);return new On({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Ln(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Mn extends v{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Mn.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Mn(e,t,n,r)}}function Fn(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw Mn._fromErrorAndOperation(e,n,t,r);throw n})}async function jn(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Rt(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return On._forOperation(e,"link",r)}async function Un(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e,i="reauthenticate";try{const s=await Rt(e,Fn(r,i,t,e),n);ut(s.idToken,r,"internal-error");const o=At(s.idToken);ut(o,r,"internal-error");const{sub:a}=o;return ut(e.uid===a,r,"user-mismatch"),On._forOperation(e,i,s)}catch(s){throw"auth/user-not-found"===(null===s||void 0===s?void 0:s.code)&&st(r,"user-mismatch"),s}}async function Vn(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r="signIn",i=await Fn(e,r,t),s=await On._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}new WeakMap;const zn="__sak";class Bn{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(zn,"1"),this.storage.removeItem(zn),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class $n extends Bn{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=g();return Kt(e)||Jt(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=en(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Zt()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}$n.type="LOCAL";const qn=$n;class Hn extends Bn{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Hn.type="SESSION";const Kn=Hn;class Wn{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new Wn(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map(async e=>e(t.origin,i)),a=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Gn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Wn.receivers=[];class Qn{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise((o,a)=>{const l=Gn("",20);r.port1.start();const u=setTimeout(()=>{a(new Error("unsupported_event"))},n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(u),i=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(u),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function Yn(){return window}function Xn(){return"undefined"!==typeof Yn().WorkerGlobalScope&&"function"===typeof Yn().importScripts}const Jn="firebaseLocalStorageDb",Zn="firebaseLocalStorage",er="fbase_key";class tr{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function nr(e,t){return e.transaction([Zn],t?"readwrite":"readonly").objectStore(Zn)}function rr(){const e=indexedDB.open(Jn,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Zn,{keyPath:er})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Zn)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Jn);return new tr(e).toPromise()}(),t(await rr()))})})}async function ir(e,t,n){const r=nr(e,!0).put({[er]:t,value:n});return new tr(r).toPromise()}function sr(e,t){const n=nr(e,!0).delete(t);return new tr(n).toPromise()}class or{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await rr()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Xn()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Wn._getInstance(Xn()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Qn(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await rr();return await ir(e,zn,"1"),await sr(e,zn),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>ir(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=nr(e,!1).get(t),r=await new tr(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>sr(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=nr(e,!1).getAll();return new tr(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}or.type="LOCAL";const ar=or;an("rcb"),new gt(3e4,6e4);const lr="recaptcha";async function ur(e,t,n){var r;const i=await n.verify();try{let s;if(ut("string"===typeof i,e,"argument-error"),ut(n.type===lr,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){ut("enroll"===t.type,e,"internal-error");const n=await function(e,t){return St(e,"POST","/v2/accounts/mfaEnrollment:start",Et(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{ut("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;ut(n,e,"missing-multi-factor-info");const o=await function(e,t){return St(e,"POST","/v2/accounts/mfaSignIn:start",Et(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return St(e,"POST","/v1/accounts:sendVerificationCode",Et(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class cr{constructor(e){this.providerId=cr.PROVIDER_ID,this.auth=dn(e)}verifyPhoneNumber(e,t){return ur(this.auth,e,C(t))}static credential(e,t){return kn._fromVerification(e,t)}static credentialFromResult(e){const t=e;return cr.credentialFromTaggedObject(t)}static credentialFromError(e){return cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?kn._fromTokenResponse(n,r):null}}function hr(e,t){return t?Ut(t):(ut(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}cr.PROVIDER_ID="phone",cr.PHONE_SIGN_IN_METHOD="phone";class dr extends yn{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return En(e,this._buildIdpRequest())}_linkToIdToken(e,t){return En(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return En(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function fr(e){return Vn(e.auth,new dr(e),e.bypassAuthState)}function pr(e){const{auth:t,user:n}=e;return ut(n,t,"internal-error"),Un(n,new dr(e),e.bypassAuthState)}async function mr(e){const{auth:t,user:n}=e;return ut(n,t,"internal-error"),jn(n,new dr(e),e.bypassAuthState)}class gr{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return fr;case"linkViaPopup":case"linkViaRedirect":return mr;case"reauthViaPopup":case"reauthViaRedirect":return pr;default:st(this.auth,"internal-error")}}resolve(e){ht(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ht(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const yr=new gt(2e3,1e4);class vr extends gr{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,vr.currentPopupAction&&vr.currentPopupAction.cancel(),vr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ut(e,this.auth,"internal-error"),e}async onExecution(){ht(1===this.filter.length,"Popup operations only handle one event");const e=Gn();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(ot(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(ot(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,vr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ot(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,yr.get())};e()}}vr.currentPopupAction=null;const br=new Map;class wr extends gr{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=br.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=_r(t),r=Sr(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}br.set(this.auth._key(),e)}return this.bypassAuthState||br.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Er(e,t){br.set(e._key(),t)}function Sr(e){return Ut(e._redirectPersistence)}function _r(e){return Bt("pendingRedirect",e.config.apiKey,e.name)}async function kr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=dn(e),i=hr(r,t),s=new wr(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}class Tr{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xr(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!xr(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(ot(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ir(e))}saveEventToCache(e){this.cachedEventUids.add(Ir(e)),this.lastProcessedEventTime=Date.now()}}function Ir(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function xr(e){let{type:t,error:n}=e;return"unknown"===t&&"auth/no-auth-event"===(null===n||void 0===n?void 0:n.code)}const Cr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Nr=/^https?/;async function Ar(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return St(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(Rr(r))return}catch(n){}st(e,"unauthorized-domain")}function Rr(e){const t=dt(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Nr.test(n))return!1;if(Cr.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Dr=new gt(3e4,6e4);function Pr(){const e=Yn().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let Or=null;function Lr(e){return Or=Or||function(e){return new Promise((t,n)=>{var r,i,s;function o(){Pr(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Pr(),n(ot(e,"network-request-failed"))},timeout:Dr.get()})}if(null===(i=null===(r=Yn().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Yn().gapi)||void 0===s?void 0:s.load)){const t=an("iframefcb");return Yn()[t]=()=>{gapi.load?o():n(ot(e,"network-request-failed"))},on(`https://apis.google.com/js/api.js?onload=${t}`).catch(e=>n(e))}o()}}).catch(e=>{throw Or=null,e})}(e),Or}const Mr=new gt(5e3,15e3),Fr={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},jr=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ur(e){const t=e.config;ut(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?yt(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:Ue},i=jr.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${_(r).slice(1)}`}const Vr={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class zr{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Br(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},Vr),{width:r.toString(),height:i.toString(),top:s,left:o}),u=g().toLowerCase();n&&(a=Wt(u)?"_blank":n),Ht(u)&&(t=t||"http://localhost",l.scrollbars="yes");const c=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return`${e}${n}=${r},`},"");if(function(){var e;return Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:g())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(u)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new zr(null);const h=window.open(t||"",a,c);ut(h,e,"popup-blocked");try{h.focus()}catch(d){}return new zr(h)}const $r="__/auth/handler",qr="emulator/auth/handler",Hr=encodeURIComponent("fac");async function Kr(e,t,n,r,i,s){ut(e.config.authDomain,e,"auth-domain-config-required"),ut(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Ue,eventId:i};if(t instanceof xn){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof Cn){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))void 0===a[c]&&delete a[c];const l=await e._getAppCheckToken(),u=l?`#${Hr}=${encodeURIComponent(l)}`:"";return`${function(e){let{config:t}=e;if(!t.emulator)return`https://${t.authDomain}/${$r}`;return yt(t,qr)}(e)}?${_(a).slice(1)}${u}`}const Wr="webStorageSupport";const Gr=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Kn,this._completeRedirectFn=kr,this._overrideRedirectResult=Er}async _openPopup(e,t,n,r){var i;ht(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Br(e,await Kr(e,t,n,dt(),r),Gn())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Yn().location.href=e}(await Kr(e,t,n,dt(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(ht(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await async function(e){const t=await Lr(e),n=Yn().gapi;return ut(n,e,"internal-error"),t.open({where:document.body,url:Ur(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Fr,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=ot(e,"network-request-failed"),s=Yn().setTimeout(()=>{r(i)},Mr.get());function o(){Yn().clearTimeout(s),n(t)}t.ping(o).then(o,()=>{r(i)})}))}(e),n=new Tr(e);return t.register("authEvent",t=>{ut(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Wr,{type:Wr},n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Wr];void 0!==i&&t(!!i),st(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Ar(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return en()||Kt()||Jt()}};var Qr="@firebase/auth",Yr="0.23.2";class Xr{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ut(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Jr=p("authIdTokenMaxAge")||300;let Zr=null;var ei;ei="Browser",Le(new N("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ut(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:ei,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tn(ei)},u=new hn(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ut);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Le(new N("auth-internal",e=>(e=>new Xr(e))(dn(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),Be(Qr,Yr,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(ei)),Be(Qr,Yr,"esm2017");var ti,ni="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},ri={},ii=ii||{},si=ni||self;function oi(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function ai(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var li="closure_uid_"+(1e9*Math.random()>>>0),ui=0;function ci(e,t,n){return e.call.apply(e.bind,arguments)}function hi(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function di(e,t,n){return(di=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ci:hi).apply(null,arguments)}function fi(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function pi(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function mi(){this.s=this.s,this.o=this.o}mi.prototype.s=!1,mi.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,li)&&e[li]||(e[li]=++ui))},mi.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const gi=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function yi(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function vi(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(oi(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function bi(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}bi.prototype.h=function(){this.defaultPrevented=!0};var wi=function(){if(!si.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{si.addEventListener("test",()=>{},t),si.removeEventListener("test",()=>{},t)}catch(n){}return e}();function Ei(e){return/^[\s\xa0]*$/.test(e)}function Si(){var e=si.navigator;return e&&(e=e.userAgent)?e:""}function _i(e){return-1!=Si().indexOf(e)}function ki(e){return ki[" "](e),e}ki[" "]=function(){};var Ti,Ii,xi=_i("Opera"),Ci=_i("Trident")||_i("MSIE"),Ni=_i("Edge"),Ai=Ni||Ci,Ri=_i("Gecko")&&!(-1!=Si().toLowerCase().indexOf("webkit")&&!_i("Edge"))&&!(_i("Trident")||_i("MSIE"))&&!_i("Edge"),Di=-1!=Si().toLowerCase().indexOf("webkit")&&!_i("Edge");function Pi(){var e=si.document;return e?e.documentMode:void 0}e:{var Oi="",Li=function(){var e=Si();return Ri?/rv:([^\);]+)(\)|;)/.exec(e):Ni?/Edge\/([\d\.]+)/.exec(e):Ci?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Di?/WebKit\/(\S+)/.exec(e):xi?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Li&&(Oi=Li?Li[1]:""),Ci){var Mi=Pi();if(null!=Mi&&Mi>parseFloat(Oi)){Ti=String(Mi);break e}}Ti=Oi}if(si.document&&Ci){var Fi=Pi();Ii=Fi||(parseInt(Ti,10)||void 0)}else Ii=void 0;var ji=Ii;function Ui(e,t){if(bi.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Ri){e:{try{ki(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Vi[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Ui.$.h.call(this)}}pi(Ui,bi);var Vi={2:"touch",3:"pen",4:"mouse"};Ui.prototype.h=function(){Ui.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var zi="closure_listenable_"+(1e6*Math.random()|0),Bi=0;function $i(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++Bi,this.fa=this.ia=!1}function qi(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Hi(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function Ki(e){const t={};for(const n in e)t[n]=e[n];return t}const Wi="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Gi(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<Wi.length;t++)n=Wi[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Qi(e){this.src=e,this.g={},this.h=0}function Yi(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=gi(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(qi(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Xi(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}Qi.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=Xi(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new $i(t,this.src,s,!!r,i)).ia=n,e.push(t)),t};var Ji="closure_lm_"+(1e6*Math.random()|0),Zi={};function es(e,t,n,r,i){if(r&&r.once)return ns(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)es(e,t[s],n,r,i);return null}return n=us(n),e&&e[zi]?e.O(t,n,ai(r)?!!r.capture:!!r,i):ts(e,t,n,!1,r,i)}function ts(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=ai(i)?!!i.capture:!!i,a=as(e);if(a||(e[Ji]=a=new Qi(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=os;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)wi||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(ss(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ns(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)ns(e,t[s],n,r,i);return null}return n=us(n),e&&e[zi]?e.P(t,n,ai(r)?!!r.capture:!!r,i):ts(e,t,n,!0,r,i)}function rs(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)rs(e,t[s],n,r,i);else r=ai(r)?!!r.capture:!!r,n=us(n),e&&e[zi]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Xi(s=e.g[t],n,r,i))&&(qi(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=as(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Xi(t,n,r,i)),(n=-1<e?t[e]:null)&&is(n))}function is(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[zi])Yi(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ss(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=as(t))?(Yi(n,e),0==n.h&&(n.src=null,t[Ji]=null)):qi(e)}}}function ss(e){return e in Zi?Zi[e]:Zi[e]="on"+e}function os(e,t){if(e.fa)e=!0;else{t=new Ui(t,this);var n=e.listener,r=e.la||e.src;e.ia&&is(e),e=n.call(r,t)}return e}function as(e){return(e=e[Ji])instanceof Qi?e:null}var ls="__closure_events_fn_"+(1e9*Math.random()>>>0);function us(e){return"function"===typeof e?e:(e[ls]||(e[ls]=function(t){return e.handleEvent(t)}),e[ls])}function cs(){mi.call(this),this.i=new Qi(this),this.S=this,this.J=null}function hs(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new bi(t,e);else if(t instanceof bi)t.target=t.target||e;else{var i=t;Gi(t=new bi(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=ds(o,r,!0,t)&&i}if(i=ds(o=t.g=e,r,!0,t)&&i,i=ds(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ds(o=t.g=n[s],r,!1,t)&&i}function ds(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&Yi(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}pi(cs,mi),cs.prototype[zi]=!0,cs.prototype.removeEventListener=function(e,t,n,r){rs(this,e,t,n,r)},cs.prototype.N=function(){if(cs.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)qi(n[r]);delete t.g[e],t.h--}}this.J=null},cs.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},cs.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var fs=si.JSON.stringify;function ps(){var e=Es;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var ms=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new gs,e=>e.reset());class gs{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function ys(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function vs(e){si.setTimeout(()=>{throw e},0)}let bs,ws=!1,Es=new class{constructor(){this.h=this.g=null}add(e,t){const n=ms.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},Ss=()=>{const e=si.Promise.resolve(void 0);bs=()=>{e.then(_s)}};var _s=()=>{for(var e;e=ps();){try{e.h.call(e.g)}catch(n){vs(n)}var t=ms;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}ws=!1};function ks(e,t){cs.call(this),this.h=e||1,this.g=t||si,this.j=di(this.qb,this),this.l=Date.now()}function Ts(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Is(e,t,n){if("function"===typeof e)n&&(e=di(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=di(e.handleEvent,e)}return 2147483647<Number(t)?-1:si.setTimeout(e,t||0)}function xs(e){e.g=Is(()=>{e.g=null,e.i&&(e.i=!1,xs(e))},e.j);const t=e.h;e.h=null,e.m.apply(null,t)}pi(ks,cs),(ti=ks.prototype).ga=!1,ti.T=null,ti.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),hs(this,"tick"),this.ga&&(Ts(this),this.start()))}},ti.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ti.N=function(){ks.$.N.call(this),Ts(this),delete this.g};class Cs extends mi{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:xs(this)}N(){super.N(),this.g&&(si.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ns(e){mi.call(this),this.h=e,this.g={}}pi(Ns,mi);var As=[];function Rs(e,t,n,r){Array.isArray(n)||(n&&(As[0]=n.toString()),n=As);for(var i=0;i<n.length;i++){var s=es(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function Ds(e){Hi(e.g,function(e,t){this.g.hasOwnProperty(t)&&is(e)},e),e.g={}}function Ps(){this.g=!0}function Os(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return fs(n)}catch(a){return t}}(e,n)+(r?" "+r:"")})}Ns.prototype.N=function(){Ns.$.N.call(this),Ds(this)},Ns.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ps.prototype.Ea=function(){this.g=!1},Ps.prototype.info=function(){};var Ls={},Ms=null;function Fs(){return Ms=Ms||new cs}function js(e){bi.call(this,Ls.Ta,e)}function Us(e){const t=Fs();hs(t,new js(t))}function Vs(e,t){bi.call(this,Ls.STAT_EVENT,e),this.stat=t}function zs(e){const t=Fs();hs(t,new Vs(t,e))}function Bs(e,t){bi.call(this,Ls.Ua,e),this.size=t}function $s(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return si.setTimeout(function(){e()},t)}Ls.Ta="serverreachability",pi(js,bi),Ls.STAT_EVENT="statevent",pi(Vs,bi),Ls.Ua="timingevent",pi(Bs,bi);var qs={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Hs={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Ks(){}function Ws(e){return e.h||(e.h=e.i())}function Gs(){}Ks.prototype.h=null;var Qs,Ys={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Xs(){bi.call(this,"d")}function Js(){bi.call(this,"c")}function Zs(){}function eo(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Ns(this),this.P=no,e=Ai?125:void 0,this.V=new ks(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new to}function to(){this.i=null,this.g="",this.h=!1}pi(Xs,bi),pi(Js,bi),pi(Zs,Ks),Zs.prototype.g=function(){return new XMLHttpRequest},Zs.prototype.i=function(){return{}},Qs=new Zs;var no=45e3,ro={},io={};function so(e,t,n){e.L=1,e.v=To(wo(t)),e.s=n,e.S=!0,oo(e,null)}function oo(e,t){e.G=Date.now(),co(e),e.A=wo(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),jo(n.i,"t",r),e.C=0,n=e.l.J,e.h=new to,e.g=Ua(e.l,n?t:null,!e.s),0<e.O&&(e.M=new Cs(di(e.Pa,e,e.g),e.O)),Rs(e.U,e.g,"readystatechange",e.nb),t=e.I?Ki(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),Us(),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");o=2<=h.length&&"type"==h[1]?o+(c+"=")+u+"&":o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o})}(e.j,e.u,e.A,e.m,e.W,e.s)}function ao(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function lo(e,t,n){let r,i=!0;for(;!e.J&&e.C<n.length;){if(r=uo(e,n),r==io){4==t&&(e.o=4,zs(14),i=!1),Os(e.j,e.m,null,"[Incomplete Response]");break}if(r==ro){e.o=4,zs(15),Os(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Os(e.j,e.m,r,null),go(e,r)}ao(e)&&r!=io&&r!=ro&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,zs(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ra(t),t.M=!0,zs(11))):(Os(e.j,e.m,n,"[Invalid Chunked Response]"),mo(e),po(e))}function uo(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?io:(n=Number(t.substring(n,r)),isNaN(n)?ro:(r+=1)+n>t.length?io:(t=t.slice(r,r+n),e.C=r+n,t))}function co(e){e.Y=Date.now()+e.P,ho(e,e.P)}function ho(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=$s(di(e.lb,e),t)}function fo(e){e.B&&(si.clearTimeout(e.B),e.B=null)}function po(e){0==e.l.H||e.J||Oa(e.l,e)}function mo(e){fo(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Ts(e.V),Ds(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function go(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Ho(n.i,e)))if(!e.K&&Ho(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Pa(n),_a(n)}Aa(n),zs(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=$s(di(n.ib,n),6e3));if(1>=qo(n.i)&&n.oa){try{n.oa()}catch(u){}n.oa=void 0}}else Ma(n,11)}else if((e.K||n.g==e)&&Pa(n),!Ei(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let u=i[t];if(n.V=u[0],u=u[1],2==n.H)if("c"==u[0]){n.K=u[1],n.pa=u[2];const t=u[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=u[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const c=u[5];null!=c&&"number"===typeof c&&0<c&&(r=1.5*c,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Ko(s,s.h),s.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,ko(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=e;if((r=n).wa=ja(r,r.J?r.pa:null,r.Y),o.K){Wo(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.B&&(fo(a),co(a)),r.g=o}else Na(r);0<n.j.length&&Ta(n)}else"stop"!=u[0]&&"close"!=u[0]||Ma(n,7);else 3==n.H&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?Ma(n,7):Sa(n):"noop"!=u[0]&&n.h&&n.h.Aa(u),n.A=0)}Us()}catch(u){}}function yo(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(oi(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(oi(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(oi(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}(ti=eo.prototype).setTimeout=function(e){this.P=e},ti.nb=function(e){e=e.target;const t=this.M;t&&3==ga(e)?t.l():this.Pa(e)},ti.Pa=function(e){try{if(e==this.g)e:{const c=ga(this.g);var t=this.g.Ia();this.g.da();if(!(3>c)&&(3!=c||Ai||this.g&&(this.h.h||this.g.ja()||ya(this.g)))){this.J||4!=c||7==t||Us(),fo(this);var n=this.g.da();this.ca=n;t:if(ao(this)){var r=ya(this.g);e="";var i=r.length,s=4==ga(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){mo(this),po(this);var o="";break t}this.h.i=new si.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.splice(0,i),this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.W,c,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ei(a)){var u=a;break t}}u=null}if(!(n=u)){this.i=!1,this.o=3,zs(12),mo(this),po(this);break e}Os(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,go(this,n)}this.S?(lo(this,c,o),Ai&&this.i&&3==c&&(Rs(this.U,this.V,"tick",this.mb),this.V.start())):(Os(this.j,this.m,o,null),go(this,o)),4==c&&mo(this),this.i&&!this.J&&(4==c?Oa(this.l,this):(this.i=!1,co(this)))}else(function(e){const t={};e=(e.g&&2<=ga(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(Ei(e[r]))continue;var n=ys(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.o=3,zs(12)):(this.o=0,zs(13)),mo(this),po(this)}}}catch(c){}},ti.mb=function(){if(this.g){var e=ga(this.g),t=this.g.ja();this.C<t.length&&(fo(this),lo(this,e,t),this.i&&4!=e&&co(this))}},ti.cancel=function(){this.J=!0,mo(this)},ti.lb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.L&&(Us(),zs(17)),mo(this),this.o=2,po(this)):ho(this,this.Y-e)};var vo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function bo(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof bo){this.h=e.h,Eo(this,e.j),this.s=e.s,this.g=e.g,So(this,e.m),this.l=e.l;var t=e.i,n=new Oo;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),_o(this,n),this.o=e.o}else e&&(t=String(e).match(vo))?(this.h=!1,Eo(this,t[1]||"",!0),this.s=Io(t[2]||""),this.g=Io(t[3]||"",!0),So(this,t[4]),this.l=Io(t[5]||"",!0),_o(this,t[6]||"",!0),this.o=Io(t[7]||"")):(this.h=!1,this.i=new Oo(null,this.h))}function wo(e){return new bo(e)}function Eo(e,t,n){e.j=n?Io(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function So(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function _o(e,t,n){t instanceof Oo?(e.i=t,function(e,t){t&&!e.j&&(Lo(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Mo(this,t),jo(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=xo(t,Do)),e.i=new Oo(t,e.h))}function ko(e,t,n){e.i.set(t,n)}function To(e){return ko(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Io(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function xo(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Co),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Co(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}bo.prototype.toString=function(){var e=[],t=this.j;t&&e.push(xo(t,No,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(xo(t,No,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(xo(n,"/"==n.charAt(0)?Ro:Ao,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",xo(n,Po)),e.join("")};var No=/[#\/\?@]/g,Ao=/[#\?:]/g,Ro=/[#\?]/g,Do=/[#\?@]/g,Po=/#/g;function Oo(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Lo(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Mo(e,t){Lo(e),t=Uo(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Fo(e,t){return Lo(e),t=Uo(e,t),e.g.has(t)}function jo(e,t,n){Mo(e,t),0<n.length&&(e.i=null,e.g.set(Uo(e,t),yi(n)),e.h+=n.length)}function Uo(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(ti=Oo.prototype).add=function(e,t){Lo(this),this.i=null,e=Uo(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},ti.forEach=function(e,t){Lo(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},ti.ta=function(){Lo(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},ti.Z=function(e){Lo(this);let t=[];if("string"===typeof e)Fo(this,e)&&(t=t.concat(this.g.get(Uo(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},ti.set=function(e,t){return Lo(this),this.i=null,Fo(this,e=Uo(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},ti.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},ti.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")};var Vo=class{constructor(e,t){this.g=e,this.map=t}};function zo(e){this.l=e||Bo,si.PerformanceNavigationTiming?e=0<(e=si.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(si.g&&si.g.Ka&&si.g.Ka()&&si.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Bo=10;function $o(e){return!!e.h||!!e.g&&e.g.size>=e.j}function qo(e){return e.h?1:e.g?e.g.size:0}function Ho(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ko(e,t){e.g?e.g.add(t):e.h=t}function Wo(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Go(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return yi(e.i)}zo.prototype.cancel=function(){if(this.i=Go(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var Qo,Yo=class{stringify(e){return si.JSON.stringify(e,void 0)}parse(e){return si.JSON.parse(e,void 0)}};function Xo(){this.g=new Yo}function Jo(e,t,n){const r=n||"";try{yo(e,function(e,n){let i=e;ai(e)&&(i=fs(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Zo(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(s){}}function ea(e){this.l=e.fc||null,this.j=e.ob||!1}function ta(e,t){cs.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=na,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}pi(ea,Ks),ea.prototype.g=function(){return new ta(this.l,this.j)},ea.prototype.i=(Qo={},function(){return Qo}),pi(ta,cs);var na=0;function ra(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function ia(e){e.readyState=4,e.l=null,e.j=null,e.A=null,sa(e)}function sa(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(ti=ta.prototype).open=function(e,t){if(this.readyState!=na)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,sa(this)},ti.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||si).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},ti.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ia(this)),this.readyState=na},ti.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,sa(this)),this.g&&(this.readyState=3,sa(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof si.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ra(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},ti.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?ia(this):sa(this),3==this.readyState&&ra(this)}},ti.Za=function(e){this.g&&(this.response=this.responseText=e,ia(this))},ti.Ya=function(e){this.g&&(this.response=e,ia(this))},ti.ka=function(){this.g&&ia(this)},ti.setRequestHeader=function(e,t){this.v.append(e,t)},ti.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},ti.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(ta.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var oa=si.JSON.parse;function aa(e){cs.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=la,this.L=this.M=!1}pi(aa,cs);var la="",ua=/^https?$/i,ca=["POST","PUT"];function ha(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,da(e),pa(e)}function da(e){e.F||(e.F=!0,hs(e,"complete"),hs(e,"error"))}function fa(e){if(e.h&&"undefined"!=typeof ii&&(!e.C[1]||4!=ga(e)||2!=e.da()))if(e.v&&4==ga(e))Is(e.La,0,e);else if(hs(e,"readystatechange"),4==ga(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.I).match(vo)[1]||null;!i&&si.self&&si.self.location&&(i=si.self.location.protocol.slice(0,-1)),r=!ua.test(i?i.toLowerCase():"")}n=r}if(n)hs(e,"complete"),hs(e,"success");else{e.m=6;try{var s=2<ga(e)?e.g.statusText:""}catch(o){s=""}e.j=s+" ["+e.da()+"]",da(e)}}finally{pa(e)}}}function pa(e,t){if(e.g){ma(e);const r=e.g,i=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||hs(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function ma(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(si.clearTimeout(e.A),e.A=null)}function ga(e){return e.g?e.g.readyState:0}function ya(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case la:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Sl){return null}}function va(e){let t="";return Hi(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function ba(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=va(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ko(e,t,n))}function wa(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Ea(e){this.Ga=0,this.j=[],this.l=new Ps,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=wa("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=wa("baseRetryDelayMs",5e3,e),this.hb=wa("retryDelaySeedMs",1e4,e),this.eb=wa("forwardChannelMaxRetries",2,e),this.xa=wa("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new zo(e&&e.concurrentRequestLimit),this.Ja=new Xo,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Sa(e){if(ka(e),3==e.H){var t=e.W++,n=wo(e.I);if(ko(n,"SID",e.K),ko(n,"RID",t),ko(n,"TYPE","terminate"),xa(e,n),(t=new eo(e,e.l,t)).L=2,t.v=To(wo(n)),n=!1,si.navigator&&si.navigator.sendBeacon)try{n=si.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&si.Image&&((new Image).src=t.v,n=!0),n||(t.g=Ua(t.l,null),t.g.ha(t.v)),t.G=Date.now(),co(t)}Fa(e)}function _a(e){e.g&&(Ra(e),e.g.cancel(),e.g=null)}function ka(e){_a(e),e.u&&(si.clearTimeout(e.u),e.u=null),Pa(e),e.i.cancel(),e.m&&("number"===typeof e.m&&si.clearTimeout(e.m),e.m=null)}function Ta(e){if(!$o(e.i)&&!e.m){e.m=!0;var t=e.Na;bs||Ss(),ws||(bs(),ws=!0),Es.add(t,e),e.C=0}}function Ia(e,t){var n;n=t?t.m:e.W++;const r=wo(e.I);ko(r,"SID",e.K),ko(r,"RID",n),ko(r,"AID",e.V),xa(e,r),e.o&&e.s&&ba(r,e.o,e.s),n=new eo(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Ca(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Ko(e.i,n),so(n,r,t)}function xa(e,t){e.na&&Hi(e.na,function(e,n){ko(t,n,e)}),e.h&&yo({},function(e,n){ko(t,n,e)})}function Ca(e,t,n){n=Math.min(e.j.length,n);var r=e.h?di(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{Jo(a,e,"req"+n+"_")}catch(Pl){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function Na(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;bs||Ss(),ws||(bs(),ws=!0),Es.add(t,e),e.A=0}}function Aa(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=$s(di(e.Ma,e),La(e,e.A)),e.A++,!0)}function Ra(e){null!=e.B&&(si.clearTimeout(e.B),e.B=null)}function Da(e){e.g=new eo(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=wo(e.wa);ko(t,"RID","rpc"),ko(t,"SID",e.K),ko(t,"AID",e.V),ko(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&ko(t,"TO",e.qa),ko(t,"TYPE","xmlhttp"),xa(e,t),e.o&&e.s&&ba(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=To(wo(t)),n.s=null,n.S=!0,oo(n,e)}function Pa(e){null!=e.v&&(si.clearTimeout(e.v),e.v=null)}function Oa(e,t){var n=null;if(e.g==t){Pa(e),Ra(e),e.g=null;var r=2}else{if(!Ho(e.i,t))return;n=t.F,Wo(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;hs(r=Fs(),new Bs(r,n)),Ta(e)}else Na(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(qo(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=$s(di(e.Na,e,t),La(e,e.C)),e.C++,!0))}(e,t)||2==r&&Aa(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Ma(e,5);break;case 4:Ma(e,10);break;case 3:Ma(e,6);break;default:Ma(e,2)}}function La(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Ma(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=di(e.pb,e);n||(n=new bo("//www.google.com/images/cleardot.gif"),si.location&&"http"==si.location.protocol||Eo(n,"https"),To(n)),function(e,t){const n=new Ps;if(si.Image){const r=new Image;r.onload=fi(Zo,n,r,"TestLoadImage: loaded",!0,t),r.onerror=fi(Zo,n,r,"TestLoadImage: error",!1,t),r.onabort=fi(Zo,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=fi(Zo,n,r,"TestLoadImage: timeout",!1,t),si.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(n.toString(),r)}else zs(2);e.H=0,e.h&&e.h.za(t),Fa(e),ka(e)}function Fa(e){if(e.H=0,e.ma=[],e.h){const t=Go(e.i);0==t.length&&0==e.j.length||(vi(e.ma,t),vi(e.ma,e.j),e.i.i.length=0,yi(e.j),e.j.length=0),e.h.ya()}}function ja(e,t,n){var r=n instanceof bo?wo(n):new bo(n);if(""!=r.g)t&&(r.g=t+"."+r.g),So(r,r.m);else{var i=si.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new bo(null);r&&Eo(s,r),t&&(s.g=t),i&&So(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&ko(r,n,t),ko(r,"VER",e.ra),xa(e,r),r}function Ua(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new aa(new ea({ob:!0})):new aa(e.va)).Oa(e.J),t}function Va(){}function za(){if(Ci&&!(10<=Number(ji)))throw Error("Environmental error: no available transport.")}function Ba(e,t){cs.call(this),this.g=new Ea(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Ei(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Ei(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Ha(this)}function $a(e){Xs.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function qa(){Js.call(this),this.status=1}function Ha(e){this.g=e}function Ka(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Wa(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function Ga(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}(ti=aa.prototype).Oa=function(e){this.M=e},ti.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Qs.g(),this.C=this.u?Ws(this.u):Ws(Qs),this.g.onreadystatechange=di(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){return void ha(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=si.FormData&&e instanceof si.FormData,!(0<=gi(ca,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,a]of n)this.g.setRequestHeader(o,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{ma(this),0<this.B&&((this.L=function(e){return Ci&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=di(this.ua,this)):this.A=Is(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){ha(this,s)}},ti.ua=function(){"undefined"!=typeof ii&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,hs(this,"timeout"),this.abort(8))},ti.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,hs(this,"complete"),hs(this,"abort"),pa(this))},ti.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),pa(this,!0)),aa.$.N.call(this)},ti.La=function(){this.s||(this.G||this.v||this.l?fa(this):this.kb())},ti.kb=function(){fa(this)},ti.isActive=function(){return!!this.g},ti.da=function(){try{return 2<ga(this)?this.g.status:-1}catch(Qo){return-1}},ti.ja=function(){try{return this.g?this.g.responseText:""}catch(Qo){return""}},ti.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),oa(t)}},ti.Ia=function(){return this.m},ti.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(ti=Ea.prototype).ra=8,ti.H=1,ti.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new eo(this,this.l,e);let s=this.s;if(this.U&&(s?(s=Ki(s),Gi(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Ca(this,i,t),ko(n=wo(this.I),"RID",e),ko(n,"CVER",22),this.F&&ko(n,"X-HTTP-Session-Id",this.F),xa(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(va(s)))+"&"+t:this.o&&ba(n,this.o,s)),Ko(this.i,i),this.bb&&ko(n,"TYPE","init"),this.P?(ko(n,"$req",t),ko(n,"SID","null"),i.aa=!0,so(i,n,null)):so(i,n,t),this.H=2}}else 3==this.H&&(e?Ia(this,e):0==this.j.length||$o(this.i)||Ia(this))},ti.Ma=function(){if(this.u=null,Da(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=$s(di(this.jb,this),e)}},ti.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,zs(10),_a(this),Da(this))},ti.ib=function(){null!=this.v&&(this.v=null,_a(this),Aa(this),zs(19))},ti.pb=function(e){e?(this.l.info("Successfully pinged google.com"),zs(2)):(this.l.info("Failed to ping google.com"),zs(1))},ti.isActive=function(){return!!this.h&&this.h.isActive(this)},(ti=Va.prototype).Ba=function(){},ti.Aa=function(){},ti.za=function(){},ti.ya=function(){},ti.isActive=function(){return!0},ti.Va=function(){},za.prototype.g=function(e,t){return new Ba(e,t)},pi(Ba,cs),Ba.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;zs(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=ja(e,null,e.Y),Ta(e)},Ba.prototype.close=function(){Sa(this.g)},Ba.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=fs(e),e=n);t.j.push(new Vo(t.fb++,e)),3==t.H&&Ta(t)},Ba.prototype.N=function(){this.g.h=null,delete this.j,Sa(this.g),delete this.g,Ba.$.N.call(this)},pi($a,Xs),pi(qa,Js),pi(Ha,Va),Ha.prototype.Ba=function(){hs(this.g,"a")},Ha.prototype.Aa=function(e){hs(this.g,new $a(e))},Ha.prototype.za=function(e){hs(this.g,new qa)},Ha.prototype.ya=function(){hs(this.g,"b")},pi(Ka,function(){this.blockSize=-1}),Ka.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Ka.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(0==i)for(;s<=n;)Wa(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){Wa(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){Wa(this,r),i=0;break}}this.h=i,this.i+=t},Ka.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var Qa={};function Ya(e){return-128<=e&&128>e?function(e,t){var n=Qa;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new Ga([0|e],0>e?-1:0)}):new Ga([0|e],0>e?-1:0)}function Xa(e){if(isNaN(e)||!isFinite(e))return Za;if(0>e)return il(Xa(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Ja;return new Ga(t,0)}var Ja=4294967296,Za=Ya(0),el=Ya(1),tl=Ya(16777216);function nl(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function rl(e){return-1==e.h}function il(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Ga(n,~e.h).add(el)}function sl(e,t){return e.add(il(t))}function ol(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function al(e,t){this.g=e,this.h=t}function ll(e,t){if(nl(t))throw Error("division by zero");if(nl(e))return new al(Za,Za);if(rl(e))return t=ll(il(e),t),new al(il(t.g),il(t.h));if(rl(t))return t=ll(e,il(t)),new al(il(t.g),t.h);if(30<e.g.length){if(rl(e)||rl(t))throw Error("slowDivide_ only works with positive integers.");for(var n=el,r=t;0>=r.X(e);)n=ul(n),r=ul(r);var i=cl(n,1),s=cl(r,1);for(r=cl(r,2),n=cl(n,2);!nl(r);){var o=s.add(r);0>=o.X(e)&&(i=i.add(n),s=o),r=cl(r,1),n=cl(n,1)}return t=sl(e,i.R(t)),new al(i,t)}for(i=Za;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=Xa(n)).R(t);rl(o)||0<o.X(e);)o=(s=Xa(n-=r)).R(t);nl(s)&&(s=el),i=i.add(s),e=sl(e,o)}return new al(i,e)}function ul(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Ga(n,e.h)}function cl(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new Ga(i,e.h)}(ti=Ga.prototype).ea=function(){if(rl(this))return-il(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Ja+r)*t,t*=Ja}return e},ti.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(nl(this))return"0";if(rl(this))return"-"+il(this).toString(e);for(var t=Xa(Math.pow(e,6)),n=this,r="";;){var i=ll(n,t).g,s=((0<(n=sl(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(nl(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},ti.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},ti.X=function(e){return rl(e=sl(this,e))?-1:nl(e)?0:1},ti.abs=function(){return rl(this)?il(this):this},ti.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(65535&this.D(i))+(65535&e.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new Ga(n,-2147483648&n[n.length-1]?-1:0)},ti.R=function(e){if(nl(this)||nl(e))return Za;if(rl(this))return rl(e)?il(this).R(il(e)):il(il(this).R(e));if(rl(e))return il(this.R(il(e)));if(0>this.X(tl)&&0>e.X(tl))return Xa(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=e.D(i)>>>16,l=65535&e.D(i);n[2*r+2*i]+=o*l,ol(n,2*r+2*i),n[2*r+2*i+1]+=s*l,ol(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,ol(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,ol(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Ga(n,0)},ti.gb=function(e){return ll(this,e).h},ti.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Ga(n,this.h&e.h)},ti.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Ga(n,this.h|e.h)},ti.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Ga(n,this.h^e.h)},za.prototype.createWebChannel=za.prototype.g,Ba.prototype.send=Ba.prototype.u,Ba.prototype.open=Ba.prototype.m,Ba.prototype.close=Ba.prototype.close,qs.NO_ERROR=0,qs.TIMEOUT=8,qs.HTTP_ERROR=6,Hs.COMPLETE="complete",Gs.EventType=Ys,Ys.OPEN="a",Ys.CLOSE="b",Ys.ERROR="c",Ys.MESSAGE="d",cs.prototype.listen=cs.prototype.O,aa.prototype.listenOnce=aa.prototype.P,aa.prototype.getLastError=aa.prototype.Sa,aa.prototype.getLastErrorCode=aa.prototype.Ia,aa.prototype.getStatus=aa.prototype.da,aa.prototype.getResponseJson=aa.prototype.Wa,aa.prototype.getResponseText=aa.prototype.ja,aa.prototype.send=aa.prototype.ha,aa.prototype.setWithCredentials=aa.prototype.Oa,Ka.prototype.digest=Ka.prototype.l,Ka.prototype.reset=Ka.prototype.reset,Ka.prototype.update=Ka.prototype.j,Ga.prototype.add=Ga.prototype.add,Ga.prototype.multiply=Ga.prototype.R,Ga.prototype.modulo=Ga.prototype.gb,Ga.prototype.compare=Ga.prototype.X,Ga.prototype.toNumber=Ga.prototype.ea,Ga.prototype.toString=Ga.prototype.toString,Ga.prototype.getBits=Ga.prototype.D,Ga.fromNumber=Xa,Ga.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return il(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Xa(Math.pow(n,8)),i=Za,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),n);8>o?(o=Xa(Math.pow(n,o)),i=i.R(o).add(Xa(a))):i=(i=i.R(r)).add(Xa(a))}return i};var hl=ri.createWebChannelTransport=function(){return new za},dl=ri.getStatEventTarget=function(){return Fs()},fl=ri.ErrorCode=qs,pl=ri.EventType=Hs,ml=ri.Event=Ls,gl=ri.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},yl=ri.FetchXmlHttpFactory=ea,vl=ri.WebChannel=Gs,bl=ri.XhrIo=aa,wl=ri.Md5=Ka,El=ri.Integer=Ga;const Sl="@firebase/firestore";class _l{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}_l.UNAUTHENTICATED=new _l(null),_l.GOOGLE_CREDENTIALS=new _l("google-credentials-uid"),_l.FIRST_PARTY=new _l("first-party-uid"),_l.MOCK_USER=new _l("mock-user");let kl="9.23.0";const Tl=new U("@firebase/firestore");function Il(){return Tl.logLevel}function xl(e){if(Tl.logLevel<=O.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Al);Tl.debug(`Firestore (${kl}): ${e}`,...i)}}function Cl(e){if(Tl.logLevel<=O.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Al);Tl.error(`Firestore (${kl}): ${e}`,...i)}}function Nl(e){if(Tl.logLevel<=O.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Al);Tl.warn(`Firestore (${kl}): ${e}`,...i)}}function Al(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Rl(){const e=`FIRESTORE (${kl}) INTERNAL ASSERTION FAILED: `+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state");throw Cl(e),new Error(e)}function Dl(e,t){e||Rl()}function Pl(e,t){return e}const Ol={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ll extends v{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ml{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Fl{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class jl{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(_l.UNAUTHENTICATED))}shutdown(){}}class Ul{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Vl{constructor(e){this.t=e,this.currentUser=_l.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Ml;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Ml,e.enqueueRetryable(()=>r(this.currentUser))};const s=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},o=e=>{xl("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(e=>o(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(xl("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Ml)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(xl("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Dl("string"==typeof t.accessToken),new Fl(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Dl(null===e||"string"==typeof e),new _l(e)}}class zl{constructor(e,t,n){this.h=e,this.l=t,this.m=n,this.type="FirstParty",this.user=_l.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class Bl{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new zl(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(_l.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class $l{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ql{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const n=e=>{null!=e.error&&xl("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.T;return this.T=e.token,xl("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{xl("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.I.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.I.getImmediate({optional:!0});e?r(e):xl("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(Dl("string"==typeof e.token),this.T=e.token,new $l(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Hl(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Kl{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=Hl(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function Wl(e,t){return e<t?-1:e>t?1:0}function Gl(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}class Ql{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ll(Ol.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ll(Ol.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ll(Ol.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ll(Ol.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ql.fromMillis(Date.now())}static fromDate(e){return Ql.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Ql(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Wl(this.nanoseconds,e.nanoseconds):Wl(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Yl{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Yl(e)}static min(){return new Yl(new Ql(0,0))}static max(){return new Yl(new Ql(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Xl{constructor(e,t,n){void 0===t?t=0:t>e.length&&Rl(),void 0===n?n=e.length-t:n>e.length-t&&Rl(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Xl.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Xl?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Jl extends Xl{construct(e,t,n){return new Jl(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Ll(Ol.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(e=>e.length>0))}return new Jl(e)}static emptyPath(){return new Jl([])}}const Zl=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class eu extends Xl{construct(e,t,n){return new eu(e,t,n)}static isValidIdentifier(e){return Zl.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),eu.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new eu(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Ll(Ol.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Ll(Ol.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Ll(Ol.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Ll(Ol.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new eu(t)}static emptyPath(){return new eu([])}}class tu{constructor(e){this.path=e}static fromPath(e){return new tu(Jl.fromString(e))}static fromName(e){return new tu(Jl.fromString(e).popFirst(5))}static empty(){return new tu(Jl.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Jl.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Jl.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new tu(new Jl(e.slice()))}}class nu{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}nu.UNKNOWN_ID=-1;function ru(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Yl.fromTimestamp(1e9===r?new Ql(n+1,0):new Ql(n,r));return new su(i,tu.empty(),t)}function iu(e){return new su(e.readTime,e.key,-1)}class su{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new su(Yl.min(),tu.empty(),-1)}static max(){return new su(Yl.max(),tu.empty(),-1)}}function ou(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=tu.comparator(e.documentKey,t.documentKey),0!==n?n:Wl(e.largestBatchId,t.largestBatchId))}const au="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class lu{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function uu(e){if(e.code!==Ol.FAILED_PRECONDITION||e.message!==au)throw e;xl("LocalStore","Unexpectedly lost primary lease")}class cu{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Rl(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new cu((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof cu?t:cu.resolve(t)}catch(e){return cu.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):cu.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):cu.reject(t)}static resolve(e){return new cu((t,n)=>{t(e)})}static reject(e){return new cu((t,n)=>{n(e)})}static waitFor(e){return new cu((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=cu.resolve(!1);for(const n of e)t=t.next(e=>e?cu.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new cu((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next(e=>{s[l]=e,++o,o===i&&n(s)},e=>r(e))}})}static doWhile(e,t){return new cu((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function hu(e){return"IndexedDbTransactionError"===e.name}class du{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ot(e),this.ut=e=>t.writeSequenceNumber(e))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}function fu(e){return null==e}function pu(e){return 0===e&&1/e==-1/0}function mu(e){return"number"==typeof e&&Number.isInteger(e)&&!pu(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}du.ct=-1;const gu=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],yu=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],vu=yu;function bu(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function wu(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Eu(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Su{constructor(e,t){this.comparator=e,this.root=t||ku.EMPTY}insert(e,t){return new Su(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ku.BLACK,null,null))}remove(e){return new Su(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ku.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _u(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _u(this.root,e,this.comparator,!1)}getReverseIterator(){return new _u(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _u(this.root,e,this.comparator,!0)}}class _u{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ku{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:ku.RED,this.left=null!=r?r:ku.EMPTY,this.right=null!=i?i:ku.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new ku(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ku.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return ku.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ku.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ku.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Rl();if(this.right.isRed())throw Rl();const e=this.left.check();if(e!==this.right.check())throw Rl();return e+(this.isRed()?0:1)}}ku.EMPTY=null,ku.RED=!0,ku.BLACK=!1,ku.EMPTY=new class{constructor(){this.size=0}get key(){throw Rl()}get value(){throw Rl()}get color(){throw Rl()}get left(){throw Rl()}get right(){throw Rl()}copy(e,t,n,r,i){return this}insert(e,t,n){return new ku(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Tu{constructor(e){this.comparator=e,this.data=new Su(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Iu(this.data.getIterator())}getIteratorFrom(e){return new Iu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Tu))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Tu(this.comparator);return t.data=e,t}}class Iu{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class xu{constructor(e){this.fields=e,e.sort(eu.comparator)}static empty(){return new xu([])}unionWith(e){let t=new Tu(eu.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new xu(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Gl(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class Cu extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Nu{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Cu("Invalid base64 string: "+e):e}}(e);return new Nu(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Nu(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Wl(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Nu.EMPTY_BYTE_STRING=new Nu("");const Au=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ru(e){if(Dl(!!e),"string"==typeof e){let t=0;const n=Au.exec(e);if(Dl(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Du(e.seconds),nanos:Du(e.nanos)}}function Du(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Pu(e){return"string"==typeof e?Nu.fromBase64String(e):Nu.fromUint8Array(e)}function Ou(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Lu(e){const t=e.mapValue.fields.__previous_value__;return Ou(t)?Lu(t):t}function Mu(e){const t=Ru(e.mapValue.fields.__local_write_time__.timestampValue);return new Ql(t.seconds,t.nanos)}class Fu{constructor(e,t,n,r,i,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class ju{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ju("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ju&&e.projectId===this.projectId&&e.database===this.database}}const Uu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Vu(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Ou(e)?4:ec(e)?9007199254740991:10:Rl()}function zu(e,t){if(e===t)return!0;const n=Vu(e);if(n!==Vu(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Mu(e).isEqual(Mu(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Ru(e.timestampValue),r=Ru(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Pu(e.bytesValue).isEqual(Pu(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Du(e.geoPointValue.latitude)===Du(t.geoPointValue.latitude)&&Du(e.geoPointValue.longitude)===Du(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Du(e.integerValue)===Du(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Du(e.doubleValue),r=Du(t.doubleValue);return n===r?pu(n)===pu(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Gl(e.arrayValue.values||[],t.arrayValue.values||[],zu);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(bu(n)!==bu(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!zu(n[i],r[i])))return!1;return!0}(e,t);default:return Rl()}}function Bu(e,t){return void 0!==(e.values||[]).find(e=>zu(e,t))}function $u(e,t){if(e===t)return 0;const n=Vu(e),r=Vu(t);if(n!==r)return Wl(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Wl(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Du(e.integerValue||e.doubleValue),r=Du(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return qu(e.timestampValue,t.timestampValue);case 4:return qu(Mu(e),Mu(t));case 5:return Wl(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Pu(e),r=Pu(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Wl(n[i],r[i]);if(0!==e)return e}return Wl(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Wl(Du(e.latitude),Du(t.latitude));return 0!==n?n:Wl(Du(e.longitude),Du(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=$u(n[i],r[i]);if(e)return e}return Wl(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Uu.mapValue&&t===Uu.mapValue)return 0;if(e===Uu.mapValue)return 1;if(t===Uu.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=Wl(r[o],s[o]);if(0!==e)return e;const t=$u(n[r[o]],i[s[o]]);if(0!==t)return t}return Wl(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Rl()}}function qu(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Wl(e,t);const n=Ru(e),r=Ru(t),i=Wl(n.seconds,r.seconds);return 0!==i?i:Wl(n.nanos,r.nanos)}function Hu(e){return Ku(e)}function Ku(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Ru(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Pu(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,tu.fromName(n).toString()):"geoPointValue"in e?`geo(${(t=e.geoPointValue).latitude},${t.longitude})`:"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Ku(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${Ku(e.fields[i])}`;return n+"}"}(e.mapValue):Rl();var t,n}function Wu(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Gu(e){return!!e&&"integerValue"in e}function Qu(e){return!!e&&"arrayValue"in e}function Yu(e){return!!e&&"nullValue"in e}function Xu(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Ju(e){return!!e&&"mapValue"in e}function Zu(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return wu(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Zu(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Zu(e.arrayValue.values[n]);return t}return Object.assign({},e)}function ec(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class tc{constructor(e){this.value=e}static empty(){return new tc({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Ju(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zu(t)}setAll(e){let t=eu.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Zu(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Ju(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return zu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Ju(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){wu(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new tc(Zu(this.value))}}function nc(e){const t=[];return wu(e.fields,(e,n)=>{const r=new eu([e]);if(Ju(n)){const e=nc(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new xu(t)}class rc{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new rc(e,0,Yl.min(),Yl.min(),Yl.min(),tc.empty(),0)}static newFoundDocument(e,t,n,r){return new rc(e,1,t,Yl.min(),n,r,0)}static newNoDocument(e,t){return new rc(e,2,t,Yl.min(),Yl.min(),tc.empty(),0)}static newUnknownDocument(e,t){return new rc(e,3,t,Yl.min(),Yl.min(),tc.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Yl.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=tc.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=tc.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Yl.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof rc&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new rc(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ic{constructor(e,t){this.position=e,this.inclusive=t}}function sc(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?tu.comparator(tu.fromName(o.referenceValue),n.key):$u(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function oc(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!zu(e.position[n],t.position[n]))return!1;return!0}class ac{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function lc(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class uc{}class cc extends uc{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new vc(e,t,n):"array-contains"===t?new Sc(e,n):"in"===t?new _c(e,n):"not-in"===t?new kc(e,n):"array-contains-any"===t?new Tc(e,n):new cc(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new bc(e,n):new wc(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison($u(t,this.value)):null!==t&&Vu(this.value)===Vu(t)&&this.matchesComparison($u(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Rl()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class hc extends uc{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new hc(e,t)}matches(e){return dc(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(e=>e.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function dc(e){return"and"===e.op}function fc(e){return pc(e)&&dc(e)}function pc(e){for(const t of e.filters)if(t instanceof hc)return!1;return!0}function mc(e){if(e instanceof cc)return e.field.canonicalString()+e.op.toString()+Hu(e.value);if(fc(e))return e.filters.map(e=>mc(e)).join(",");{const t=e.filters.map(e=>mc(e)).join(",");return`${e.op}(${t})`}}function gc(e,t){return e instanceof cc?function(e,t){return t instanceof cc&&e.op===t.op&&e.field.isEqual(t.field)&&zu(e.value,t.value)}(e,t):e instanceof hc?function(e,t){return t instanceof hc&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&gc(n,t.filters[r]),!0)}(e,t):void Rl()}function yc(e){return e instanceof cc?function(e){return`${e.field.canonicalString()} ${e.op} ${Hu(e.value)}`}(e):e instanceof hc?function(e){return e.op.toString()+" {"+e.getFilters().map(yc).join(" ,")+"}"}(e):"Filter"}class vc extends cc{constructor(e,t,n){super(e,t,n),this.key=tu.fromName(n.referenceValue)}matches(e){const t=tu.comparator(e.key,this.key);return this.matchesComparison(t)}}class bc extends cc{constructor(e,t){super(e,"in",t),this.keys=Ec("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class wc extends cc{constructor(e,t){super(e,"not-in",t),this.keys=Ec("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Ec(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>tu.fromName(e.referenceValue))}class Sc extends cc{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Qu(t)&&Bu(t.arrayValue,this.value)}}class _c extends cc{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Bu(this.value.arrayValue,t)}}class kc extends cc{constructor(e,t){super(e,"not-in",t)}matches(e){if(Bu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Bu(this.value.arrayValue,t)}}class Tc extends cc{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Qu(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Bu(this.value.arrayValue,e))}}class Ic{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.dt=null}}function xc(e){return new Ic(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Cc(e){const t=Pl(e);if(null===t.dt){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>mc(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),fu(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Hu(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Hu(e)).join(",")),t.dt=e}return t.dt}function Nc(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!lc(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!gc(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!oc(e.startAt,t.startAt)&&oc(e.endAt,t.endAt)}function Ac(e){return tu.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Rc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.wt=null,this._t=null,this.startAt,this.endAt}}function Dc(e,t,n,r,i,s,o,a){return new Rc(e,t,n,r,i,s,o,a)}function Pc(e){return new Rc(e)}function Oc(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Lc(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Mc(e){for(const t of e.filters){const e=t.getFirstInequalityField();if(null!==e)return e}return null}function Fc(e){return null!==e.collectionGroup}function jc(e){const t=Pl(e);if(null===t.wt){t.wt=[];const e=Mc(t),n=Lc(t);if(null!==e&&null===n)e.isKeyField()||t.wt.push(new ac(e)),t.wt.push(new ac(eu.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.wt.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new ac(eu.keyField(),e))}}}return t.wt}function Uc(e){const t=Pl(e);if(!t._t)if("F"===t.limitType)t._t=xc(t.path,t.collectionGroup,jc(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const i of jc(t)){const t="desc"===i.dir?"asc":"desc";e.push(new ac(i.field,t))}const n=t.endAt?new ic(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ic(t.startAt.position,t.startAt.inclusive):null;t._t=xc(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}return t._t}function Vc(e,t){t.getFirstInequalityField(),Mc(e);const n=e.filters.concat([t]);return new Rc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function zc(e,t,n){return new Rc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Bc(e,t){return Nc(Uc(e),Uc(t))&&e.limitType===t.limitType}function $c(e){return`${Cc(Uc(e))}|lt:${e.limitType}`}function qc(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>yc(e)).join(", ")}]`),fu(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e)).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Hu(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Hu(e)).join(",")),`Target(${t})`}(Uc(e))}; limitType=${e.limitType})`}function Hc(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):tu.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of jc(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=sc(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,jc(e),t))&&!(e.endAt&&!function(e,t,n){const r=sc(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,jc(e),t))}(e,t)}function Kc(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Wc(e){return(t,n)=>{let r=!1;for(const i of jc(e)){const e=Gc(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Gc(e,t,n){const r=e.field.isKeyField()?tu.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?$u(r,i):Rl()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Rl()}}class Qc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){wu(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return Eu(this.inner)}size(){return this.innerSize}}const Yc=new Su(tu.comparator);function Xc(){return Yc}const Jc=new Su(tu.comparator);function Zc(){let e=Jc;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function eh(e){let t=Jc;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function th(){return rh()}function nh(){return rh()}function rh(){return new Qc(e=>e.toString(),(e,t)=>e.isEqual(t))}const ih=new Su(tu.comparator),sh=new Tu(tu.comparator);function oh(){let e=sh;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const ah=new Tu(Wl);function lh(){return ah}function uh(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pu(t)?"-0":t}}function ch(e){return{integerValue:""+e}}function hh(e,t){return mu(t)?ch(t):uh(e,t)}class dh{constructor(){this._=void 0}}function fh(e,t,n){return e instanceof gh?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Ou(t)&&(t=Lu(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof yh?vh(e,t):e instanceof bh?wh(e,t):function(e,t){const n=mh(e,t),r=Sh(n)+Sh(e.gt);return Gu(n)&&Gu(e.gt)?ch(r):uh(e.serializer,r)}(e,t)}function ph(e,t,n){return e instanceof yh?vh(e,t):e instanceof bh?wh(e,t):n}function mh(e,t){return e instanceof Eh?Gu(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class gh extends dh{}class yh extends dh{constructor(e){super(),this.elements=e}}function vh(e,t){const n=_h(t);for(const r of e.elements)n.some(e=>zu(e,r))||n.push(r);return{arrayValue:{values:n}}}class bh extends dh{constructor(e){super(),this.elements=e}}function wh(e,t){let n=_h(t);for(const r of e.elements)n=n.filter(e=>!zu(e,r));return{arrayValue:{values:n}}}class Eh extends dh{constructor(e,t){super(),this.serializer=e,this.gt=t}}function Sh(e){return Du(e.integerValue||e.doubleValue)}function _h(e){return Qu(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class kh{constructor(e,t){this.version=e,this.transformResults=t}}class Th{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Th}static exists(e){return new Th(void 0,e)}static updateTime(e){return new Th(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ih(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class xh{}function Ch(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new jh(e.key,Th.none()):new Ph(e.key,e.data,Th.none());{const n=e.data,r=tc.empty();let i=new Tu(eu.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Oh(e.key,r,new xu(i.toArray()),Th.none())}}function Nh(e,t,n){e instanceof Ph?function(e,t,n){const r=e.value.clone(),i=Mh(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Oh?function(e,t,n){if(!Ih(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Mh(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Lh(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Ah(e,t,n,r){return e instanceof Ph?function(e,t,n,r){if(!Ih(e.precondition,t))return n;const i=e.value.clone(),s=Fh(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Oh?function(e,t,n,r){if(!Ih(e.precondition,t))return n;const i=Fh(e.fieldTransforms,r,t),s=t.data;return s.setAll(Lh(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return Ih(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Rh(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=mh(r.transform,e||null);null!=i&&(null===n&&(n=tc.empty()),n.set(r.field,i))}return n||null}function Dh(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Gl(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof yh&&t instanceof yh||e instanceof bh&&t instanceof bh?Gl(e.elements,t.elements,zu):e instanceof Eh&&t instanceof Eh?zu(e.gt,t.gt):e instanceof gh&&t instanceof gh}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Ph extends xh{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Oh extends xh{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Lh(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Mh(e,t,n){const r=new Map;Dl(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,ph(o,a,n[i]))}return r}function Fh(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,fh(e,s,t))}return r}class jh extends xh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Uh extends xh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Vh{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Nh(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Ah(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Ah(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=nh();return this.mutations.forEach(r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=Ch(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(Yl.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),oh())}isEqual(e){return this.batchId===e.batchId&&Gl(this.mutations,e.mutations,(e,t)=>Dh(e,t))&&Gl(this.baseMutations,e.baseMutations,(e,t)=>Dh(e,t))}}class zh{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Dl(e.mutations.length===n.length);let r=ih;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new zh(e,t,n,r)}}class Bh{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class $h{constructor(e,t){this.count=e,this.unchangedNames=t}}var qh,Hh;function Kh(e){switch(e){default:return Rl();case Ol.CANCELLED:case Ol.UNKNOWN:case Ol.DEADLINE_EXCEEDED:case Ol.RESOURCE_EXHAUSTED:case Ol.INTERNAL:case Ol.UNAVAILABLE:case Ol.UNAUTHENTICATED:return!1;case Ol.INVALID_ARGUMENT:case Ol.NOT_FOUND:case Ol.ALREADY_EXISTS:case Ol.PERMISSION_DENIED:case Ol.FAILED_PRECONDITION:case Ol.ABORTED:case Ol.OUT_OF_RANGE:case Ol.UNIMPLEMENTED:case Ol.DATA_LOSS:return!0}}function Wh(e){if(void 0===e)return Cl("GRPC error has no .code"),Ol.UNKNOWN;switch(e){case qh.OK:return Ol.OK;case qh.CANCELLED:return Ol.CANCELLED;case qh.UNKNOWN:return Ol.UNKNOWN;case qh.DEADLINE_EXCEEDED:return Ol.DEADLINE_EXCEEDED;case qh.RESOURCE_EXHAUSTED:return Ol.RESOURCE_EXHAUSTED;case qh.INTERNAL:return Ol.INTERNAL;case qh.UNAVAILABLE:return Ol.UNAVAILABLE;case qh.UNAUTHENTICATED:return Ol.UNAUTHENTICATED;case qh.INVALID_ARGUMENT:return Ol.INVALID_ARGUMENT;case qh.NOT_FOUND:return Ol.NOT_FOUND;case qh.ALREADY_EXISTS:return Ol.ALREADY_EXISTS;case qh.PERMISSION_DENIED:return Ol.PERMISSION_DENIED;case qh.FAILED_PRECONDITION:return Ol.FAILED_PRECONDITION;case qh.ABORTED:return Ol.ABORTED;case qh.OUT_OF_RANGE:return Ol.OUT_OF_RANGE;case qh.UNIMPLEMENTED:return Ol.UNIMPLEMENTED;case qh.DATA_LOSS:return Ol.DATA_LOSS;default:return Rl()}}(Hh=qh||(qh={}))[Hh.OK=0]="OK",Hh[Hh.CANCELLED=1]="CANCELLED",Hh[Hh.UNKNOWN=2]="UNKNOWN",Hh[Hh.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Hh[Hh.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Hh[Hh.NOT_FOUND=5]="NOT_FOUND",Hh[Hh.ALREADY_EXISTS=6]="ALREADY_EXISTS",Hh[Hh.PERMISSION_DENIED=7]="PERMISSION_DENIED",Hh[Hh.UNAUTHENTICATED=16]="UNAUTHENTICATED",Hh[Hh.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Hh[Hh.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Hh[Hh.ABORTED=10]="ABORTED",Hh[Hh.OUT_OF_RANGE=11]="OUT_OF_RANGE",Hh[Hh.UNIMPLEMENTED=12]="UNIMPLEMENTED",Hh[Hh.INTERNAL=13]="INTERNAL",Hh[Hh.UNAVAILABLE=14]="UNAVAILABLE",Hh[Hh.DATA_LOSS=15]="DATA_LOSS";class Gh{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Qh}static getOrCreateInstance(){return null===Qh&&(Qh=new Gh),Qh}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let Qh=null;function Yh(){return new TextEncoder}const Xh=new El([4294967295,4294967295],0);function Jh(e){const t=Yh().encode(e),n=new wl;return n.update(t),new Uint8Array(n.digest())}function Zh(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new El([n,r],0),new El([i,s],0)]}class ed{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new td(`Invalid padding: ${t}`);if(n<0)throw new td(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new td(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new td(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=El.fromNumber(this.It)}Et(e,t,n){let r=e.add(t.multiply(El.fromNumber(n)));return 1===r.compare(Xh)&&(r=new El([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=Jh(e),[n,r]=Zh(t);for(let i=0;i<this.hashCount;i++){const e=this.Et(n,r,i);if(!this.At(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new ed(i,r,t);return n.forEach(e=>s.insert(e)),s}insert(e){if(0===this.It)return;const t=Jh(e),[n,r]=Zh(t);for(let i=0;i<this.hashCount;i++){const e=this.Et(n,r,i);this.Rt(e)}}Rt(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class td extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class nd{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,rd.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new nd(Yl.min(),r,new Su(Wl),Xc(),oh())}}class rd{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new rd(n,t,oh(),oh(),oh())}}class id{constructor(e,t,n,r){this.Pt=e,this.removedTargetIds=t,this.key=n,this.bt=r}}class sd{constructor(e,t){this.targetId=e,this.Vt=t}}class od{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Nu.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class ad{constructor(){this.St=0,this.Dt=cd(),this.Ct=Nu.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=oh(),t=oh(),n=oh();return this.Dt.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Rl()}}),new rd(this.Ct,this.xt,e,t,n)}Ft(){this.Nt=!1,this.Dt=cd()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class ld{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Xc(),this.zt=ud(),this.Wt=new Su(Wl)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const n=this.Zt(t);switch(e.state){case 0:this.te(t)&&n.$t(e.resumeToken);break;case 1:n.Ut(),n.kt||n.Ft(),n.$t(e.resumeToken);break;case 2:n.Ut(),n.kt||this.removeTarget(t);break;case 3:this.te(t)&&(n.Kt(),n.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),n.$t(e.resumeToken));break;default:Rl()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((e,n)=>{this.te(n)&&t(n)})}ne(e){var t;const n=e.targetId,r=e.Vt.count,i=this.se(n);if(i){const s=i.target;if(Ac(s))if(0===r){const e=new tu(s.path);this.Yt(n,e,rc.newNoDocument(e,Yl.min()))}else Dl(1===r);else{const i=this.ie(n);if(i!==r){const r=this.re(e,i);if(0!==r){this.ee(n);const e=2===r?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,e)}null===(t=Gh.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var r,i,s,o,a,l;const u={localCacheCount:t,existenceFilterCount:n.count},c=n.unchangedNames;return c&&(u.bloomFilter={applied:0===e,hashCount:null!==(r=null==c?void 0:c.hashCount)&&void 0!==r?r:0,bitmapLength:null!==(o=null===(s=null===(i=null==c?void 0:c.bits)||void 0===i?void 0:i.bitmap)||void 0===s?void 0:s.length)&&void 0!==o?o:0,padding:null!==(l=null===(a=null==c?void 0:c.bits)||void 0===a?void 0:a.padding)&&void 0!==l?l:0}),u}(r,i,e.Vt))}}}}re(e,t){const{unchangedNames:n,count:r}=e.Vt;if(!n||!n.bits)return 1;const{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=n;let a,l;try{a=Pu(i).toUint8Array()}catch(e){if(e instanceof Cu)return Nl("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw e}try{l=new ed(a,s,o)}catch(e){return Nl(e instanceof td?"BloomFilter error: ":"Applying bloom filter failed: ",e),1}return 0===l.It?1:r!==t-this.oe(e.targetId,l)?2:0}oe(e,t){const n=this.Gt.getRemoteKeysForTarget(e);let r=0;return n.forEach(n=>{const i=this.Gt.ue(),s=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;t.vt(s)||(this.Yt(e,n,null),r++)}),r}ce(e){const t=new Map;this.Qt.forEach((n,r)=>{const i=this.se(r);if(i){if(n.current&&Ac(i.target)){const t=new tu(i.target.path);null!==this.jt.get(t)||this.ae(r,t)||this.Yt(r,t,rc.newNoDocument(t,e))}n.Mt&&(t.set(r,n.Ot()),n.Ft())}});let n=oh();this.zt.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.se(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.jt.forEach((t,n)=>n.setReadTime(e));const r=new nd(e,t,this.Wt,this.jt,n);return this.jt=Xc(),this.zt=ud(),this.Wt=new Su(Wl),r}Jt(e,t){if(!this.te(e))return;const n=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,n),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,n){if(!this.te(e))return;const r=this.Zt(e);this.ae(e,t)?r.Bt(t,1):r.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),n&&(this.jt=this.jt.insert(t,n))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new ad,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new Tu(Wl),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||xl("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new ad),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function ud(){return new Su(tu.comparator)}function cd(){return new Su(tu.comparator)}const hd={asc:"ASCENDING",desc:"DESCENDING"},dd={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fd={and:"AND",or:"OR"};class pd{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function md(e,t){return e.useProto3Json||fu(t)?t:{value:t}}function gd(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function yd(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function vd(e,t){return gd(e,t.toTimestamp())}function bd(e){return Dl(!!e),Yl.fromTimestamp(function(e){const t=Ru(e);return new Ql(t.seconds,t.nanos)}(e))}function wd(e,t){return function(e){return new Jl(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Ed(e){const t=Jl.fromString(e);return Dl(zd(t)),t}function Sd(e,t){return wd(e.databaseId,t.path)}function _d(e,t){const n=Ed(t);if(n.get(1)!==e.databaseId.projectId)throw new Ll(Ol.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Ll(Ol.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new tu(xd(n))}function kd(e,t){return wd(e.databaseId,t)}function Td(e){const t=Ed(e);return 4===t.length?Jl.emptyPath():xd(t)}function Id(e){return new Jl(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function xd(e){return Dl(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Cd(e,t,n){return{name:Sd(e,t),fields:n.value.mapValue.fields}}function Nd(e,t){let n;if(t instanceof Ph)n={update:Cd(e,t.key,t.value)};else if(t instanceof jh)n={delete:Sd(e,t.key)};else if(t instanceof Oh)n={update:Cd(e,t.key,t.data),updateMask:Vd(t.fieldMask)};else{if(!(t instanceof Uh))return Rl();n={verify:Sd(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof gh)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof yh)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof bh)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Eh)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw Rl()}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:vd(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Rl()}(e,t.precondition)),n}function Ad(e,t){return{documents:[kd(e,t.path)]}}function Rd(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=kd(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=kd(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0!==e.length)return Ud(hc.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const s=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:Fd(e.field),direction:Od(e.dir)}}(e))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=md(e,t.limit);var a;return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt={before:(a=t.startAt).inclusive,values:a.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Dd(e){let t=Td(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Dl(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Pd(e);return t instanceof hc&&fc(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(e=>function(e){return new ac(jd(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,fu(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new ic(n,t)}(n.startAt));let u=null;return n.endAt&&(u=function(e){const t=!e.before,n=e.values||[];return new ic(n,t)}(n.endAt)),Dc(t,i,o,s,a,"F",l,u)}function Pd(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=jd(e.unaryFilter.field);return cc.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=jd(e.unaryFilter.field);return cc.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=jd(e.unaryFilter.field);return cc.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=jd(e.unaryFilter.field);return cc.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Rl()}}(e):void 0!==e.fieldFilter?function(e){return cc.create(jd(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Rl()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return hc.create(e.compositeFilter.filters.map(e=>Pd(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Rl()}}(e.compositeFilter.op))}(e):Rl()}function Od(e){return hd[e]}function Ld(e){return dd[e]}function Md(e){return fd[e]}function Fd(e){return{fieldPath:e.canonicalString()}}function jd(e){return eu.fromServerFormat(e.fieldPath)}function Ud(e){return e instanceof cc?function(e){if("=="===e.op){if(Xu(e.value))return{unaryFilter:{field:Fd(e.field),op:"IS_NAN"}};if(Yu(e.value))return{unaryFilter:{field:Fd(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Xu(e.value))return{unaryFilter:{field:Fd(e.field),op:"IS_NOT_NAN"}};if(Yu(e.value))return{unaryFilter:{field:Fd(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fd(e.field),op:Ld(e.op),value:e.value}}}(e):e instanceof hc?function(e){const t=e.getFilters().map(e=>Ud(e));return 1===t.length?t[0]:{compositeFilter:{op:Md(e.op),filters:t}}}(e):Rl()}function Vd(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function zd(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Bd{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Yl.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Yl.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Nu.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new Bd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Bd(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Bd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Bd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class $d{constructor(e){this.fe=e}}function qd(e){const t=Dd({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?zc(t,t.limit,"L"):t}class Hd{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Du(e.integerValue));else if("doubleValue"in e){const n=Du(e.doubleValue);isNaN(n)?this.ye(t,13):(this.ye(t,15),pu(n)?t.pe(0):t.pe(n))}else if("timestampValue"in e){const n=e.timestampValue;this.ye(t,20),"string"==typeof n?t.Ie(n):(t.Ie(`${n.seconds||""}`),t.pe(n.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Pu(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ye(t,45),t.pe(n.latitude||0),t.pe(n.longitude||0)}else"mapValue"in e?ec(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):Rl()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const n=e.fields||{};this.ye(t,55);for(const r of Object.keys(n))this.Te(r,t),this.me(n[r],t)}Pe(e,t){const n=e.values||[];this.ye(t,50);for(const r of n)this.me(r,t)}ve(e,t){this.ye(t,37),tu.fromName(e).path.forEach(e=>{this.ye(t,60),this.be(e,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}Hd.Ve=new Hd;class Kd{constructor(){this.rn=new Wd}addToCollectionParentIndex(e,t){return this.rn.add(t),cu.resolve()}getCollectionParents(e,t){return cu.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return cu.resolve()}deleteFieldIndex(e,t){return cu.resolve()}getDocumentsMatchingTarget(e,t){return cu.resolve(null)}getIndexType(e,t){return cu.resolve(0)}getFieldIndexes(e,t){return cu.resolve([])}getNextCollectionGroupToUpdate(e){return cu.resolve(null)}getMinOffset(e,t){return cu.resolve(su.min())}getMinOffsetFromCollectionGroup(e,t){return cu.resolve(su.min())}updateCollectionGroup(e,t,n){return cu.resolve()}updateIndexEntries(e,t){return cu.resolve()}}class Wd{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Tu(Jl.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Tu(Jl.comparator)).toArray()}}new Uint8Array(0);class Gd{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Gd(e,Gd.DEFAULT_COLLECTION_PERCENTILE,Gd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Gd.DEFAULT_COLLECTION_PERCENTILE=10,Gd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Gd.DEFAULT=new Gd(41943040,Gd.DEFAULT_COLLECTION_PERCENTILE,Gd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Gd.DISABLED=new Gd(-1,0,0);class Qd{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Qd(0)}static Mn(){return new Qd(-1)}}class Yd{constructor(){this.changes=new Qc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,rc.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?cu.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Xd{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Jd{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Ah(n.mutation,e,xu.empty(),Ql.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,oh()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:oh();const r=th();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=Zc();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=th();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,oh()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=Xc();const s=rh(),o=rh();return t.forEach((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Oh)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Ah(o.mutation,t,o.mutation.getFieldMask(),Ql.now())):s.set(t.key,xu.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var n;return o.set(e,new Xd(t,null!==(n=s.get(e))&&void 0!==n?n:null))}),o))}recalculateAndSaveOverlays(e,t){const n=rh();let r=new Su((e,t)=>e-t),i=oh();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||xu.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||oh()).add(e);r=r.insert(i.batchId,a)})}).next(()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,u=nh();l.forEach(e=>{if(!i.has(e)){const r=Ch(t.get(e),n.get(e));null!==r&&u.set(e,r),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,a,u))}return cu.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n){return function(e){return tu.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Fc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):cu.resolve(th());let o=-1,a=i;return s.next(t=>cu.forEach(t,(t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?cu.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,a,t,oh())).next(e=>({batchId:o,changes:eh(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new tu(t)).next(e=>{let t=Zc();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n){const r=t.collectionGroup;let i=Zc();return this.indexManager.getCollectionParents(e,r).next(s=>cu.forEach(s,s=>{const o=function(e,t){return new Rc(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(r));return this.getDocumentsMatchingCollectionQuery(e,o,n).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,t,n){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(i=>(r=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r))).next(e=>{r.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,rc.newInvalidDocument(r)))});let n=Zc();return e.forEach((e,i)=>{const s=r.get(e);void 0!==s&&Ah(s.mutation,i,xu.empty(),Ql.now()),Hc(t,i)&&(n=n.insert(e,i))}),n})}}class Zd{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return cu.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var n;return this.cs.set(t.id,{id:(n=t).id,version:n.version,createTime:bd(n.createTime)}),cu.resolve()}getNamedQuery(e,t){return cu.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,function(e){return{name:e.name,query:qd(e.bundledQuery),readTime:bd(e.readTime)}}(t)),cu.resolve()}}class ef{constructor(){this.overlays=new Su(tu.comparator),this.ls=new Map}getOverlay(e,t){return cu.resolve(this.overlays.get(t))}getOverlays(e,t){const n=th();return cu.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.we(e,t,r)}),cu.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.ls.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.ls.delete(n)),cu.resolve()}getOverlaysForCollection(e,t,n){const r=th(),i=t.length+1,s=new tu(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return cu.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Su((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=th(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=th(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>o.set(e,t)),!(o.size()>=r)););return cu.resolve(o)}we(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.ls.get(r.largestBatchId).delete(n.key);this.ls.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Bh(t,n));let i=this.ls.get(t);void 0===i&&(i=oh(),this.ls.set(t,i)),this.ls.set(t,i.add(n.key))}}class tf{constructor(){this.fs=new Tu(nf.ds),this.ws=new Tu(nf._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const n=new nf(e,t);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}gs(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.ys(new nf(e,t))}ps(e,t){e.forEach(e=>this.removeReference(e,t))}Is(e){const t=new tu(new Jl([])),n=new nf(t,e),r=new nf(t,e+1),i=[];return this.ws.forEachInRange([n,r],e=>{this.ys(e),i.push(e.key)}),i}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new tu(new Jl([])),n=new nf(t,e),r=new nf(t,e+1);let i=oh();return this.ws.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new nf(e,0),n=this.fs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class nf{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return tu.comparator(e.key,t.key)||Wl(e.As,t.As)}static _s(e,t){return Wl(e.As,t.As)||tu.comparator(e.key,t.key)}}class rf{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Tu(nf.ds)}checkEmpty(e){return cu.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Vh(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.Rs=this.Rs.add(new nf(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return cu.resolve(s)}lookupMutationBatch(e,t){return cu.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.bs(n),i=r<0?0:r;return cu.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return cu.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return cu.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new nf(t,0),r=new nf(t,Number.POSITIVE_INFINITY),i=[];return this.Rs.forEachInRange([n,r],e=>{const t=this.Ps(e.As);i.push(t)}),cu.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Tu(Wl);return t.forEach(e=>{const t=new nf(e,0),r=new nf(e,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([t,r],e=>{n=n.add(e.As)})}),cu.resolve(this.Vs(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;tu.isDocumentKey(i)||(i=i.child(""));const s=new nf(new tu(i),0);let o=new Tu(Wl);return this.Rs.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.As)),!0)},s),cu.resolve(this.Vs(o))}Vs(e){const t=[];return e.forEach(e=>{const n=this.Ps(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){Dl(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let n=this.Rs;return cu.forEach(t.mutations,r=>{const i=new nf(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Rs=n})}Cn(e){}containsKey(e,t){const n=new nf(t,0),r=this.Rs.firstAfterOrEqual(n);return cu.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,cu.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class sf{constructor(e){this.Ds=e,this.docs=new Su(tu.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Ds(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return cu.resolve(n?n.document.mutableCopy():rc.newInvalidDocument(t))}getEntries(e,t){let n=Xc();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():rc.newInvalidDocument(e))}),cu.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Xc();const s=t.path,o=new tu(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||ou(iu(o),n)<=0||(r.has(o.key)||Hc(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return cu.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Rl()}Cs(e,t){return cu.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new of(this)}getSize(e){return cu.resolve(this.size)}}class of extends Yd{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.os.addEntry(e,r)):this.os.removeEntry(n)}),cu.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class af{constructor(e){this.persistence=e,this.xs=new Qc(e=>Cc(e),Nc),this.lastRemoteSnapshotVersion=Yl.min(),this.highestTargetId=0,this.Ns=0,this.ks=new tf,this.targetCount=0,this.Ms=Qd.kn()}forEachTarget(e,t){return this.xs.forEach((e,n)=>t(n)),cu.resolve()}getLastRemoteSnapshotVersion(e){return cu.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return cu.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),cu.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ns&&(this.Ns=t),cu.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Qd(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,cu.resolve()}updateTargetData(e,t){return this.Fn(t),cu.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,cu.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.xs.forEach((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.xs.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),cu.waitFor(i).next(()=>r)}getTargetCount(e){return cu.resolve(this.targetCount)}getTargetData(e,t){const n=this.xs.get(t)||null;return cu.resolve(n)}addMatchingKeys(e,t,n){return this.ks.gs(t,n),cu.resolve()}removeMatchingKeys(e,t,n){this.ks.ps(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),cu.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),cu.resolve()}getMatchingKeysForTargetId(e,t){const n=this.ks.Es(t);return cu.resolve(n)}containsKey(e,t){return cu.resolve(this.ks.containsKey(t))}}class lf{constructor(e,t){this.$s={},this.overlays={},this.Os=new du(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new af(this),this.indexManager=new Kd,this.remoteDocumentCache=function(e){return new sf(e)}(e=>this.referenceDelegate.Ls(e)),this.serializer=new $d(t),this.qs=new Zd(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ef,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.$s[e.toKey()];return n||(n=new rf(t,this.referenceDelegate),this.$s[e.toKey()]=n),n}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,n){xl("MemoryPersistence","Starting transaction:",e);const r=new uf(this.Os.next());return this.referenceDelegate.Us(),n(r).next(e=>this.referenceDelegate.Ks(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Gs(e,t){return cu.or(Object.values(this.$s).map(n=>()=>n.containsKey(e,t)))}}class uf extends lu{constructor(e){super(),this.currentSequenceNumber=e}}class cf{constructor(e){this.persistence=e,this.Qs=new tf,this.js=null}static zs(e){return new cf(e)}get Ws(){if(this.js)return this.js;throw Rl()}addReference(e,t,n){return this.Qs.addReference(n,t),this.Ws.delete(n.toString()),cu.resolve()}removeReference(e,t,n){return this.Qs.removeReference(n,t),this.Ws.add(n.toString()),cu.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),cu.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(e=>this.Ws.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.Ws.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return cu.forEach(this.Ws,n=>{const r=tu.fromPath(n);return this.Hs(e,r).next(e=>{e||t.removeEntry(r,Yl.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(e=>{e?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return cu.or([()=>cu.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class hf{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Fi=n,this.Bi=r}static Li(e,t){let n=oh(),r=oh();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new hf(e,t.fromCache,n,r)}}class df{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,n,r){return this.Ki(e,t).next(i=>i||this.Gi(e,t,r,n)).next(n=>n||this.Qi(e,t))}Ki(e,t){if(Oc(t))return cu.resolve(null);let n=Uc(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=zc(t,null,"F"),n=Uc(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=oh(...r);return this.Ui.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const s=this.ji(t,r);return this.zi(t,s,i,n.readTime)?this.Ki(e,zc(t,null,"F")):this.Wi(e,s,t,n)}))})))}Gi(e,t,n,r){return Oc(t)||r.isEqual(Yl.min())?this.Qi(e,t):this.Ui.getDocuments(e,n).next(i=>{const s=this.ji(t,i);return this.zi(t,s,n,r)?this.Qi(e,t):(Il()<=O.DEBUG&&xl("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),qc(t)),this.Wi(e,s,t,ru(r,-1)))})}ji(e,t){let n=new Tu(Wc(e));return t.forEach((t,r)=>{Hc(e,r)&&(n=n.add(r))}),n}zi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Qi(e,t){return Il()<=O.DEBUG&&xl("QueryEngine","Using full collection scan to execute query:",qc(t)),this.Ui.getDocumentsMatchingQuery(e,t,su.min())}Wi(e,t,n,r){return this.Ui.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}class ff{constructor(e,t,n,r){this.persistence=e,this.Hi=t,this.serializer=r,this.Ji=new Su(Wl),this.Yi=new Qc(e=>Cc(e),Nc),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(n)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Jd(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function pf(e,t,n,r){return new ff(e,t,n,r)}async function mf(e,t){const n=Pl(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.tr(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],s=[];let o=oh();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next(e=>({er:e,removedBatchIds:i,addedBatchIds:s}))})})}function gf(e){const t=Pl(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Bs.getLastRemoteSnapshotVersion(e))}function yf(e,t,n){let r=oh(),i=oh();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=Xc();return n.forEach((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(Yl.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):xl("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)}),{nr:r,sr:i}})}function vf(e,t){const n=Pl(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function bf(e,t){const n=Pl(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Bs.getTargetData(e,t).next(i=>i?(r=i,cu.resolve(r)):n.Bs.allocateTargetId(e).next(i=>(r=new Bd(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Bs.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ji.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e})}async function wf(e,t,n){const r=Pl(e),i=r.Ji.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!hu(e))throw e;xl("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.Ji=r.Ji.remove(t),r.Yi.delete(i.target)}function Ef(e,t,n){const r=Pl(e);let i=Yl.min(),s=oh();return r.persistence.runTransaction("Execute query","readonly",e=>function(e,t,n){const r=Pl(e),i=r.Yi.get(n);return void 0!==i?cu.resolve(r.Ji.get(i)):r.Bs.getTargetData(t,n)}(r,e,Uc(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.Hi.getDocumentsMatchingQuery(e,t,n?i:Yl.min(),n?s:oh())).next(e=>(Sf(r,Kc(t),e),{documents:e,ir:s})))}function Sf(e,t,n){let r=e.Xi.get(t)||Yl.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Xi.set(t,r)}class _f{constructor(){this.activeTargetIds=lh()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class kf{constructor(){this.Hr=new _f,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,n){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new _f,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Tf{Yr(e){}shutdown(){}}class If{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){xl("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){xl("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let xf=null;function Cf(){return null===xf?xf=268435456+Math.round(2147483648*Math.random()):xf++,"0x"+xf.toString(16)}const Nf={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Af{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Rf="WebChannelConnection";class Df extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.mo=t+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,n,r,i){const s=Cf(),o=this.To(e,t);xl("RestConnection",`Sending RPC '${e}' ${s}:`,o,n);const a={};return this.Eo(a,r,i),this.Ao(e,o,a,n).then(t=>(xl("RestConnection",`Received RPC '${e}' ${s}: `,t),t),t=>{throw Nl("RestConnection",`RPC '${e}' ${s} failed with error: `,t,"url: ",o,"request:",n),t})}vo(e,t,n,r,i,s){return this.Io(e,t,n,r,i)}Eo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+kl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}To(e,t){const n=Nf[e];return`${this.mo}/v1/${t}:${n}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,n,r){const i=Cf();return new Promise((s,o)=>{const a=new bl;a.setWithCredentials(!0),a.listenOnce(pl.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case fl.NO_ERROR:const t=a.getResponseJson();xl(Rf,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),s(t);break;case fl.TIMEOUT:xl(Rf,`RPC '${e}' ${i} timed out`),o(new Ll(Ol.DEADLINE_EXCEEDED,"Request time out"));break;case fl.HTTP_ERROR:const n=a.getStatus();if(xl(Rf,`RPC '${e}' ${i} failed with status:`,n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Ol).indexOf(t)>=0?t:Ol.UNKNOWN}(t.status);o(new Ll(e,t.message))}else o(new Ll(Ol.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Ll(Ol.UNAVAILABLE,"Connection failed."));break;default:Rl()}}finally{xl(Rf,`RPC '${e}' ${i} completed.`)}});const l=JSON.stringify(r);xl(Rf,`RPC '${e}' ${i} sending request:`,r),a.send(t,"POST",l,n,15)})}Ro(e,t,n){const r=Cf(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=hl(),o=dl(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.xmlHttpFactory=new yl({})),this.Eo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const u=i.join("");xl(Rf,`Creating RPC '${e}' stream ${r}: ${u}`,a);const c=s.createWebChannel(u,a);let h=!1,d=!1;const f=new Af({ro:t=>{d?xl(Rf,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(h||(xl(Rf,`Opening RPC '${e}' stream ${r} transport.`),c.open(),h=!0),xl(Rf,`RPC '${e}' stream ${r} sending:`,t),c.send(t))},oo:()=>c.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(c,vl.EventType.OPEN,()=>{d||xl(Rf,`RPC '${e}' stream ${r} transport opened.`)}),p(c,vl.EventType.CLOSE,()=>{d||(d=!0,xl(Rf,`RPC '${e}' stream ${r} transport closed`),f.wo())}),p(c,vl.EventType.ERROR,t=>{d||(d=!0,Nl(Rf,`RPC '${e}' stream ${r} transport errored:`,t),f.wo(new Ll(Ol.UNAVAILABLE,"The operation could not be completed")))}),p(c,vl.EventType.MESSAGE,t=>{var n;if(!d){const i=t.data[0];Dl(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){xl(Rf,`RPC '${e}' stream ${r} received error:`,o);const t=o.status;let n=function(e){const t=qh[e];if(void 0!==t)return Wh(t)}(t),i=o.message;void 0===n&&(n=Ol.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.wo(new Ll(n,i)),c.close()}else xl(Rf,`RPC '${e}' stream ${r} received:`,i),f._o(i)}}),p(o,ml.STAT_EVENT,t=>{t.stat===gl.PROXY?xl(Rf,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===gl.NOPROXY&&xl(Rf,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{f.fo()},0),f}}function Pf(){return"undefined"!=typeof document?document:null}function Of(e){return new pd(e,!0)}class Lf{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ii=e,this.timerId=t,this.Po=n,this.bo=r,this.Vo=i,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),n=Math.max(0,Date.now()-this.Co),r=Math.max(0,t-n);r>0&&xl("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,r,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class Mf{constructor(e,t,n,r,i,s,o,a){this.ii=e,this.$o=n,this.Oo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new Lf(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,t){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==e?this.qo.reset():t&&t.code===Ol.RESOURCE_EXHAUSTED?(Cl(t.toString()),Cl("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):t&&t.code===Ol.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(t)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.Fo===t&&this.Zo(n,r)},t=>{e(()=>{const e=new Ll(Ol.UNKNOWN,"Fetching auth token failed: "+t.message);return this.tu(e)})})}Zo(e,t){const n=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{n(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(e=>{n(()=>this.tu(e))}),this.stream.onMessage(e=>{n(()=>this.onMessage(e))})}Go(){this.state=5,this.qo.No(async()=>{this.state=0,this.start()})}tu(e){return xl("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(xl("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Ff extends Mf{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Rl()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Dl(void 0===t||"string"==typeof t),Nu.fromBase64String(t||"")):(Dl(void 0===t||t instanceof Uint8Array),Nu.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Ol.UNKNOWN:Wh(e.code);return new Ll(t,e.message||"")}(o);n=new od(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=_d(e,r.document.name),s=bd(r.document.updateTime),o=r.document.createTime?bd(r.document.createTime):Yl.min(),a=new tc({mapValue:{fields:r.document.fields}}),l=rc.newFoundDocument(i,s,o,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new id(u,c,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=_d(e,r.document),s=r.readTime?bd(r.readTime):Yl.min(),o=rc.newNoDocument(i,s),a=r.removedTargetIds||[];n=new id([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=_d(e,r.document),s=r.removedTargetIds||[];n=new id([],s,i,null)}else{if(!("filter"in t))return Rl();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new $h(r,i),o=e.targetId;n=new sd(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Yl.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Yl.min():t.readTime?bd(t.readTime):Yl.min()}(e);return this.listener.nu(t,n)}su(e){const t={};t.database=Id(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Ac(r)?{documents:Ad(e,r)}:{query:Rd(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=yd(e,t.resumeToken);const r=md(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Yl.min())>0){n.readTime=gd(e,t.snapshotVersion.toTimestamp());const r=md(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Rl()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Wo(t)}iu(e){const t={};t.database=Id(this.serializer),t.removeTarget=e,this.Wo(t)}}class jf extends Mf{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(Dl(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function(e,t){return e&&e.length>0?(Dl(void 0!==t),e.map(e=>function(e,t){let n=e.updateTime?bd(e.updateTime):bd(t);return n.isEqual(Yl.min())&&(n=bd(t)),new kh(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=bd(e.commitTime);return this.listener.cu(n,t)}return Dl(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Id(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Nd(this.serializer,e))};this.Wo(t)}}class Uf extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.lu=!1}fu(){if(this.lu)throw new Ll(Ol.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,n){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(r=>{let[i,s]=r;return this.connection.Io(e,t,n,i,s)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Ol.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Ll(Ol.UNKNOWN,e.toString())})}vo(e,t,n,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[s,o]=i;return this.connection.vo(e,t,n,s,o,r)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Ol.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Ll(Ol.UNKNOWN,e.toString())})}terminate(){this.lu=!0}}class Vf{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Cl(t),this.mu=!1):xl("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class zf{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=i,this.Pu.Yr(e=>{n.enqueueAndForget(async()=>{Yf(this)&&(xl("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Pl(e);t.vu.add(4),await $f(t),t.bu.set("Unknown"),t.vu.delete(4),await Bf(t)}(this))})}),this.bu=new Vf(n,r)}}async function Bf(e){if(Yf(e))for(const t of e.Ru)await t(!0)}async function $f(e){for(const t of e.Ru)await t(!1)}function qf(e,t){const n=Pl(e);n.Au.has(t.targetId)||(n.Au.set(t.targetId,t),Qf(n)?Gf(n):pp(n).Ko()&&Kf(n,t))}function Hf(e,t){const n=Pl(e),r=pp(n);n.Au.delete(t),r.Ko()&&Wf(n,t),0===n.Au.size&&(r.Ko()?r.jo():Yf(n)&&n.bu.set("Unknown"))}function Kf(e,t){if(e.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Yl.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}pp(e).su(t)}function Wf(e,t){e.Vu.qt(t),pp(e).iu(t)}function Gf(e){e.Vu=new ld({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),le:t=>e.Au.get(t)||null,ue:()=>e.datastore.serializer.databaseId}),pp(e).start(),e.bu.gu()}function Qf(e){return Yf(e)&&!pp(e).Uo()&&e.Au.size>0}function Yf(e){return 0===Pl(e).vu.size}function Xf(e){e.Vu=void 0}async function Jf(e){e.Au.forEach((t,n)=>{Kf(e,t)})}async function Zf(e,t){Xf(e),Qf(e)?(e.bu.Iu(t),Gf(e)):e.bu.set("Unknown")}async function ep(e,t,n){if(e.bu.set("Online"),t instanceof od&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Au.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Au.delete(r),e.Vu.removeTarget(r))}(e,t)}catch(n){xl("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await tp(e,n)}else if(t instanceof id?e.Vu.Ht(t):t instanceof sd?e.Vu.ne(t):e.Vu.Xt(t),!n.isEqual(Yl.min()))try{const t=await gf(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Vu.ce(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Au.get(r);i&&e.Au.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Au.get(t);if(!r)return;e.Au.set(t,r.withResumeToken(Nu.EMPTY_BYTE_STRING,r.snapshotVersion)),Wf(e,t);const i=new Bd(r.target,t,n,r.sequenceNumber);Kf(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){xl("RemoteStore","Failed to raise snapshot:",t),await tp(e,t)}}async function tp(e,t,n){if(!hu(t))throw t;e.vu.add(1),await $f(e),e.bu.set("Offline"),n||(n=()=>gf(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{xl("RemoteStore","Retrying IndexedDB access"),await n(),e.vu.delete(1),await Bf(e)})}function np(e,t){return t().catch(n=>tp(e,n,t))}async function rp(e){const t=Pl(e),n=mp(t);let r=t.Eu.length>0?t.Eu[t.Eu.length-1].batchId:-1;for(;ip(t);)try{const e=await vf(t.localStore,r);if(null===e){0===t.Eu.length&&n.jo();break}r=e.batchId,sp(t,e)}catch(e){await tp(t,e)}op(t)&&ap(t)}function ip(e){return Yf(e)&&e.Eu.length<10}function sp(e,t){e.Eu.push(t);const n=mp(e);n.Ko()&&n.ou&&n.uu(t.mutations)}function op(e){return Yf(e)&&!mp(e).Uo()&&e.Eu.length>0}function ap(e){mp(e).start()}async function lp(e){mp(e).hu()}async function up(e){const t=mp(e);for(const n of e.Eu)t.uu(n.mutations)}async function cp(e,t,n){const r=e.Eu.shift(),i=zh.from(r,t,n);await np(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await rp(e)}async function hp(e,t){t&&mp(e).ou&&await async function(e,t){if(Kh(n=t.code)&&n!==Ol.ABORTED){const n=e.Eu.shift();mp(e).Qo(),await np(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await rp(e)}var n}(e,t),op(e)&&ap(e)}async function dp(e,t){const n=Pl(e);n.asyncQueue.verifyOperationInProgress(),xl("RemoteStore","RemoteStore received new credentials");const r=Yf(n);n.vu.add(3),await $f(n),r&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.vu.delete(3),await Bf(n)}async function fp(e,t){const n=Pl(e);t?(n.vu.delete(2),await Bf(n)):t||(n.vu.add(2),await $f(n),n.bu.set("Unknown"))}function pp(e){return e.Su||(e.Su=function(e,t,n){const r=Pl(e);return r.fu(),new Ff(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:Jf.bind(null,e),ao:Zf.bind(null,e),nu:ep.bind(null,e)}),e.Ru.push(async t=>{t?(e.Su.Qo(),Qf(e)?Gf(e):e.bu.set("Unknown")):(await e.Su.stop(),Xf(e))})),e.Su}function mp(e){return e.Du||(e.Du=function(e,t,n){const r=Pl(e);return r.fu(),new jf(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:lp.bind(null,e),ao:hp.bind(null,e),au:up.bind(null,e),cu:cp.bind(null,e)}),e.Ru.push(async t=>{t?(e.Du.Qo(),await rp(e)):(await e.Du.stop(),e.Eu.length>0&&(xl("RemoteStore",`Stopping write stream with ${e.Eu.length} pending writes`),e.Eu=[]))})),e.Du}class gp{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Ml,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new gp(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ll(Ol.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function yp(e,t){if(Cl("AsyncQueue",`${t}: ${e}`),hu(e))return new Ll(Ol.UNAVAILABLE,`${t}: ${e}`);throw e}class vp{constructor(e){this.comparator=e?(t,n)=>e(t,n)||tu.comparator(t.key,n.key):(e,t)=>tu.comparator(e.key,t.key),this.keyedMap=Zc(),this.sortedSet=new Su(this.comparator)}static emptySet(e){return new vp(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof vp))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new vp;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class bp{constructor(){this.Cu=new Su(tu.comparator)}track(e){const t=e.doc.key,n=this.Cu.get(t);n?0!==e.type&&3===n.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==n.type?this.Cu=this.Cu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Cu=this.Cu.remove(t):1===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):Rl():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,n)=>{e.push(n)}),e}}class wp{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new wp(e,t,vp.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Ep{constructor(){this.Nu=void 0,this.listeners=[]}}class Sp{constructor(){this.queries=new Qc(e=>$c(e),Bc),this.onlineState="Unknown",this.ku=new Set}}async function _p(e,t){const n=Pl(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new Ep),i)try{s.Nu=await n.onListen(r)}catch(e){const n=yp(e,`Initialization of query '${qc(t.query)}' failed`);return void t.onError(n)}n.queries.set(r,s),s.listeners.push(t),t.Mu(n.onlineState),s.Nu&&t.$u(s.Nu)&&xp(n)}async function kp(e,t){const n=Pl(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.listeners.indexOf(t);e>=0&&(s.listeners.splice(e,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function Tp(e,t){const n=Pl(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.listeners)e.$u(i)&&(r=!0);t.Nu=i}}r&&xp(n)}function Ip(e,t,n){const r=Pl(e),i=r.queries.get(t);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(t)}function xp(e){e.ku.forEach(e=>{e.next()})}class Cp{constructor(e,t,n){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=n||{}}$u(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new wp(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.Ku||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){if(e.docChanges.length>0)return!0;const t=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Uu(e){e=wp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class Np{constructor(e){this.key=e}}class Ap{constructor(e){this.key=e}}class Rp{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=oh(),this.mutatedKeys=oh(),this.tc=Wc(e),this.ec=new vp(this.tc)}get nc(){return this.Yu}sc(e,t){const n=t?t.ic:new bp,r=t?t.ec:this.ec;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const u=r.get(e),c=Hc(this.query,t)?t:null,h=!!u&&this.mutatedKeys.has(u.key),d=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations);let f=!1;u&&c?u.data.isEqual(c.data)?h!==d&&(n.track({type:3,doc:c}),f=!0):this.rc(u,c)||(n.track({type:2,doc:c}),f=!0,(a&&this.tc(c,a)>0||l&&this.tc(c,l)<0)&&(o=!0)):!u&&c?(n.track({type:0,doc:c}),f=!0):u&&!c&&(n.track({type:1,doc:u}),f=!0,(a||l)&&(o=!0)),f&&(c?(s=s.add(c),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{ec:s,ic:n,zi:o,mutatedKeys:i}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const i=e.ic.xu();i.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Rl()}};return n(e)-n(t)}(e.type,t.type)||this.tc(e.doc,t.doc)),this.oc(n);const s=t?this.uc():[],o=0===this.Zu.size&&this.current?1:0,a=o!==this.Xu;return this.Xu=o,0!==i.length||a?{snapshot:new wp(this.query,e.ec,r,i,e.mutatedKeys,0===o,a,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:s}:{cc:s}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new bp,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(e=>this.Yu=this.Yu.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Yu=this.Yu.delete(e)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=oh(),this.ec.forEach(e=>{this.ac(e.key)&&(this.Zu=this.Zu.add(e.key))});const t=[];return e.forEach(e=>{this.Zu.has(e)||t.push(new Ap(e))}),this.Zu.forEach(n=>{e.has(n)||t.push(new Np(n))}),t}hc(e){this.Yu=e.ir,this.Zu=oh();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return wp.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class Dp{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Pp{constructor(e){this.key=e,this.fc=!1}}class Op{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.dc={},this.wc=new Qc(e=>$c(e),Bc),this._c=new Map,this.mc=new Set,this.gc=new Su(tu.comparator),this.yc=new Map,this.Ic=new tf,this.Tc={},this.Ec=new Map,this.Ac=Qd.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}async function Lp(e,t){const n=Zp(e);let r,i;const s=n.wc.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.lc();else{const e=await bf(n.localStore,Uc(t)),s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await Mp(n,t,r,"current"===s,e.resumeToken),n.isPrimaryClient&&qf(n.remoteStore,e)}return i}async function Mp(e,t,n,r,i){e.Rc=(t,n,r)=>async function(e,t,n,r){let i=t.view.sc(n);i.zi&&(i=await Ef(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.sc(n,i)}));const s=r&&r.targetChanges.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s);return Wp(e,t.targetId,o.cc),o.snapshot}(e,t,n,r);const s=await Ef(e.localStore,t,!0),o=new Rp(t,s.ir),a=o.sc(s.documents),l=rd.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),u=o.applyChanges(a,e.isPrimaryClient,l);Wp(e,n,u.cc);const c=new Dp(t,n,o);return e.wc.set(t,c),e._c.has(n)?e._c.get(n).push(t):e._c.set(n,[t]),u.snapshot}async function Fp(e,t){const n=Pl(e),r=n.wc.get(t),i=n._c.get(r.targetId);if(i.length>1)return n._c.set(r.targetId,i.filter(e=>!Bc(e,t))),void n.wc.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await wf(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Hf(n.remoteStore,r.targetId),Hp(n,r.targetId)}).catch(uu)):(Hp(n,r.targetId),await wf(n.localStore,r.targetId,!0))}async function jp(e,t){const n=Pl(e);try{const e=await function(e,t){const n=Pl(e),r=t.snapshotVersion;let i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.Zi.newChangeBuffer({trackRemovals:!0});i=n.Ji;const o=[];t.targetChanges.forEach((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.Bs.removeMatchingKeys(e,s.removedDocuments,a).next(()=>n.Bs.addMatchingKeys(e,s.addedDocuments,a)));let u=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?u=u.withResumeToken(Nu.EMPTY_BYTE_STRING,Yl.min()).withLastLimboFreeSnapshotVersion(Yl.min()):s.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(s.resumeToken,r)),i=i.insert(a,u),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,u,s)&&o.push(n.Bs.updateTargetData(e,u))});let a=Xc(),l=oh();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(yf(e,s,t.documentUpdates).next(e=>{a=e.nr,l=e.sr})),!r.isEqual(Yl.min())){const t=n.Bs.getLastRemoteSnapshotVersion(e).next(t=>n.Bs.setTargetsMetadata(e,e.currentSequenceNumber,r));o.push(t)}return cu.waitFor(o).next(()=>s.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,a,l)).next(()=>a)}).then(e=>(n.Ji=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.yc.get(t);r&&(Dl(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.fc=!0:e.modifiedDocuments.size>0?Dl(r.fc):e.removedDocuments.size>0&&(Dl(r.fc),r.fc=!1))}),await Yp(n,e,t)}catch(e){await uu(e)}}function Up(e,t,n){const r=Pl(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.wc.forEach((n,r)=>{const i=r.view.Mu(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=Pl(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.listeners)i.Mu(t)&&(r=!0)}),r&&xp(n)}(r.eventManager,t),e.length&&r.dc.nu(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Vp(e,t,n){const r=Pl(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.yc.get(t),s=i&&i.key;if(s){let e=new Su(tu.comparator);e=e.insert(s,rc.newNoDocument(s,Yl.min()));const n=oh().add(s),i=new nd(Yl.min(),new Map,new Su(Wl),e,n);await jp(r,i),r.gc=r.gc.remove(s),r.yc.delete(t),Qp(r)}else await wf(r.localStore,t,!1).then(()=>Hp(r,t,n)).catch(uu)}async function zp(e,t){const n=Pl(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Pl(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.Zi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=cu.resolve();return s.forEach(e=>{o=o.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);Dl(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),o.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=oh();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);qp(n,r,null),$p(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Yp(n,e)}catch(e){await uu(e)}}async function Bp(e,t,n){const r=Pl(e);try{const e=await function(e,t){const n=Pl(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(Dl(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);qp(r,t,n),$p(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Yp(r,e)}catch(n){await uu(n)}}function $p(e,t){(e.Ec.get(t)||[]).forEach(e=>{e.resolve()}),e.Ec.delete(t)}function qp(e,t,n){const r=Pl(e);let i=r.Tc[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Tc[r.currentUser.toKey()]=i}}function Hp(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e._c.get(t))e.wc.delete(r),n&&e.dc.Pc(r,n);e._c.delete(t),e.isPrimaryClient&&e.Ic.Is(t).forEach(t=>{e.Ic.containsKey(t)||Kp(e,t)})}function Kp(e,t){e.mc.delete(t.path.canonicalString());const n=e.gc.get(t);null!==n&&(Hf(e.remoteStore,n),e.gc=e.gc.remove(t),e.yc.delete(n),Qp(e))}function Wp(e,t,n){for(const r of n)r instanceof Np?(e.Ic.addReference(r.key,t),Gp(e,r)):r instanceof Ap?(xl("SyncEngine","Document no longer in limbo: "+r.key),e.Ic.removeReference(r.key,t),e.Ic.containsKey(r.key)||Kp(e,r.key)):Rl()}function Gp(e,t){const n=t.key,r=n.path.canonicalString();e.gc.get(n)||e.mc.has(r)||(xl("SyncEngine","New document in limbo: "+n),e.mc.add(r),Qp(e))}function Qp(e){for(;e.mc.size>0&&e.gc.size<e.maxConcurrentLimboResolutions;){const t=e.mc.values().next().value;e.mc.delete(t);const n=new tu(Jl.fromString(t)),r=e.Ac.next();e.yc.set(r,new Pp(n)),e.gc=e.gc.insert(n,r),qf(e.remoteStore,new Bd(Uc(Pc(n.path)),r,"TargetPurposeLimboResolution",du.ct))}}async function Yp(e,t,n){const r=Pl(e),i=[],s=[],o=[];r.wc.isEmpty()||(r.wc.forEach((e,a)=>{o.push(r.Rc(a,t,n).then(e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=hf.Li(a.targetId,e);s.push(t)}}))}),await Promise.all(o),r.dc.nu(i),await async function(e,t){const n=Pl(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>cu.forEach(t,t=>cu.forEach(t.Fi,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>cu.forEach(t.Bi,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!hu(e))throw e;xl("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ji.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ji=n.Ji.insert(e,i)}}}(r.localStore,s))}async function Xp(e,t){const n=Pl(e);if(!n.currentUser.isEqual(t)){xl("SyncEngine","User change. New user:",t.toKey());const e=await mf(n.localStore,t);n.currentUser=t,function(e){e.Ec.forEach(e=>{e.forEach(e=>{e.reject(new Ll(Ol.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.Ec.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Yp(n,e.er)}}function Jp(e,t){const n=Pl(e),r=n.yc.get(t);if(r&&r.fc)return oh().add(r.key);{let e=oh();const r=n._c.get(t);if(!r)return e;for(const t of r){const r=n.wc.get(t);e=e.unionWith(r.view.nc)}return e}}function Zp(e){const t=Pl(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=jp.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Jp.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Vp.bind(null,t),t.dc.nu=Tp.bind(null,t.eventManager),t.dc.Pc=Ip.bind(null,t.eventManager),t}function em(e){const t=Pl(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=zp.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Bp.bind(null,t),t}class tm{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Of(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return pf(this.persistence,new df,e.initialUser,this.serializer)}createPersistence(e){return new lf(cf.zs,this.serializer)}createSharedClientState(e){return new kf}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class nm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Up(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Xp.bind(null,this.syncEngine),await fp(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Sp}createDatastore(e){const t=Of(e.databaseInfo.databaseId),n=(r=e.databaseInfo,new Df(r));var r;return function(e,t,n,r){return new Uf(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=e=>Up(this.syncEngine,e,0),s=If.D()?new If:new Tf,new zf(t,n,r,i,s);var t,n,r,i,s}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new Op(e,t,n,r,i,s);return o&&(a.vc=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=Pl(e);xl("RemoteStore","RemoteStore shutting down."),t.vu.add(5),await $f(t),t.Pu.shutdown(),t.bu.set("Unknown")}(this.remoteStore)}}class rm{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Cl("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class im{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=_l.UNAUTHENTICATED,this.clientId=Kl.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,async e=>{xl("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(xl("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ll(Ol.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ml;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=yp(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function sm(e,t){e.asyncQueue.verifyOperationInProgress(),xl("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await mf(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function om(e,t){e.asyncQueue.verifyOperationInProgress();const n=await lm(e);xl("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener(e=>dp(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>dp(t.remoteStore,n)),e._onlineComponents=t}function am(e){return"FirebaseError"===e.name?e.code===Ol.FAILED_PRECONDITION||e.code===Ol.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function lm(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){xl("FirestoreClient","Using user provided OfflineComponentProvider");try{await sm(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!am(n))throw n;Nl("Error using user provided cache. Falling back to memory cache: "+n),await sm(e,new tm)}}else xl("FirestoreClient","Using default OfflineComponentProvider"),await sm(e,new tm);return e._offlineComponents}async function um(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(xl("FirestoreClient","Using user provided OnlineComponentProvider"),await om(e,e._uninitializedComponentsProvider._online)):(xl("FirestoreClient","Using default OnlineComponentProvider"),await om(e,new nm))),e._onlineComponents}function cm(e){return um(e).then(e=>e.syncEngine)}async function hm(e){const t=await um(e),n=t.eventManager;return n.onListen=Lp.bind(null,t.syncEngine),n.onUnlisten=Fp.bind(null,t.syncEngine),n}function dm(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const fm=new Map;function pm(e,t,n){if(!n)throw new Ll(Ol.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function mm(e){if(!tu.isDocumentKey(e))throw new Ll(Ol.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function gm(e){if(tu.isDocumentKey(e))throw new Ll(Ol.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function ym(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":Rl()}function vm(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Ll(Ol.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ym(e);throw new Ll(Ol.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}class bm{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Ll(Ol.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ll(Ol.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Ll(Ol.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=dm(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Ll(Ol.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new Ll(Ol.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new Ll(Ol.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}class wm{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new bm({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ll(Ol.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ll(Ol.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new bm(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new jl;switch(e.type){case"firstParty":return new Bl(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Ll(Ol.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=fm.get(e);t&&(xl("ComponentProvider","Removing Datastore"),fm.delete(e),t.terminate())}(this),Promise.resolve()}}function Em(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=vm(e,wm))._getSettings(),o=`${t}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&Nl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=_l.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[l(JSON.stringify({alg:"none",type:"JWT"})),l(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Ll(Ol.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new _l(s)}e._authCredentials=new Ul(new Fl(t,n))}}class Sm{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new km(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Sm(this.firestore,e,this._key)}}class _m{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new _m(this.firestore,e,this._query)}}class km extends _m{constructor(e,t,n){super(e,t,Pc(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Sm(this.firestore,null,new tu(e))}withConverter(e){return new km(this.firestore,e,this._path)}}function Tm(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=C(e),pm("collection","path",t),e instanceof wm){const n=Jl.fromString(t,...r);return gm(n),new km(e,null,n)}{if(!(e instanceof Sm||e instanceof km))throw new Ll(Ol.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Jl.fromString(t,...r));return gm(n),new km(e.firestore,null,n)}}function Im(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=C(e),1===arguments.length&&(t=Kl.A()),pm("doc","path",t),e instanceof wm){const n=Jl.fromString(t,...r);return mm(n),new Sm(e,null,new tu(n))}{if(!(e instanceof Sm||e instanceof km))throw new Ll(Ol.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Jl.fromString(t,...r));return mm(n),new Sm(e.firestore,e instanceof km?e.converter:null,new tu(n))}}class xm{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new Lf(this,"async_queue_retry"),this.Xc=()=>{const e=Pf();e&&xl("AsyncQueue","Visibility state changed to "+e.visibilityState),this.qo.Mo()};const e=Pf();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=Pf();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Ml;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}async ea(){if(0!==this.Qc.length){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!hu(e))throw e;xl("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No(()=>this.ea())}}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(e=>{this.Wc=e,this.Hc=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Cl("INTERNAL UNHANDLED ERROR: ",t),e}).then(e=>(this.Hc=!1,e))));return this.Gc=t,t}enqueueAfterDelay(e,t,n){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const r=gp.createAndSchedule(this,e,t,n,e=>this.na(e));return this.zc.push(r),r}Zc(){this.Wc&&Rl()}verifyOperationInProgress(){}async sa(){let e;do{e=this.Gc,await e}while(e!==this.Gc)}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function Cm(e){return function(e){if("object"!=typeof e||null===e)return!1;const t=e;for(const n of["next","error","complete"])if(n in t&&"function"==typeof t[n])return!0;return!1}(e)}class Nm extends wm{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new xm,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Rm(this),this._firestoreClient.terminate()}}function Am(e){return e._firestoreClient||Rm(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Rm(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Fu(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,dm(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new im(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}class Dm{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Dm(Nu.fromBase64String(e))}catch(e){throw new Ll(Ol.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Dm(Nu.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Pm{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Ll(Ol.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new eu(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Om{constructor(e){this._methodName=e}}class Lm{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ll(Ol.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ll(Ol.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Wl(this._lat,e._lat)||Wl(this._long,e._long)}}const Mm=/^__.*__$/;class Fm{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Oh(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ph(e,this.data,t,this.fieldTransforms)}}function jm(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Rl()}}class Um{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.ua(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Um(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.fa(e),r}da(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.ua(),r}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return Xm(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(jm(this.ca)&&Mm.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class Vm{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Of(e)}ya(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Um({ca:e,methodName:t,ga:n,path:eu.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function zm(e){const t=e._freezeSettings(),n=Of(e._databaseId);return new Vm(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Bm(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.ya(s.merge||s.mergeFields?2:0,t,n,i);Wm("Data must be an object, but it was:",o,r);const a=Hm(r,o);let l,u;if(s.merge)l=new xu(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Gm(t,r,n);if(!o.contains(i))throw new Ll(Ol.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);Jm(e,i)||e.push(i)}l=new xu(e),u=o.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,u=o.fieldTransforms;return new Fm(new tc(a),l,u)}function $m(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return qm(n,e.ya(r?4:3,t))}function qm(e,t){if(Km(e=C(e)))return Wm("Unsupported field value:",t,e),Hm(e,t);if(e instanceof Om)return function(e,t){if(!jm(t.ca))throw t._a(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t._a(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=qm(i,t.wa(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=C(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return hh(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Ql.fromDate(e);return{timestampValue:gd(t.serializer,n)}}if(e instanceof Ql){const n=new Ql(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:gd(t.serializer,n)}}if(e instanceof Lm)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Dm)return{bytesValue:yd(t.serializer,e._byteString)};if(e instanceof Sm){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t._a(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:wd(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a(`Unsupported field value: ${ym(e)}`)}(e,t)}function Hm(e,t){const n={};return Eu(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):wu(e,(e,r)=>{const i=qm(r,t.ha(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function Km(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Ql||e instanceof Lm||e instanceof Dm||e instanceof Sm||e instanceof Om)}function Wm(e,t,n){if(!Km(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=ym(n);throw"an object"===r?t._a(e+" a custom object"):t._a(e+" "+r)}}function Gm(e,t,n){if((t=C(t))instanceof Pm)return t._internalPath;if("string"==typeof t)return Ym(e,t);throw Xm("Field path arguments must be of type string or ",e,!1,void 0,n)}const Qm=new RegExp("[~\\*/\\[\\]]");function Ym(e,t,n){if(t.search(Qm)>=0)throw Xm(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Pm(...t.split("."))._internalPath}catch(r){throw Xm(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Xm(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Ll(Ol.INVALID_ARGUMENT,a+e+l)}function Jm(e,t){return e.some(e=>e.isEqual(t))}class Zm{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Sm(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new eg(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(tg("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class eg extends Zm{data(){return super.data()}}function tg(e,t){return"string"==typeof t?Ym(e,t):t instanceof Pm?t._internalPath:t._delegate._internalPath}function ng(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Ll(Ol.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class rg{}class ig extends rg{}function sg(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof rg&&n.push(t),n=n.concat(i),function(e){const t=e.filter(e=>e instanceof ag).length,n=e.filter(e=>e instanceof og).length;if(t>1||t>0&&n>0)throw new Ll(Ol.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class og extends ig{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new og(e,t,n)}_apply(e){const t=this._parse(e);return cg(e._query,t),new _m(e.firestore,e.converter,Vc(e._query,t))}_parse(e){const t=zm(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Ll(Ol.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){ug(o,s);const t=[];for(const n of o)t.push(lg(r,e,n));a={arrayValue:{values:t}}}else a=lg(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||ug(o,s),a=$m(n,"where",o,"in"===s||"not-in"===s);return cc.create(i,s,a)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class ag extends rg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ag(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:hc.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)cg(n,i),n=Vc(n,i)}(e._query,t),new _m(e.firestore,e.converter,Vc(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function lg(e,t,n){if("string"==typeof(n=C(n))){if(""===n)throw new Ll(Ol.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Fc(t)&&-1!==n.indexOf("/"))throw new Ll(Ol.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Jl.fromString(n));if(!tu.isDocumentKey(r))throw new Ll(Ol.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Wu(e,new tu(r))}if(n instanceof Sm)return Wu(e,n._key);throw new Ll(Ol.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ym(n)}.`)}function ug(e,t){if(!Array.isArray(e)||0===e.length)throw new Ll(Ol.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function cg(e,t){if(t.isInequality()){const n=Mc(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new Ll(Ol.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${r.toString()}'`);const i=Lc(e);null!==i&&hg(e,r,i)}const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Ll(Ol.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Ll(Ol.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}function hg(e,t,n){if(!n.isEqual(t))throw new Ll(Ol.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class dg{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Vu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Du(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Pu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Rl()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return wu(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertGeoPoint(e){return new Lm(Du(e.latitude),Du(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Lu(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Mu(e));default:return null}}convertTimestamp(e){const t=Ru(e);return new Ql(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Jl.fromString(e);Dl(zd(n));const r=new ju(n.get(1),n.get(3)),i=new tu(n.popFirst(5));return r.isEqual(t)||Cl(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function fg(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class pg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class mg extends Zm{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new gg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(tg("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class gg extends mg{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class yg{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new pg(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new gg(this._firestore,this._userDataWriter,n.key,n,new pg(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ll(Ol.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new gg(e._firestore,e._userDataWriter,n.doc.key,n.doc,new pg(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new gg(e._firestore,e._userDataWriter,t.doc.key,t.doc,new pg(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:vg(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function vg(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Rl()}}class bg extends dg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dm(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Sm(this.firestore,null,t)}}function wg(e,t,n){e=vm(e,Sm);const r=vm(e.firestore,Nm),i=fg(e.converter,t,n);return _g(r,[Bm(zm(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Th.none())])}function Eg(e,t){const n=vm(e.firestore,Nm),r=Im(e),i=fg(e.converter,t);return _g(n,[Bm(zm(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Th.exists(!1))]).then(()=>r)}function Sg(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,o;e=C(e);let a={includeMetadataChanges:!1},l=0;"object"!=typeof n[l]||Cm(n[l])||(a=n[l],l++);const u={includeMetadataChanges:a.includeMetadataChanges};if(Cm(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[l+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let c,h,d;if(e instanceof Sm)h=vm(e.firestore,Nm),d=Pc(e._key.path),c={next:t=>{n[l]&&n[l](kg(h,e,t))},error:n[l+1],complete:n[l+2]};else{const t=vm(e,_m);h=vm(t.firestore,Nm),d=t._query;const r=new bg(h);c={next:e=>{n[l]&&n[l](new yg(h,r,t,e))},error:n[l+1],complete:n[l+2]},ng(e._query)}return function(e,t,n,r){const i=new rm(r),s=new Cp(t,i,n);return e.asyncQueue.enqueueAndForget(async()=>_p(await hm(e),s)),()=>{i.Dc(),e.asyncQueue.enqueueAndForget(async()=>kp(await hm(e),s))}}(Am(h),d,u,c)}function _g(e,t){return function(e,t){const n=new Ml;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=em(e);try{const e=await function(e,t){const n=Pl(e),r=Ql.now(),i=t.reduce((e,t)=>e.add(t.key),oh());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let a=Xc(),l=oh();return n.Zi.getEntries(e,i).next(e=>{a=e,a.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,a)).next(i=>{s=i;const o=[];for(const e of t){const t=Rh(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Oh(e.key,t,nc(t.value.mapValue),Th.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)}).next(t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:o.batchId,changes:eh(s)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Tc[e.currentUser.toKey()];r||(r=new Su(Wl)),r=r.insert(t,n),e.Tc[e.currentUser.toKey()]=r}(r,e.batchId,n),await Yp(r,e.changes),await rp(r.remoteStore)}catch(e){const t=yp(e,"Failed to persist write");n.reject(t)}}(await cm(e),t,n)),n.promise}(Am(e),t)}function kg(e,t,n){const r=n.docs.get(t._key),i=new bg(e);return new mg(e,i,t._key,r,new pg(n.hasPendingWrites,n.fromCache),t.converter)}!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){kl=e}(Ue),Le(new N("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new Nm(new Vl(e.getProvider("auth-internal")),new ql(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Ll(Ol.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ju(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),Be(Sl,"3.13.0",e),Be(Sl,"3.13.0","esm2017")}();const Tg=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},Ig=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim()},xg=e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var Cg={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Ng=(0,r.forwardRef)((e,t)=>{let{color:n="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:a="",children:l,iconNode:u,...c}=e;return(0,r.createElement)("svg",{ref:t,...Cg,width:i,height:i,stroke:n,strokeWidth:o?24*Number(s)/Number(i):s,className:Ig("lucide",a),...!l&&!xg(c)&&{"aria-hidden":"true"},...c},[...u.map(e=>{let[t,n]=e;return(0,r.createElement)(t,n)}),...Array.isArray(l)?l:[l]])}),Ag=(e,t)=>{const n=(0,r.forwardRef)((n,i)=>{let{className:s,...o}=n;return(0,r.createElement)(Ng,{ref:i,iconNode:t,className:Ig(`lucide-${a=Tg(e),a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,s),...o});var a});return n.displayName=Tg(e),n},Rg=Ag("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),Dg=Ag("flask-conical",[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]]),Pg=Ag("glass-water",[["path",{d:"M5.116 4.104A1 1 0 0 1 6.11 3h11.78a1 1 0 0 1 .994 1.105L17.19 20.21A2 2 0 0 1 15.2 22H8.8a2 2 0 0 1-2-1.79z",key:"p55z4y"}],["path",{d:"M6 12a5 5 0 0 1 6 0 5 5 0 0 0 6 0",key:"mjntcy"}]]),Og=Ag("list",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]),Lg=Ag("archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]),Mg=Ag("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),Fg=Ag("mic-off",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),jg=Ag("mic",[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]]),Ug=Ag("file-down",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]),Vg=Ag("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),zg=Ag("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Bg=Ag("notebook-pen",[["path",{d:"M13.4 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7.4",key:"re6nr2"}],["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["path",{d:"M21.378 5.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"pqwjuv"}]]),$g=Ag("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),qg=Ag("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var Hg=n(579);const Kg="bg-[#E0D8D0] rounded-2xl shadow-xl p-6 mb-8 w-full max-w-4xl",Wg="bg-[#C8C2BA] text-[#4E3629] p-3 rounded-xl w-full focus:outline-none focus:ring-2 focus:ring-[#8A2A2B] placeholder-[#4E3629]",Gg="bg-[#4E3629] hover:bg-[#8A2A2B] text-[#F4EFEA] font-bold py-3 px-6 rounded-xl shadow-lg transition-all duration-200 ease-in-out transform hover:scale-105",Qg="p-4 flex-1 text-center rounded-xl transition-all duration-200",Yg="bg-[#8A2A2B] text-[#F4EFEA] shadow-lg",Xg="bg-[#E0D8D0] text-[#4E3629] hover:bg-[#C8C2BA]",Jg="\n  bg-[#4E3629] hover:bg-[#8A2A2B] text-[#F4EFEA] font-bold p-3 rounded-full shadow-lg\n  transition-all duration-200 ease-in-out transform hover:scale-110 flex items-center justify-center\n",Zg="animate-spin text-[#F4EFEA]",ey="bg-[#C8C2BA] text-left text-[#4E3629] font-semibold",ty="py-3 px-4 text-sm",ny="px-4 py-2 mx-1 rounded-full bg-[#C8C2BA] hover:bg-[#8A2A2B] hover:text-[#F4EFEA] text-[#4E3629]",ry={apiKey:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_API_KEY||"YOUR_API_KEY",authDomain:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_AUTH_DOMAIN||"YOUR_AUTH_DOMAIN",projectId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_PROJECT_ID||"YOUR_PROJECT_ID",storageBucket:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_STORAGE_BUCKET||"YOUR_STORAGE_BUCKET",messagingSenderId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_MESSAGING_SENDER_ID||"YOUR_MESSAGING_SENDER_ID",appId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_APP_ID||"YOUR_APP_ID"},iy=Ve(ry),sy=function(e,t){const n="string"==typeof e?e:t||"(default)",r=Me("object"==typeof e?e:ze(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=(e=>{const t=d(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})("firestore");e&&Em(r,...e)}return r}(iy),oy=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ze();const t=Me(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Me(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(E(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;st(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Gr,persistence:[ar,qn,Kn]}),r=p("authTokenSyncURL");if(r){const e=(i=r,async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Jr)return;const r=null===t||void 0===t?void 0:t.token;Zr!==r&&(Zr=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,n){C(e).beforeAuthStateChanged(t,n)}(n,e,()=>e(n.currentUser)),function(e,t,n,r){C(e).onIdTokenChanged(t,n,r)}(n,t=>e(t))}var i;const s=d("auth");return s&&pn(n,`http://${s}`),n}(iy),ay=async()=>{try{await async function(e){var t;const n=dn(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new On({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await Pn(n,{returnSecureToken:!0}),i=await On._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}(oy)}catch(e){console.error("Firebase Auth Error:",e)}};function ly(){const[e,t]=(0,r.useState)(null),[n,i]=(0,r.useState)(!1),[s,o]=(0,r.useState)("dashboard"),[a,l]=(0,r.useState)([]),[u,c]=(0,r.useState)([]),[h,d]=(0,r.useState)([]),[f,p]=(0,r.useState)([]),[m,g]=(0,r.useState)([]),[y,v]=(0,r.useState)(!1),[b,w]=(0,r.useState)(""),E=ry.projectId,[S,_]=(0,r.useState)(1),[k,T]=(0,r.useState)(!1),[I,x]=(0,r.useState)(!1),[N,A]=(0,r.useState)(!1),[R,D]=(0,r.useState)(!1),[P,O]=(0,r.useState)({date:(new Date).toISOString().slice(0,16),recipeName:"",finalProduct:"",ethanolAmount:"",waterIntoStill:"",abvOfCharge:"",headsCollectionStart:"",heartsCollectionStart:"",heartsCollectionStop:"",tailsDuration:"",distillateAmount:"",distillateABV:"",powerLevel:"",distillationStart:"",notes:"",lowerPlateOn:!1,upperPlateOn:!1,dephlegmatorOn:!1}),[L,M]=(0,r.useState)({date:(new Date).toISOString().slice(0,10),bottlingStartTime:"",product:"",bottledAmount:"",boxesUsed:"",lotNumber:"",notes:"",bottlingMaterialDefinition:""}),[F,j]=(0,r.useState)([]),[U,V]=(0,r.useState)({name:"",materials:[{name:"",quantity:""}]}),[z,B]=(0,r.useState)({name:"",type:"ingredient",quantity:"",unit:"",lowStockThreshold:"",leadTimeDays:""}),[$,q]=(0,r.useState)({name:"",product:"",ingredients:[{name:"",quantity:"",unit:""}]});(0,r.useEffect)(()=>{ay();const e=function(e,t,n,r){return C(e).onAuthStateChanged(t,n,r)}(oy,e=>{t(e),i(!0)});return()=>e()},[]),(0,r.useEffect)(()=>{if(e&&n){console.log("Setting up Firestore listeners for user:",e.uid);const t=e.uid,n=Sg(sg(Tm(sy,`artifacts/${E}/users/${t}/inventory`)),e=>{const t=e.docs.map(e=>({id:e.id,...e.data()}));c(t)}),r=Sg(sg(Tm(sy,`artifacts/${E}/users/${t}/recipes`)),e=>{const t=e.docs.map(e=>({id:e.id,...e.data()}));l(t)}),i=Sg(sg(Tm(sy,`artifacts/${E}/users/${t}/bottlingMaterialDefinitions`)),e=>{const t=e.docs.map(e=>({id:e.id,...e.data()}));j(t)}),s=Sg(sg(Tm(sy,`artifacts/${E}/users/${t}/distillationLogs`)),e=>{const t=e.docs.map(e=>({...e.data(),id:e.id,type:"distillation"}));d(t)}),o=Sg(sg(Tm(sy,`artifacts/${E}/users/${t}/bottlingLogs`)),e=>{const t=e.docs.map(e=>({...e.data(),id:e.id,type:"bottling"}));p(t)});return()=>{console.log("Tearing down Firestore listeners for user:",e.uid),n(),r(),i(),s(),o()}}},[e,n,E]),(0,r.useEffect)(()=>{const e=[...h,...f];e.sort((e,t)=>new Date(t.date)-new Date(e.date)),g(e)},[h,f]);const H=e=>{w(e),v(!0)},K=async e=>{x(!0);let t=[];const n=`\n      You are a helpful assistant for a distillery log app. Parse the following dictation and extract the relevant information into a JSON object.\n      The fields to extract are:\n      - distillationStart (string, format HH:MM)\n      - headsCollectionStart (string, format HH:MM)\n      - heartsCollectionStart (string, format HH:MM)\n      - heartsCollectionStop (string, format HH:MM)\n      - powerLevel (string, one of '1', '1.5', '2', '2.5', '3', '3.5')\n      - ethanolAmount (number)\n      - waterIntoStill (number)\n      - abvOfCharge (number)\n      - tailsDuration (number)\n      - distillateAmount (number)\n      - distillateABV (number)\n      - notes (string)\n      - lowerPlateOn (boolean)\n      - upperPlateOn (boolean)\n      - dephlegmatorOn (boolean)\n      \n      Interpret phrases like "lower plate is on", "upper plate active", "dephlegmator off", "turn on the lower plate" to set the boolean values.\n      If a field is not mentioned, it should be set to null.\n      Here is the user's dictation:\n      "${e}"\n    `;t.push({role:"user",parts:[{text:n}]});const r={contents:t,generationConfig:{responseMimeType:"application/json",responseSchema:{type:"OBJECT",properties:{distillationStart:{type:"STRING"},headsCollectionStart:{type:"STRING"},heartsCollectionStart:{type:"STRING"},heartsCollectionStop:{type:"STRING"},powerLevel:{type:"STRING"},ethanolAmount:{type:"NUMBER"},waterIntoStill:{type:"NUMBER"},abvOfCharge:{type:"NUMBER"},tailsDuration:{type:"NUMBER"},distillateAmount:{type:"NUMBER"},distillateABV:{type:"NUMBER"},notes:{type:"STRING"},lowerPlateOn:{type:"BOOLEAN"},upperPlateOn:{type:"BOOLEAN"},dephlegmatorOn:{type:"BOOLEAN"}}}}};let i=null,s=0;let o=1e3;for(;s<3;){try{var a,l,u,c,h;const e=await fetch("https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),t=await e.json(),n=null===t||void 0===t||null===(a=t.candidates)||void 0===a||null===(l=a[0])||void 0===l||null===(u=l.content)||void 0===u||null===(c=u.parts)||void 0===c||null===(h=c[0])||void 0===h?void 0:h.text;if(n){i=JSON.parse(n);break}}catch(d){console.error("Error fetching from API, retrying...",d)}s++,await new Promise(e=>setTimeout(e,o)),o*=2}x(!1),i?(O(e=>{const t={...e};for(const n in i)null!==i[n]&&void 0!==i[n]&&(t[n]=i[n]);return t}),H("Form fields updated successfully from your dictation!")):H("Could not understand the dictation. Please try again or fill the form manually.")},W=async e=>{D(!0);let t=[];const n=`\n      You are a helpful assistant for a distillery log app. Parse the following dictation and extract the relevant information into a JSON object.\n      The fields to extract are:\n      - bottlingStartTime (string, format HH:MM)\n      - product (string, e.g. "Grapefruit base")\n      - bottledAmount (number)\n      - boxesUsed (number)\n      - lotNumber (string)\n      - notes (string)\n      \n      If a field is not mentioned, it should be set to null.\n      If "bottled amount" is mentioned, calculate "boxesUsed" as "bottledAmount" / 6.\n      Here is the user's dictation:\n      "${e}"\n    `;t.push({role:"user",parts:[{text:n}]});const r={contents:t,generationConfig:{responseMimeType:"application/json",responseSchema:{type:"OBJECT",properties:{bottlingStartTime:{type:"STRING"},product:{type:"STRING"},bottledAmount:{type:"NUMBER"},boxesUsed:{type:"NUMBER"},lotNumber:{type:"STRING"},notes:{type:"STRING"}}}}};let i=null,s=0;let o=1e3;for(;s<3;){try{var a,l,u,c,h;const e=await fetch("https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),t=await e.json(),n=null===t||void 0===t||null===(a=t.candidates)||void 0===a||null===(l=a[0])||void 0===l||null===(u=l.content)||void 0===u||null===(c=u.parts)||void 0===c||null===(h=c[0])||void 0===h?void 0:h.text;if(n){i=JSON.parse(n);break}}catch(d){console.error("Error fetching from API, retrying...",d)}s++,await new Promise(e=>setTimeout(e,o)),o*=2}D(!1),i?(M(e=>{const t={...e};for(const n in i)null!==i[n]&&void 0!==i[n]&&(t[n]=i[n]);return t}),H("Bottling log fields updated successfully from your dictation!")):H("Could not understand the dictation. Please try again or fill the form manually.")};return(0,Hg.jsxs)("div",{className:"\n  bg-[#F4EFEA] text-[#4E3629] min-h-screen p-8 font-sans transition-all duration-300\n  flex flex-col items-center\n",children:[(0,Hg.jsx)("header",{className:"w-full max-w-4xl mb-8",children:(0,Hg.jsxs)("nav",{className:"flex bg-[#E0D8D0] rounded-2xl p-2 shadow-xl",children:[(0,Hg.jsxs)("button",{onClick:()=>o("dashboard"),className:`${Qg} ${"dashboard"===s?Yg:Xg}`,children:[(0,Hg.jsx)(Rg,{size:20,className:"inline mr-2 "+("dashboard"===s?"text-[#F4EFEA]":"text-[#8A2A2B]")}),"Dashboard"]}),(0,Hg.jsxs)("button",{onClick:()=>o("distillation"),className:`${Qg} ${"distillation"===s?Yg:Xg}`,children:[(0,Hg.jsx)(Dg,{size:20,className:"inline mr-2 "+("distillation"===s?"text-[#F4EFEA]":"text-[#8A2A2B]")}),"Distillation"]}),(0,Hg.jsxs)("button",{onClick:()=>o("bottling"),className:`${Qg} ${"bottling"===s?Yg:Xg}`,children:[(0,Hg.jsx)(Pg,{size:20,className:"inline mr-2 "+("bottling"===s?"text-[#F4EFEA]":"text-[#8A2A2B]")}),"Bottling"]}),(0,Hg.jsxs)("button",{onClick:()=>o("logs"),className:`${Qg} ${"logs"===s?Yg:Xg}`,children:[(0,Hg.jsx)(Og,{size:20,className:"inline mr-2 "+("logs"===s?"text-[#F4EFEA]":"text-[#8A2A2B]")}),"Logs"]}),(0,Hg.jsxs)("button",{onClick:()=>o("inventory"),className:`${Qg} ${"inventory"===s?Yg:Xg}`,children:[(0,Hg.jsx)(Lg,{size:20,className:"inline mr-2 "+("inventory"===s?"text-[#F4EFEA]":"text-[#8A2A2B]")}),"Inventory"]})]})}),(0,Hg.jsx)("main",{className:"w-full max-w-4xl",children:n?(0,Hg.jsxs)(Hg.Fragment,{children:["dashboard"===s&&(0,Hg.jsxs)(Hg.Fragment,{children:[(0,Hg.jsxs)("div",{className:`${Kg} text-center`,children:[(0,Hg.jsx)("h1",{className:"text-4xl font-extrabold mb-4 text-[#8A2A2B]",children:"Distillery Dashboard"}),(0,Hg.jsx)("p",{className:"text-lg text-[#4E3629] mb-6",children:"Track your production logs and inventory in real-time."}),(0,Hg.jsxs)("div",{className:"flex justify-center items-center",children:[(0,Hg.jsxs)("div",{className:"p-4 bg-[#8A2A2B] rounded-xl m-2 shadow-lg",children:[(0,Hg.jsx)("p",{className:"text-xl font-semibold text-[#F4EFEA]",children:h.length}),(0,Hg.jsx)("p",{className:"text-sm text-[#F4EFEA]",children:"Distillation Logs"})]}),(0,Hg.jsxs)("div",{className:"p-4 bg-[#8A2A2B] rounded-xl m-2 shadow-lg",children:[(0,Hg.jsx)("p",{className:"text-xl font-semibold text-[#F4EFEA]",children:f.length}),(0,Hg.jsx)("p",{className:"text-sm text-[#F4EFEA]",children:"Bottling Logs"})]}),(0,Hg.jsxs)("div",{className:"p-4 bg-[#8A2A2B] rounded-xl m-2 shadow-lg",children:[(0,Hg.jsx)("p",{className:"text-xl font-semibold text-[#F4EFEA]",children:u.length}),(0,Hg.jsx)("p",{className:"text-sm text-[#F4EFEA]",children:"Inventory Items"})]})]})]}),(0,Hg.jsxs)("div",{className:Kg,children:[(0,Hg.jsxs)("h2",{className:"text-2xl font-bold mb-4 flex items-center",children:[(0,Hg.jsx)(Lg,{size:24,className:"mr-2 text-[#8A2A2B]"})," Inventory Overview"]}),u.filter(e=>e.quantity<=e.lowStockThreshold).length>0?(0,Hg.jsxs)(Hg.Fragment,{children:[(0,Hg.jsxs)("div",{className:"bg-red-700 text-white p-4 rounded-xl mb-4",children:[(0,Hg.jsx)("p",{className:"font-bold",children:"Urgent: Low Stock!"}),(0,Hg.jsx)("p",{children:"The following items are running low. Re-order to avoid production halts."})]}),u.filter(e=>e.quantity<=e.lowStockThreshold).map(e=>(0,Hg.jsxs)("div",{className:"flex justify-between items-center bg-[#C8C2BA] p-3 rounded-xl mb-2",children:[(0,Hg.jsx)("span",{className:"font-bold",children:e.name}),(0,Hg.jsxs)("span",{children:[(0,Hg.jsx)("span",{className:"text-red-400 font-semibold",children:e.quantity})," / ",e.lowStockThreshold," ",e.unit]})]},e.id))]}):(0,Hg.jsx)("div",{className:"bg-green-700 text-white p-4 rounded-xl text-center",children:"All inventory levels are looking good!"})]})]}),"distillation"===s&&(0,Hg.jsxs)("div",{className:Kg,children:[(0,Hg.jsxs)("h2",{className:"text-2xl font-bold mb-6 flex items-center justify-between text-[#8A2A2B]",children:[(0,Hg.jsxs)("span",{className:"flex items-center",children:[(0,Hg.jsx)(Dg,{size:24,className:"mr-2 text-[#8A2A2B]"})," New Distillation Log"]}),(0,Hg.jsx)("button",{type:"button",onClick:()=>{if(!("webkitSpeechRecognition"in window))return void H("Speech recognition is not supported in this browser. Please use Chrome.");const e=new window.webkitSpeechRecognition;e.continuous=!1,e.lang="en-US",e.interimResults=!1,e.maxAlternatives=1,e.onstart=()=>{T(!0),H("Listening for your command...")},e.onresult=e=>{const t=e.results[0][0].transcript;H("Transcribed text: "+t),K(t)},e.onerror=e=>{T(!1),console.error("Speech recognition error:",e.error),H("Error with speech recognition. Please try again.")},e.onend=()=>{T(!1)},e.start()},className:`${Jg} ${k?"bg-red-600":"bg-[#4E3629]"}`,disabled:I,children:I?(0,Hg.jsx)(Mg,{size:24,className:Zg}):k?(0,Hg.jsx)(Fg,{size:24}):(0,Hg.jsx)(jg,{size:24})})]}),(0,Hg.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),e)try{const t=e.uid;await Eg(Tm(sy,`artifacts/${E}/users/${t}/distillationLogs`),{...P,timestamp:new Date}),H("Distillation log submitted successfully!");const n=a.find(e=>e.name===P.recipeName);if(n)for(const e of n.ingredients){const n=u.find(t=>t.name===e.name);if(n){const r=(n.quantity||0)-(e.quantity||0);await wg(Im(sy,`artifacts/${E}/users/${t}/inventory`,n.id),{...n,quantity:r>0?r:0})}}O({date:(new Date).toISOString().slice(0,16),recipeName:"",finalProduct:"",ethanolAmount:"",waterIntoStill:"",abvOfCharge:"",headsCollectionStart:"",heartsCollectionStart:"",heartsCollectionStop:"",tailsDuration:"",distillateAmount:"",distillateABV:"",powerLevel:"",distillationStart:"",notes:"",lowerPlateOn:!1,upperPlateOn:!1,dephlegmatorOn:!1})}catch(t){console.error("Error adding distillation log or updating inventory: ",t),H("Error submitting distillation log. Please try again.")}},className:"space-y-4",children:[(0,Hg.jsxs)("div",{children:[(0,Hg.jsx)("label",{className:"block text-[#4E3629] mb-2",children:"Time of Distillation"}),(0,Hg.jsx)("input",{type:"datetime-local",value:P.date,onChange:e=>O({...P,date:e.target.value}),required:!0,className:Wg})]}),(0,Hg.jsxs)("div",{children:[(0,Hg.jsx)("label",{className:"block text-[#4E3629] mb-2",children:"Recipe Used"}),(0,Hg.jsxs)("select",{value:P.recipeName,onChange:e=>O({...P,recipeName:e.target.value}),required:!0,className:Wg,children:[(0,Hg.jsx)("option",{value:"",children:"Select a Recipe"}),a.map(e=>(0,Hg.jsx)("option",{value:e.name,children:e.name},e.id))]})]}),(0,Hg.jsxs)("div",{children:[(0,Hg.jsx)("label",{className:"block text-[#4E3629] mb-2",children:"Distillation Start (HH:MM)"}),(0,Hg.jsx)("input",{type:"time",value:P.distillationStart,onChange:e=>O({...P,distillationStart:e.target.value}),required:!0,className:`${Wg} text-[#4E3629]`})]}),(0,Hg.jsxs)("div",{children:[(0,Hg.jsx)("label",{className:"block text-[#4E3629] mb-2",children:"Power Level"}),(0,Hg.jsxs)("select",{value:P.powerLevel,onChange:e=>O({...P,powerLevel:e.target.value}),required:!0,className:Wg,children:[(0,Hg.jsx)("option",{value:"",children:"Select Power Level"}),(0,Hg.jsx)("option",{value:"1",children:"1"}),(0,Hg.jsx)("option",{value:"1.5",children:"1.5"}),(0,Hg.jsx)("option",{value:"2",children:"2"}),(0,Hg.jsx)("option",{value:"2.5",children:"2.5"}),(0,Hg.jsx)("option",{value:"3",children:"3"}),(0,Hg.jsx)("option",{value:"3.5",children:"3.5"})]})]}),(0,Hg.jsxs)("div",{className:"space-y-2",children:[(0,Hg.jsx)("label",{className:"block text-[#4E3629]",children:"Plate & Dephlegmator Controls"}),(0,Hg.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Hg.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Hg.jsx)("span",{className:"text-[#4E3629]",children:"Lower Plate On/Off"}),(0,Hg.jsx)("button",{type:"button",onClick:()=>O({...P,lowerPlateOn:!P.lowerPlateOn}),className:"relative inline-flex flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-[#E0D8D0] focus:ring-[#8A2A2B] "+(P.lowerPlateOn?"bg-[#8A2A2B]":"bg-[#C8C2BA]"),children:(0,Hg.jsx)("span",{className:"pointer-events-none inline-block h-5 w-5 rounded-full bg-[#F4EFEA] shadow transform ring-0 transition ease-in-out duration-200 "+(P.lowerPlateOn?"translate-x-5":"translate-x-0")})})]}),(0,Hg.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Hg.jsx)("span",{className:"text-[#4E3629]",children:"Upper Plate On/Off"}),(0,Hg.jsx)("button",{type:"button",onClick:()=>O({...P,upperPlateOn:!P.upperPlateOn}),className:"relative inline-flex flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-[#E0D8D0] focus:ring-[#8A2A2B] "+(P.upperPlateOn?"bg-[#8A2A2B]":"bg-[#C8C2BA]"),children:(0,Hg.jsx)("span",{className:"pointer-events-none inline-block h-5 w-5 rounded-full bg-[#F4EFEA] shadow transform ring-0 transition ease-in-out duration-200 "+(P.upperPlateOn?"translate-x-5":"translate-x-0")})})]}),(0,Hg.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Hg.jsx)("span",{className:"text-[#4E3629]",children:"Dephlegmator On/Off"}),(0,Hg.jsx)("button",{type:"button",onClick:()=>O({...P,dephlegmatorOn:!P.dephlegmatorOn}),className:"relative inline-flex flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-[#E0D8D0] focus:ring-[#8A2A2B] "+(P.dephlegmatorOn?"bg-[#8A2A2B]":"bg-[#C8C2BA]"),children:(0,Hg.jsx)("span",{className:"pointer-events-none inline-block h-5 w-5 rounded-full bg-[#F4EFEA] shadow transform ring-0 transition ease-in-out duration-200 "+(P.dephlegmatorOn?"translate-x-5":"translate-x-0")})})]})]})]}),(0,Hg.jsxs)("div",{children:[(0,Hg.jsx)("label",{className:"block text-[#4E3629] mb-2",children:"Ethanol Into Still (L)"}),(0,Hg.jsx)("input",{type:"number",step:"0.01",value:P.ethanolAmount,onChange:e=>O({...P,ethanolAmount:e.target.value}),required:!0,className:Wg})]}),(0,Hg.jsxs)("div",{children:[(0,Hg.jsx)("label",{className:"block text-[#4E3629] mb-2",children:"Water Into Still (L)"}),(0,Hg.jsx)("input",{type:"number",step:"0.01",value:P.waterIntoStill,onChange:e=>O({...P,waterIntoStill:e.target.value}),required:!0,className:Wg})]}),(0,Hg.jsxs)("div",{children:[(0,Hg.jsx)("label",{className:"block text-[#4E3629] mb-2",children:"ABV of Charge (%)"}),(0,Hg.jsx)("input",{type:"number",step:"0.01",value:P.abvOfCharge,onChange:e=>O({...P,abvOfCharge:e.target.value}),required:!0,className:Wg})]}),(0,Hg.jsxs)("div",{children:[(0,Hg.jsx)("label",{className:"block text-[#4E3629] mb-2",children:"Heads Collection Start (HH:MM)"}),(0,Hg.jsx)("input",{type:"time",value:P.headsCollectionStart,onChange:e=>O({...P,headsCollectionStart:e.target.value}),required:!0,className:`${Wg} text-[#4E3629]`})]}),(0,Hg.jsxs)("div",{children:[(0,Hg.jsx)("label",{className:"block text-[#4E3629] mb-2",children:"Hearts Collection Start (HH:MM)"}),(0,Hg.jsx)("input",{type:"time",value:P.heartsCollectionStart,onChange:e=>O({...P,heartsCollectionStart:e.target.value}),required:!0,className:`${Wg} text-[#4E3629]`})]}),(0,Hg.jsxs)("div",{children:[(0,Hg.jsx)("label",{className:"block text-[#4E3629] mb-2",children:"Hearts Collection Stop (HH:MM)"}),(0,Hg.jsx)("input",{type:"time",value:P.heartsCollectionStop,onChange:e=>O({...P,heartsCollectionStop:e.target.value}),required:!0,className:`${Wg} text-[#4E3629]`})]}),(0,Hg.jsxs)("div",{children:[(0,Hg.jsx)("label",{className:"block text-[#4E3629] mb-2",children:"Tails Collection Duration (minutes)"}),(0,Hg.jsx)("input",{type:"number",value:P.tailsDuration,onChange:e=>O({...P,tailsDuration:e.target.value}),required:!0,className:Wg})]}),(0,Hg.jsxs)("div",{children:[(0,Hg.jsx)("label",{className:"block text-[#4E3629] mb-2",children:"Distillate Collected (L)"}),(0,Hg.jsx)("input",{type:"number",step:"0.01",value:P.distillateAmount,onChange:e=>O({...P,distillateAmount:e.target.value}),required:!0,className:Wg})]}),(0,Hg.jsxs)("div",{children:[(0,Hg.jsx)("label",{className:"block text-[#4E3629] mb-2",children:"Distillate ABV (%)"}),(0,Hg.jsx)("input",{type:"number",step:"0.01",value:P.distillateABV,onChange:e=>O({...P,distillateABV:e.target.value}),required:!0,className:Wg})]}),(0,Hg.jsxs)("div",{children:[(0,Hg.jsx)("label",{className:"block text-[#4E3629] mb-2",children:"Notes"}),(0,Hg.jsx)("textarea",{value:P.notes,onChange:e=>O({...P,notes:e.target.value}),className:`${Wg} h-32 resize-y`})]}),(0,Hg.jsx)("button",{type:"submit",className:Gg,children:"Submit Distillation Log"})]})]}),"logs"===s&&(0,Hg.jsxs)("div",{className:Kg,children:[(0,Hg.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Hg.jsxs)("h2",{className:"text-2xl font-bold flex items-center text-[#8A2A2B]",children:[(0,Hg.jsx)(Og,{size:24,className:"mr-2 text-[#8A2A2B]"})," Production Log History"]}),(0,Hg.jsxs)("button",{onClick:()=>{const e=document.getElementById("logs-table");e?(window.html2pdf(e,{margin:1,filename:"production_logs.pdf",image:{type:"jpeg",quality:.98},html2canvas:{scale:2},jsPDF:{unit:"in",format:"letter",orientation:"landscape"}}),H("Generating PDF...")):H("Log table not found. Please navigate to the Logs tab first.")},className:`${Gg} flex items-center`,children:[(0,Hg.jsx)(Ug,{size:20,className:"mr-2 text-[#F4EFEA]"})," Export to PDF"]})]}),(0,Hg.jsxs)("div",{className:"overflow-x-auto",id:"logs-table",children:[(0,Hg.jsx)("h1",{className:"text-2xl font-extrabold mb-4 text-[#8A2A2B]",children:"Production Log History"}),(0,Hg.jsxs)("table",{className:"min-w-full bg-[#E0D8D0] rounded-xl overflow-hidden",children:[(0,Hg.jsx)("thead",{className:ey,children:(0,Hg.jsxs)("tr",{className:"bg-[#C8C2BA] text-left text-[#4E3629]",children:[(0,Hg.jsx)("th",{className:`${ty} whitespace-nowrap`,children:"Type"}),(0,Hg.jsx)("th",{className:`${ty} whitespace-nowrap`,children:"Date"}),(0,Hg.jsx)("th",{className:`${ty} whitespace-nowrap`,children:"Start Time"}),(0,Hg.jsx)("th",{className:`${ty} whitespace-nowrap`,children:"Product / Recipe"}),(0,Hg.jsx)("th",{className:`${ty} whitespace-nowrap`,children:"Amount"}),(0,Hg.jsx)("th",{className:`${ty} whitespace-nowrap`,children:"ABV / Lot No."}),(0,Hg.jsx)("th",{className:`${ty} whitespace-nowrap`,children:"Lower Plate"}),(0,Hg.jsx)("th",{className:`${ty} whitespace-nowrap`,children:"Upper Plate"}),(0,Hg.jsx)("th",{className:`${ty} whitespace-nowrap`,children:"Dephlegmator"}),(0,Hg.jsx)("th",{className:`${ty} whitespace-nowrap`,children:"Notes"})]})}),(0,Hg.jsx)("tbody",{children:(()=>{Math.ceil(m.length/10);const e=10*(S-1),t=e+10;return m.slice(e,t).map(e=>(0,Hg.jsxs)("tr",{className:"border-t border-[#B5AE9F] hover:bg-[#C8C2BA] transition-colors",children:[(0,Hg.jsx)("td",{className:ty,children:(0,Hg.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-semibold "+(e.type,"bg-[#8A2A2B] text-[#F4EFEA]"),children:e.type.charAt(0).toUpperCase()+e.type.slice(1)})}),(0,Hg.jsx)("td",{className:ty,children:new Date(e.date).toLocaleDateString()}),(0,Hg.jsx)("td",{className:ty,children:"distillation"===e.type?e.distillationStart:e.bottlingStartTime}),(0,Hg.jsx)("td",{className:ty,children:"distillation"===e.type?e.recipeName:e.product}),(0,Hg.jsx)("td",{className:ty,children:"distillation"===e.type?`${e.distillateAmount} L`:`${e.bottledAmount} units`}),(0,Hg.jsx)("td",{className:ty,children:"distillation"===e.type?`${e.distillateABV}%`:e.lotNumber}),(0,Hg.jsx)("td",{className:ty,children:"distillation"===e.type?e.lowerPlateOn?"On":"Off":"-"}),(0,Hg.jsx)("td",{className:ty,children:"distillation"===e.type?e.upperPlateOn?"On":"Off":"-"}),(0,Hg.jsx)("td",{className:ty,children:"distillation"===e.type?e.dephlegmatorOn?"On":"Off":"-"}),(0,Hg.jsx)("td",{className:ty,children:e.notes})]},e.id))})()})]})]}),(()=>{const e=Math.ceil(m.length/10),t=[];for(let n=1;n<=e;n++)t.push((0,Hg.jsx)("button",{onClick:()=>_(n),className:`${ny} ${S===n?"bg-[#8A2A2B] text-[#F4EFEA]":""}`,children:n},n));return(0,Hg.jsxs)("div",{className:"flex justify-center items-center mt-4",children:[(0,Hg.jsx)("button",{onClick:()=>_(S-1),disabled:1===S,className:`${ny} ${1===S?"opacity-50 cursor-not-allowed":""}`,children:(0,Hg.jsx)(Vg,{size:16})}),t,(0,Hg.jsx)("button",{onClick:()=>_(S+1),disabled:S===e,className:`${ny} ${S===e?"opacity-50 cursor-not-allowed":""}`,children:(0,Hg.jsx)(zg,{size:16})})]})})()]}),"bottling"===s&&(0,Hg.jsxs)("div",{className:Kg,children:[(0,Hg.jsxs)("h2",{className:"text-2xl font-bold mb-6 flex items-center justify-between text-[#8A2A2B]",children:[(0,Hg.jsxs)("span",{className:"flex items-center",children:[(0,Hg.jsx)(Pg,{size:24,className:"mr-2 text-[#8A2A2B]"})," New Bottling Log"]}),(0,Hg.jsx)("button",{type:"button",onClick:()=>{if(!("webkitSpeechRecognition"in window))return void H("Speech recognition is not supported in this browser. Please use Chrome.");const e=new window.webkitSpeechRecognition;e.continuous=!1,e.lang="en-US",e.interimResults=!1,e.maxAlternatives=1,e.onstart=()=>{A(!0),H("Listening for your bottling log...")},e.onresult=e=>{const t=e.results[0][0].transcript;H("Transcribed text: "+t),W(t)},e.onerror=e=>{A(!1),console.error("Speech recognition error:",e.error),H("Error with speech recognition. Please try again.")},e.onend=()=>{A(!1)},e.start()},className:`${Jg} ${N?"bg-red-600":"bg-[#4E3629]"}`,disabled:R,children:R?(0,Hg.jsx)(Mg,{size:24,className:Zg}):N?(0,Hg.jsx)(Fg,{size:24}):(0,Hg.jsx)(jg,{size:24})})]}),(0,Hg.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),e)try{const t=e.uid,n={...L,bottledAmount:L.bottledAmount,boxesUsed:Math.floor((L.bottledAmount||0)/6),timestamp:new Date};await Eg(Tm(sy,`artifacts/${E}/users/${t}/bottlingLogs`),n),H("Bottling log submitted successfully!");const r=F.find(e=>e.name===n.product);if(r)for(const e of r.materials){const r=u.find(t=>t.name===e.name&&"bottling_material"===t.type);if(r){const i=(r.quantity||0)-e.quantity*n.bottledAmount;await wg(Im(sy,`artifacts/${E}/users/${t}/inventory`,r.id),{...r,quantity:i>0?i:0})}}M({date:(new Date).toISOString().slice(0,10),bottlingStartTime:"",product:"",bottledAmount:"",boxesUsed:"",lotNumber:"",notes:""})}catch(t){console.error("Error adding bottling log or updating inventory: ",t),H("Error submitting bottling log. Please try again.")}},className:"space-y-4",children:[(0,Hg.jsxs)("div",{children:[(0,Hg.jsx)("label",{className:"block text-[#4E3629] mb-2",children:"Date of Bottling"}),(0,Hg.jsx)("input",{type:"date",value:L.date,onChange:e=>M({...L,date:e.target.value}),required:!0,className:Wg})]}),(0,Hg.jsxs)("div",{children:[(0,Hg.jsx)("label",{className:"block text-[#4E3629] mb-2",children:"Bottling Start Time (HH:MM)"}),(0,Hg.jsx)("input",{type:"time",value:L.bottlingStartTime,onChange:e=>M({...L,bottlingStartTime:e.target.value}),required:!0,className:`${Wg} text-[#4E3629]`})]}),(0,Hg.jsxs)("div",{children:[(0,Hg.jsx)("label",{className:"block text-[#4E3629] mb-2",children:"Product Bottled"}),(0,Hg.jsxs)("select",{value:L.product,onChange:e=>M({...L,product:e.target.value}),required:!0,className:Wg,children:[(0,Hg.jsx)("option",{value:"",children:"Select a Product"}),a.map(e=>(0,Hg.jsx)("option",{value:e.product,children:e.product},e.id))]})]}),(0,Hg.jsxs)("div",{children:[(0,Hg.jsx)("label",{className:"block text-[#4E3629] mb-2",children:"Amount Bottled (units)"}),(0,Hg.jsx)("input",{type:"number",value:L.bottledAmount,onChange:e=>M({...L,bottledAmount:parseInt(e.target.value,10)||""}),className:Wg})]}),(0,Hg.jsxs)("div",{children:[(0,Hg.jsx)("label",{className:"block text-[#4E3629] mb-2",children:"Boxes Filled (read-only)"}),(0,Hg.jsx)("input",{type:"number",readOnly:!0,value:Math.floor((L.bottledAmount||0)/6),className:Wg})]}),(0,Hg.jsxs)("div",{children:[(0,Hg.jsx)("label",{className:"block text-[#4E3629] mb-2",children:"Lot Number"}),(0,Hg.jsx)("input",{type:"text",value:L.lotNumber,onChange:e=>M({...L,lotNumber:e.target.value}),required:!0,className:Wg})]}),(0,Hg.jsxs)("div",{children:[(0,Hg.jsx)("label",{className:"block text-[#4E3629] mb-2",children:"Notes"}),(0,Hg.jsx)("textarea",{value:L.notes,onChange:e=>M({...L,notes:e.target.value}),className:`${Wg} h-32 resize-y`})]}),(0,Hg.jsx)("button",{type:"submit",className:Gg,children:"Submit Bottling Log"})]})]}),"inventory"===s&&(0,Hg.jsxs)("div",{className:Kg,children:[(0,Hg.jsxs)("h2",{className:"text-2xl font-bold mb-6 flex items-center text-[#8A2A2B]",children:[(0,Hg.jsx)(Bg,{size:24,className:"mr-2 text-[#8A2A2B]"})," Inventory Management"]}),(0,Hg.jsxs)("div",{className:"overflow-x-auto",children:[(0,Hg.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Current Inventory"}),(0,Hg.jsxs)("table",{className:"min-w-full bg-[#E0D8D0] rounded-xl overflow-hidden",children:[(0,Hg.jsx)("thead",{className:ey,children:(0,Hg.jsxs)("tr",{className:"bg-[#C8C2BA] text-left text-[#4E3629]",children:[(0,Hg.jsx)("th",{className:"py-3 px-4",children:"Item Name"}),(0,Hg.jsx)("th",{className:"py-3 px-4",children:"Type"}),(0,Hg.jsx)("th",{className:"py-3 px-4",children:"Quantity"}),(0,Hg.jsx)("th",{className:"py-3 px-4",children:"Low Stock"}),(0,Hg.jsx)("th",{className:"py-3 px-4",children:"Lead Time (days)"}),(0,Hg.jsx)("th",{className:"py-3 px-4",children:"Actions"})]})}),(0,Hg.jsx)("tbody",{children:u.filter(e=>!e.deleted).map(t=>(0,Hg.jsxs)("tr",{className:"border-t border-[#B5AE9F] hover:bg-[#C8C2BA] transition-colors",children:[(0,Hg.jsx)("td",{className:"py-3 px-4",children:t.name}),(0,Hg.jsx)("td",{className:"py-3 px-4",children:t.type}),(0,Hg.jsxs)("td",{className:"py-3 px-4",children:[t.quantity," ",t.unit]}),(0,Hg.jsxs)("td",{className:"py-3 px-4",children:[t.lowStockThreshold," ",t.unit]}),(0,Hg.jsx)("td",{className:"py-3 px-4",children:t.leadTimeDays}),(0,Hg.jsx)("td",{className:"py-3 px-4",children:(0,Hg.jsx)("button",{onClick:()=>(async t=>{if(e)try{const n=e.uid;await wg(Im(sy,`artifacts/${E}/users/${n}/inventory`,t),{deleted:!0},{merge:!0}),H("Inventory item removed successfully!")}catch(n){console.error("Error removing inventory item: ",n),H("Error removing inventory item. Please try again.")}})(t.id),className:"text-[#8A2A2B] hover:text-red-600",children:(0,Hg.jsx)($g,{size:20})})})]},t.id))})]})]}),(0,Hg.jsxs)("div",{className:"overflow-x-auto mt-8",children:[(0,Hg.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Current Recipes"}),(0,Hg.jsxs)("table",{className:"min-w-full bg-[#E0D8D0] rounded-xl overflow-hidden",children:[(0,Hg.jsx)("thead",{className:ey,children:(0,Hg.jsxs)("tr",{className:"bg-[#C8C2BA] text-left text-[#4E3629]",children:[(0,Hg.jsx)("th",{className:"py-3 px-4",children:"Recipe Name"}),(0,Hg.jsx)("th",{className:"py-3 px-4",children:"Final Product"}),(0,Hg.jsx)("th",{className:"py-3 px-4",children:"Ingredients"})]})}),(0,Hg.jsx)("tbody",{children:a.map(e=>(0,Hg.jsxs)("tr",{className:"border-t border-[#B5AE9F] hover:bg-[#C8C2BA] transition-colors",children:[(0,Hg.jsx)("td",{className:"py-3 px-4",children:e.name}),(0,Hg.jsx)("td",{className:"py-3 px-4",children:e.product}),(0,Hg.jsx)("td",{className:"py-3 px-4",children:e.ingredients.map((e,t)=>(0,Hg.jsxs)("span",{className:"block",children:[e.quantity," ",e.unit," of ",e.name]},t))})]},e.id))})]})]}),(0,Hg.jsxs)("div",{className:"mb-8 p-6 bg-[#C8C2BA] rounded-2xl mt-8",children:[(0,Hg.jsxs)("h3",{className:"text-xl font-bold mb-4 flex items-center text-[#8A2A2B]",children:[(0,Hg.jsx)(qg,{size:20,className:"mr-2"})," Add/Update Item"]}),(0,Hg.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),e)try{const t=e.uid;await Eg(Tm(sy,`artifacts/${E}/users/${t}/inventory`),{...z,quantity:parseFloat(z.quantity),lowStockThreshold:parseFloat(z.lowStockThreshold),leadTimeDays:parseInt(z.leadTimeDays,10)}),H("Inventory item added successfully!"),B({name:"",type:"ingredient",quantity:"",unit:"",lowStockThreshold:"",leadTimeDays:""})}catch(t){console.error("Error adding inventory item: ",t),H("Error adding inventory item. Please try again.")}},className:"space-y-4",children:[(0,Hg.jsx)("input",{type:"text",placeholder:"Item Name (e.g., Grain, Bottles, Labels)",value:z.name,onChange:e=>B({...z,name:e.target.value}),required:!0,className:Wg}),(0,Hg.jsxs)("div",{className:"flex space-x-4",children:[(0,Hg.jsxs)("select",{value:z.type,onChange:e=>B({...z,type:e.target.value}),className:`${Wg} flex-1`,children:[(0,Hg.jsx)("option",{value:"ingredient",children:"Ingredient"}),(0,Hg.jsx)("option",{value:"bottling_material",children:"Bottling Material"})]}),(0,Hg.jsx)("input",{type:"text",placeholder:"Unit (e.g., kg, pieces, rolls)",value:z.unit,onChange:e=>B({...z,unit:e.target.value}),required:!0,className:`${Wg} flex-1`})]}),(0,Hg.jsxs)("div",{className:"flex space-x-4",children:[(0,Hg.jsx)("input",{type:"number",placeholder:"Current Quantity",value:z.quantity,onChange:e=>B({...z,quantity:e.target.value}),required:!0,className:`${Wg} flex-1`}),(0,Hg.jsx)("input",{type:"number",placeholder:"Low Stock Threshold",value:z.lowStockThreshold,onChange:e=>B({...z,lowStockThreshold:e.target.value}),required:!0,className:`${Wg} flex-1`}),(0,Hg.jsx)("input",{type:"number",placeholder:"Lead Time (days)",value:z.leadTimeDays,onChange:e=>B({...z,leadTimeDays:e.target.value}),required:!0,className:`${Wg} flex-1`})]}),(0,Hg.jsx)("button",{type:"submit",className:Gg,children:"Add/Update Inventory Item"})]})]}),(0,Hg.jsxs)("div",{className:"mb-8 p-6 bg-[#C8C2BA] rounded-2xl",children:[(0,Hg.jsxs)("h3",{className:"text-xl font-bold mb-4 flex items-center text-[#8A2A2B]",children:[(0,Hg.jsx)(qg,{size:20,className:"mr-2"})," Add New Recipe"]}),(0,Hg.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),e)try{const t=e.uid;await Eg(Tm(sy,`artifacts/${E}/users/${t}/recipes`),$),H("Recipe added successfully!"),q({name:"",product:"",ingredients:[{name:"",quantity:"",unit:""}]})}catch(t){console.error("Error adding recipe: ",t),H("Error adding recipe. Please try again.")}},className:"space-y-4",children:[(0,Hg.jsx)("input",{type:"text",placeholder:"Recipe Name",value:$.name,onChange:e=>q({...$,name:e.target.value}),required:!0,className:Wg}),(0,Hg.jsx)("input",{type:"text",placeholder:"Final Product",value:$.product,onChange:e=>q({...$,product:e.target.value}),required:!0,className:Wg}),(0,Hg.jsx)("h4",{className:"text-lg font-bold mt-4 text-[#4E3629]",children:"Ingredients:"}),$.ingredients.map((e,t)=>(0,Hg.jsxs)("div",{className:"flex space-x-2 items-center",children:[(0,Hg.jsx)("input",{type:"text",placeholder:"Ingredient Name",value:e.name,onChange:e=>{const n=[...$.ingredients];n[t].name=e.target.value,q({...$,ingredients:n})},required:!0,className:Wg}),(0,Hg.jsx)("input",{type:"number",step:"0.01",placeholder:"Quantity",value:e.quantity,onChange:e=>{const n=[...$.ingredients];n[t].quantity=parseFloat(e.target.value),q({...$,ingredients:n})},required:!0,className:`${Wg} w-28`}),(0,Hg.jsxs)("select",{value:e.unit,onChange:e=>{const n=[...$.ingredients];n[t].unit=e.target.value,q({...$,ingredients:n})},required:!0,className:`${Wg} w-28`,children:[(0,Hg.jsx)("option",{value:"",children:"Unit"}),(0,Hg.jsx)("option",{value:"L",children:"L"}),(0,Hg.jsx)("option",{value:"gr",children:"gr"})]}),(0,Hg.jsx)("button",{type:"button",onClick:()=>{const e=[...$.ingredients];e.splice(t,1),q({...$,ingredients:e})},children:(0,Hg.jsx)($g,{size:20,className:"text-[#8A2A2B] hover:text-red-600"})})]},t)),(0,Hg.jsxs)("div",{className:"flex flex-col space-y-4 items-start",children:[(0,Hg.jsx)("button",{type:"button",onClick:()=>q({...$,ingredients:[...$.ingredients,{name:"",quantity:"",unit:""}]}),className:"text-[#8A2A2B] hover:text-[#6D2121]",children:"+ Add Another Material"}),(0,Hg.jsx)("button",{type:"submit",className:Gg,children:"Add Recipe"})]})]})]}),(0,Hg.jsxs)("div",{className:"mb-8 p-6 bg-[#C8C2BA] rounded-2xl",children:[(0,Hg.jsxs)("h3",{className:"text-xl font-bold mb-4 flex items-center text-[#8A2A2B]",children:[(0,Hg.jsx)(qg,{size:20,className:"mr-2"})," Define Bottling Materials"]}),(0,Hg.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),e)try{const t=e.uid;await wg(Im(sy,`artifacts/${E}/users/${t}/bottlingMaterialDefinitions`,U.name),{materials:U.materials.map(e=>({...e,quantity:parseFloat(e.quantity)}))}),H(`Bottling material definition "${U.name}" saved successfully!`),V({name:"",materials:[{name:"",quantity:""}]})}catch(t){console.error("Error adding bottling material definition: ",t),H("Error saving bottling materials. Please try again.")}},className:"space-y-4",children:[(0,Hg.jsx)("input",{type:"text",placeholder:"Definition Name (e.g., Standard Bottle Pack)",value:U.name,onChange:e=>V({...U,name:e.target.value}),required:!0,className:Wg}),(0,Hg.jsx)("h4",{className:"text-lg font-bold mt-4 text-[#4E3629]",children:"Materials per Bottle:"}),U.materials.map((e,t)=>(0,Hg.jsxs)("div",{className:"flex space-x-2 items-center",children:[(0,Hg.jsx)("input",{type:"text",placeholder:"Material Name (e.g., Bottles, Labels)",value:e.name,onChange:e=>{const n=[...U.materials];n[t].name=e.target.value,V({...U,materials:n})},required:!0,className:Wg}),(0,Hg.jsx)("input",{type:"number",placeholder:"Quantity",value:e.quantity,onChange:e=>{const n=[...U.materials];n[t].quantity=e.target.value,V({...U,materials:n})},required:!0,className:`${Wg} w-28`}),(0,Hg.jsx)("button",{type:"button",onClick:()=>{const e=[...U.materials];e.splice(t,1),V({...U,materials:e})},children:(0,Hg.jsx)($g,{size:20,className:"text-[#8A2A2B] hover:text-red-600"})})]},t)),(0,Hg.jsxs)("div",{className:"flex flex-col space-y-4 items-start",children:[(0,Hg.jsx)("button",{type:"button",onClick:()=>V({...U,materials:[...U.materials,{name:"",quantity:""}]}),className:"text-[#8A2A2B] hover:text-[#6D2121]",children:"+ Add Another Material"}),(0,Hg.jsx)("button",{type:"submit",className:Gg,children:"Save Material Definition"})]})]})]})]})]}):(0,Hg.jsxs)("div",{className:`${Kg} text-center`,children:[(0,Hg.jsx)("p",{className:"text-xl text-[#4E3629]",children:"Loading application..."}),(0,Hg.jsxs)("p",{className:"text-sm text-[#4E3629] mt-2",children:["Authenticated user ID: ",null===e||void 0===e?void 0:e.uid]})]})}),y&&(0,Hg.jsx)("div",{className:"fixed inset-0 bg-[#4E3629] bg-opacity-75 flex items-center justify-center p-4",children:(0,Hg.jsxs)("div",{className:"bg-[#E0D8D0] p-6 rounded-2xl shadow-2xl max-w-sm w-full text-center",children:[(0,Hg.jsx)("h3",{className:"text-2xl font-bold mb-4 text-[#4E3629]",children:"Notification"}),(0,Hg.jsx)("p",{className:"text-lg text-[#4E3629] mb-6",children:b}),(0,Hg.jsx)("button",{type:"button",onClick:()=>v(!1),className:Gg,children:"Close"})]})})]})}const uy=document.getElementById("root");i.createRoot(uy).render((0,Hg.jsx)(r.StrictMode,{children:(0,Hg.jsx)(ly,{})}))})();
//# sourceMappingURL=main.736f63b1.js.map